% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_channel_align.R
\name{step_measure_channel_align}
\alias{step_measure_channel_align}
\title{Align Multiple Channels to a Common Grid}
\usage{
step_measure_channel_align(
  recipe,
  ...,
  method = c("union", "intersection", "reference"),
  reference = 1L,
  interpolation = c("linear", "spline", "constant"),
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_channel_align")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{...}{One or more selector functions to choose measure columns.
If empty, all measure columns are used.}

\item{method}{How to determine the common grid:
\itemize{
\item \code{"union"} (default): Use all unique locations from all channels
\item \code{"intersection"}: Use only locations present in all channels
\item \code{"reference"}: Use the grid from the reference channel
}}

\item{reference}{For \code{method = "reference"}, which channel to use as reference.
Can be a column name (character) or column index (integer). Default is 1
(first channel).}

\item{interpolation}{Interpolation method for missing values:
\itemize{
\item \code{"linear"} (default): Linear interpolation
\item \code{"spline"}: Cubic spline interpolation
\item \code{"constant"}: Nearest neighbor (constant)
}}

\item{role}{Not used.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\code{step_measure_channel_align()} creates a \emph{specification} of a recipe step that
aligns multiple measurement channels to a common location grid.
}
\details{
Multi-channel analytical instruments (e.g., LC-DAD, SEC with multiple detectors)
often produce measurements at slightly different location grids for each channel.
This step aligns all channels to a common grid, enabling:
\itemize{
\item Direct comparison between channels
\item Channel combination or ratio calculations
\item Modeling with consistent feature dimensions
}
\subsection{Grid Methods}{
\itemize{
\item \strong{Union}: Creates a grid containing all unique locations from all channels.
Values are interpolated where channels don't have data.
\item \strong{Intersection}: Uses only locations where all channels have data.
No interpolation needed but may lose data at edges.
\item \strong{Reference}: Uses one channel's grid as the target. Other channels are
interpolated to match.
}
}
}
\examples{
library(recipes)
library(tibble)

# Create sample multi-channel data
df <- tibble(
  id = rep(1:3, each = 10),
  time_uv = rep(seq(0, 9, by = 1), 3),
  absorbance_uv = rnorm(30, 100, 10),
  time_ri = rep(seq(0.5, 9.5, by = 1), 3),
  absorbance_ri = rnorm(30, 50, 5),
  concentration = rep(c(10, 25, 50), each = 10)
)

# Ingest as separate channels, then align
rec <- recipe(concentration ~ ., data = df) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(absorbance_uv, location = vars(time_uv)) |>
  step_measure_input_long(absorbance_ri, location = vars(time_ri)) |>
  step_measure_channel_align(method = "union")
}
\seealso{
Other measure-channel: 
\code{\link{step_measure_channel_combine}()},
\code{\link{step_measure_channel_ratio}()}
}
\concept{measure-channel}
