% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/baseline-py.R
\name{step_measure_baseline_py}
\alias{step_measure_baseline_py}
\title{Python-Based Baseline Correction via pybaselines}
\usage{
step_measure_baseline_py(
  recipe,
  method = "asls",
  ...,
  subtract = TRUE,
  measures = NULL,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_baseline_py")
)
}
\arguments{
\item{recipe}{A recipe object. The step will be added to the sequence of
operations for this recipe.}

\item{method}{The pybaselines method to use. Common methods include:
\itemize{
\item Whittaker methods: \code{"asls"}, \code{"iasls"}, \code{"airpls"}, \code{"arpls"}, \code{"drpls"}, \code{"psalsa"}
\item Polynomial methods: \code{"poly"}, \code{"modpoly"}, \code{"imodpoly"}, \code{"loess"}, \code{"quant_reg"}
\item Morphological: \code{"mor"}, \code{"imor"}, \code{"rolling_ball"}, \code{"tophat"}
\item Spline: \code{"pspline_asls"}, \code{"pspline_airpls"}, \code{"mixture_model"}
\item Smooth: \code{"snip"}, \code{"swima"}, \code{"noise_median"}
\item Classification: \code{"dietrich"}, \code{"golotvin"}, \code{"fastchrom"}
\item See pybaselines documentation for the full list.
}}

\item{...}{Additional arguments passed to the pybaselines method. Common
parameters include:
\itemize{
\item \code{lam}: Smoothness parameter for Whittaker methods (default varies by method)
\item \code{p}: Asymmetry parameter for ALS methods (default ~0.01)
\item \code{poly_order}: Polynomial degree for polynomial methods
\item \code{half_window}: Window size for morphological methods
\item \code{max_half_window}: Maximum window for SNIP method
}}

\item{subtract}{If \code{TRUE} (default), the baseline is subtracted from the
signal. If \code{FALSE}, the baseline values replace the original values
(useful for extracting baselines).}

\item{measures}{An optional character vector of measure column names to
process. If \code{NULL} (the default), all measure columns (columns with class
\code{measure_list}) will be processed.}

\item{role}{Not used by this step since no new variables are created.}

\item{trained}{A logical to indicate if the quantities for preprocessing
have been estimated.}

\item{skip}{A logical. Should the step be skipped when the recipe is baked?}

\item{id}{A character string that is unique to this step to identify it.}
}
\value{
An updated version of \code{recipe} with the new step added to the
sequence of any existing operations.
}
\description{
\code{step_measure_baseline_py()} creates a \emph{specification} of a recipe step
that applies baseline correction using the Python pybaselines library,
which provides 50+ baseline correction algorithms.
}
\details{
This step provides access to the comprehensive pybaselines Python library,
which implements over 50 baseline correction algorithms across several
categories:
\subsection{Whittaker Methods}{

Based on penalized least squares with asymmetric weights:
\itemize{
\item \code{asls}: Asymmetric Least Squares (good general-purpose method)
\item \code{iasls}: Improved ALS with automatic smoothness selection
\item \code{airpls}: Adaptive iteratively reweighted penalized least squares
\item \code{arpls}: Asymmetrically reweighted penalized least squares
\item \code{psalsa}: Peaked Signal's Asymmetric Least Squares Algorithm
}
}

\subsection{Polynomial Methods}{

Fit polynomials to baseline regions:
\itemize{
\item \code{poly}: Simple polynomial fitting
\item \code{modpoly}: Modified polynomial (iterative)
\item \code{imodpoly}: Improved modified polynomial
\item \code{loess}: Local regression (LOESS)
}
}

\subsection{Morphological Methods}{

Based on mathematical morphology:
\itemize{
\item \code{mor}: Morphological opening
\item \code{imor}: Improved morphological
\item \code{rolling_ball}: Rolling ball algorithm
\item \code{tophat}: Top-hat transform
}
}

\subsection{Requirements}{

This step requires the \code{reticulate} package and Python with pybaselines
installed. Install pybaselines with:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{reticulate::py_require("pybaselines")
}\if{html}{\out{</div>}}

\strong{No selectors should be supplied to this step function}. The data should be
in the internal format produced by \code{\link[=step_measure_input_wide]{step_measure_input_wide()}} or
\code{\link[=step_measure_input_long]{step_measure_input_long()}}.
}
}
\section{Tidying}{
When you \code{\link[recipes:tidy.recipe]{tidy()}} this step, a tibble with columns
\code{terms}, \code{method}, \code{subtract}, and \code{id} is returned.
}

\examples{
\dontshow{if (measure:::.pybaselines_available()) withAutoprint(\{ # examplesIf}
library(recipes)

\donttest{
# Asymmetric Least Squares baseline correction
rec <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_baseline_py(method = "asls", lam = 1e6, p = 0.01) |>
  prep()

bake(rec, new_data = NULL)

# Using SNIP algorithm
rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_baseline_py(method = "snip", max_half_window = 40) |>
  prep()
}
\dontshow{\}) # examplesIf}
}
\seealso{
\code{\link[=step_measure_baseline_als]{step_measure_baseline_als()}}, \code{\link[=step_measure_baseline_custom]{step_measure_baseline_custom()}} for
R-based alternatives.

Other measure-baseline: 
\code{\link{step_measure_baseline_airpls}()},
\code{\link{step_measure_baseline_als}()},
\code{\link{step_measure_baseline_arpls}()},
\code{\link{step_measure_baseline_aspls}()},
\code{\link{step_measure_baseline_auto}()},
\code{\link{step_measure_baseline_custom}()},
\code{\link{step_measure_baseline_fastchrom}()},
\code{\link{step_measure_baseline_gpc}()},
\code{\link{step_measure_baseline_iarpls}()},
\code{\link{step_measure_baseline_minima}()},
\code{\link{step_measure_baseline_morph}()},
\code{\link{step_measure_baseline_morphological}()},
\code{\link{step_measure_baseline_poly}()},
\code{\link{step_measure_baseline_rf}()},
\code{\link{step_measure_baseline_rolling}()},
\code{\link{step_measure_baseline_snip}()},
\code{\link{step_measure_baseline_tophat}()},
\code{\link{step_measure_detrend}()}
}
\concept{measure-baseline}
