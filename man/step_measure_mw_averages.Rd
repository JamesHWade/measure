% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mw-calculations.R
\name{step_measure_mw_averages}
\alias{step_measure_mw_averages}
\title{Calculate Molecular Weight Averages for SEC/GPC}
\usage{
step_measure_mw_averages(
  recipe,
  measures = NULL,
  calibration = NULL,
  integration_range = NULL,
  output_cols = c("mn", "mw", "mz", "mp", "dispersity"),
  prefix = "mw_",
  role = "predictor",
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_mw_averages")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{measures}{An optional character vector of measure column names.}

\item{calibration}{Calibration method for converting x-axis to log(MW).
Can be:
\itemize{
\item \code{NULL} (default): Assumes x-axis is already log10(MW)
\item A numeric vector of length 2: Linear calibration \code{c(slope, intercept)}
where \code{log10(MW) = slope * x + intercept}
\item \code{"auto"}: Estimate from data range (assumes typical polymer range)
}}

\item{integration_range}{Optional numeric vector \code{c(min, max)} specifying
the x-axis range for integration. If \code{NULL}, uses full range.}

\item{output_cols}{Character vector of metrics to calculate. Default
includes all: \code{c("mn", "mw", "mz", "mp", "dispersity")}.}

\item{prefix}{Prefix for output column names. Default is \code{"mw_"}.}

\item{role}{Role for generated columns. Default is \code{"predictor"}.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#superseded}{\figure{lifecycle-superseded.svg}{options: alt='[Superseded]'}}}{\strong{[Superseded]}}

\code{step_measure_mw_averages()} creates a \emph{specification} of a recipe step that
calculates molecular weight averages from size exclusion chromatography data.

\strong{This step has been superseded by \code{measure.sec::step_sec_mw_averages()}.}
For new code, we recommend using the \code{measure.sec} package which provides
more complete SEC/GPC analysis functionality.
}
\details{
This step calculates standard molecular weight averages from SEC/GPC data:\tabular{lll}{
   Metric \tab Formula \tab Description \cr
   Mn \tab Σwᵢ / Σ(wᵢ/Mᵢ) \tab Number-average molecular weight \cr
   Mw \tab Σ(wᵢMᵢ) / Σwᵢ \tab Weight-average molecular weight \cr
   Mz \tab Σ(wᵢMᵢ²) / Σ(wᵢMᵢ) \tab Z-average molecular weight \cr
   Mp \tab M at peak maximum \tab Peak molecular weight \cr
   Đ \tab Mw/Mn \tab Dispersity (polydispersity index) \cr
}


The detector signal is assumed to be proportional to weight concentration.
For RI detection, this is typically valid. For UV detection, response factors
may need to be applied first using \code{\link[=step_measure_calibrate_y]{step_measure_calibrate_y()}}.

\strong{Prerequisites:}
\itemize{
\item Data should be baseline corrected
\item X-axis should represent retention time/volume or log(MW)
\item Integration limits should exclude solvent peaks
}
}
\examples{
library(recipes)

# Assuming x-axis is already calibrated to log10(MW)
# rec <- recipe(~., data = gpc_data) |>
#   step_measure_input_wide(starts_with("signal_")) |>
#   step_measure_baseline_als() |>
#   step_measure_mw_averages() |>
#   prep()
}
\seealso{
Other measure-chromatography: 
\code{\link{step_measure_mw_distribution}()},
\code{\link{step_measure_mw_fractions}()},
\code{\link{step_measure_peaks_deconvolve}()}
}
\concept{measure-chromatography}
