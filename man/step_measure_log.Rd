% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spectral-math.R
\name{step_measure_log}
\alias{step_measure_log}
\title{Log Transformation}
\usage{
step_measure_log(
  recipe,
  base = exp(1),
  offset = 0,
  measures = NULL,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_log")
)
}
\arguments{
\item{recipe}{A recipe object. The step will be added to the sequence of
operations for this recipe.}

\item{base}{The base of the logarithm. Default is \code{exp(1)} (natural log).
Use \code{10} for log10 transformation.}

\item{offset}{A numeric offset added to values before taking the log.
Default is \code{0}. Use a small positive value (e.g., \code{1} for \code{log1p})
to handle zero or near-zero values.}

\item{measures}{An optional character vector of measure column names to
process. If \code{NULL} (the default), all measure columns will be processed.}

\item{role}{Not used by this step since no new variables are created.}

\item{trained}{A logical to indicate if the step has been trained.}

\item{skip}{A logical. Should the step be skipped when baking?}

\item{id}{A character string that is unique to this step.}
}
\value{
An updated version of \code{recipe} with the new step added.
}
\description{
\code{step_measure_log()} creates a \emph{specification} of a recipe step that applies
a logarithmic transformation to measurement values.
}
\details{
This step applies the transformation:

\deqn{y' = \log_b(y + \text{offset})}{y' = log_b(y + offset)}

where \eqn{b} is the base.

Log transformation is commonly used for:
\itemize{
\item Variance stabilization
\item Normalizing skewed distributions
\item Converting multiplicative relationships to additive
}

\strong{Warning}: Non-positive values (after offset) will produce \code{-Inf} or \code{NaN}.

The measurement locations are preserved unchanged.
}
\examples{
library(recipes)

# Natural log transformation
rec <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_log(offset = 1) |>
  prep()

# Log10 transformation
rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_log(base = 10) |>
  prep()
}
\seealso{
Other measure-preprocessing: 
\code{\link{step_measure_absorbance}()},
\code{\link{step_measure_calibrate_x}()},
\code{\link{step_measure_calibrate_y}()},
\code{\link{step_measure_derivative}()},
\code{\link{step_measure_derivative_gap}()},
\code{\link{step_measure_kubelka_munk}()},
\code{\link{step_measure_map}()},
\code{\link{step_measure_msc}()},
\code{\link{step_measure_normalize_istd}()},
\code{\link{step_measure_ratio_reference}()},
\code{\link{step_measure_snv}()},
\code{\link{step_measure_subtract_blank}()},
\code{\link{step_measure_subtract_reference}()},
\code{\link{step_measure_transmittance}()}
}
\concept{measure-preprocessing}
