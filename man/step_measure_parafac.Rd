% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_parafac.R
\name{step_measure_parafac}
\alias{step_measure_parafac}
\title{PARAFAC Decomposition for Multi-Dimensional Data}
\usage{
step_measure_parafac(
  recipe,
  ...,
  n_components = 3L,
  center = TRUE,
  scale = FALSE,
  max_iter = 500L,
  tol = 1e-06,
  prefix = "parafac_",
  role = "predictor",
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_parafac")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{...}{One or more selector functions to choose measure columns.
If empty, all nD measure columns are used.}

\item{n_components}{Number of PARAFAC components to extract. Default is 3.}

\item{center}{Logical. Should data be centered before decomposition?
Default is \code{TRUE}.}

\item{scale}{Logical. Should data be scaled before decomposition?
Default is \code{FALSE}.}

\item{max_iter}{Maximum number of iterations. Default is 500.}

\item{tol}{Convergence tolerance. Default is 1e-6.}

\item{prefix}{Prefix for output column names. Default is \code{"parafac_"}.}

\item{role}{Not used.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\code{step_measure_parafac()} creates a \emph{specification} of a recipe step that
applies Parallel Factor Analysis (PARAFAC) to multi-dimensional measurement
data, extracting component scores as features for modeling.
}
\details{
PARAFAC (also known as CANDECOMP/PARAFAC or CP decomposition) decomposes
a three-way or higher array into a sum of rank-one tensors. For measurement
data like EEM (excitation-emission matrices) or LC-DAD, this extracts
interpretable components corresponding to underlying chemical species.
\subsection{Requirements}{
\itemize{
\item Input must be \code{measure_nd_list} with 2+ dimensions
\item All samples must have the same grid (regular, aligned)
\item The \code{multiway} package must be installed (in Suggests)
}
}

\subsection{Output}{

Creates numeric feature columns: \code{parafac_1}, \code{parafac_2}, ..., \code{parafac_n}
representing each sample's scores on the extracted components.
}
}
\note{
This step requires the \code{multiway} package. Install with:
\code{install.packages("multiway")}
}
\examples{
\dontrun{
library(recipes)

# After ingesting EEM data as 2D measurements
rec <- recipe(concentration ~ ., data = eem_data) |>
  step_measure_input_long(
    fluorescence,
    location = vars(excitation, emission)
  ) |>
  step_measure_parafac(n_components = 3) |>
  prep()

bake(rec, new_data = NULL)
}
}
\seealso{
\code{\link[=step_measure_tucker]{step_measure_tucker()}} for Tucker decomposition

Other measure-multiway: 
\code{\link{step_measure_mcr_als}()},
\code{\link{step_measure_tucker}()}
}
\concept{measure-multiway}
