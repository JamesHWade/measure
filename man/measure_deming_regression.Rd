% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/method-comparison.R
\name{measure_deming_regression}
\alias{measure_deming_regression}
\title{Deming Regression for Method Comparison}
\usage{
measure_deming_regression(
  data,
  method1_col,
  method2_col,
  error_ratio = NULL,
  method1_sd = NULL,
  method2_sd = NULL,
  bootstrap = FALSE,
  bootstrap_n = 1000,
  conf_level = 0.95
)
}
\arguments{
\item{data}{A data frame containing paired measurements.}

\item{method1_col}{Name of column for method 1 (typically reference/comparator).}

\item{method2_col}{Name of column for method 2 (typically test method).}

\item{error_ratio}{Ratio of error variances (var_method2 / var_method1).
Default is 1 (equal variances). Can be estimated from replicate data.}

\item{method1_sd}{Optional known SD of method 1. Used to calculate error_ratio.}

\item{method2_sd}{Optional known SD of method 2. Used to calculate error_ratio.}

\item{bootstrap}{Use bootstrap for confidence intervals? Default is FALSE.}

\item{bootstrap_n}{Number of bootstrap samples. Default is 1000.}

\item{conf_level}{Confidence level for intervals. Default is 0.95.}
}
\value{
A \code{measure_deming_regression} object containing:
\itemize{
\item \code{coefficients}: Tibble with intercept and slope estimates and CIs
\item \code{statistics}: List of diagnostic statistics (RMSE, R-squared)
\item \code{data_summary}: Summary of input data
\item \code{bootstrap}: Bootstrap results if requested
}
}
\description{
Performs Deming regression to compare two measurement methods when both
have measurement error. This is preferred over ordinary least squares
when both methods have non-negligible error.
}
\details{
\subsection{Error Ratio}{

The error ratio (lambda) represents the ratio of error variances:
\code{lambda = var(method2) / var(method1)}

Common approaches:
\itemize{
\item \code{lambda = 1}: Assume equal error variances
\item Estimate from replicates: Use SDs from replicate measurements
\item Estimate from calibration: Use known method precision data
}
}

\subsection{Interpretation}{

For equivalent methods:
\itemize{
\item Slope should be close to 1 (proportional agreement)
\item Intercept should be close to 0 (no constant bias)
}

If 95\% CI for slope includes 1 and CI for intercept includes 0,
methods are considered equivalent.
}

\subsection{Implementation}{

If the \code{mcr} package is available, it is used for fitting. Otherwise,
a manual implementation is used with optional bootstrap CIs.
}
}
\examples{
# Method comparison data
data <- data.frame(
  reference = c(5.2, 10.5, 15.8, 25.3, 50.1, 75.4, 100.2),
  new_method = c(5.1, 10.8, 16.2, 25.9, 49.8, 76.1, 101.3)
)

# Deming regression with bootstrap CIs
result <- measure_deming_regression(
  data,
  method1_col = "reference",
  method2_col = "new_method",
  bootstrap = TRUE,
  bootstrap_n = 500
)

print(result)
tidy(result)
}
\seealso{
\code{\link[=measure_bland_altman]{measure_bland_altman()}}, \code{\link[=measure_passing_bablok]{measure_passing_bablok()}}

Other method-comparison: 
\code{\link{measure_bland_altman}()},
\code{\link{measure_passing_bablok}()},
\code{\link{measure_proficiency_score}()}
}
\concept{method-comparison}
