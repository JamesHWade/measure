% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_channel_ratio.R
\name{step_measure_channel_ratio}
\alias{step_measure_channel_ratio}
\title{Compute Ratios Between Channels}
\usage{
step_measure_channel_ratio(
  recipe,
  numerator,
  denominator,
  output_prefix = "ratio_",
  epsilon = 1e-10,
  log_transform = FALSE,
  remove_original = FALSE,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_channel_ratio")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{numerator}{Column name(s) for the numerator channel(s).}

\item{denominator}{Column name(s) for the denominator channel(s).
Must have same length as \code{numerator} (paired ratios).}

\item{output_prefix}{Prefix for output column names. Default is \code{"ratio_"}.}

\item{epsilon}{Small value added to denominator to avoid division by zero.
Default is \code{1e-10}.}

\item{log_transform}{Logical. Should the ratio be log-transformed?
Default is \code{FALSE}.}

\item{remove_original}{Logical. Should original channel columns be removed?
Default is \code{FALSE}.}

\item{role}{Not used.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\code{step_measure_channel_ratio()} creates a \emph{specification} of a recipe step
that computes ratios between pairs of measurement channels.
}
\details{
Channel ratios are useful in analytical chemistry for:
\itemize{
\item \strong{Normalization}: UV/RI ratios normalize for concentration variations
\item \strong{Identification}: Characteristic ratios help identify compounds
\item \strong{Quality control}: Ratio stability indicates system performance
}
\subsection{Output Columns}{

For each numerator/denominator pair, creates a new measure column named
\verb{\{output_prefix\}\{numerator\}_\{denominator\}} (e.g., \code{"ratio_uv_ri"}).
}

\subsection{Log Transform}{

When \code{log_transform = TRUE}, computes \code{log(numerator / denominator)} which
can be useful for:
\itemize{
\item Normalizing skewed distributions
\item Converting multiplicative relationships to additive
\item Working with absorbance ratios
}
}
}
\note{
Channels must be aligned to the same grid before computing ratios. Use
\code{\link[=step_measure_channel_align]{step_measure_channel_align()}} first if grids differ.
}
\examples{
library(recipes)
library(tibble)

# Create sample multi-channel data
df <- tibble(
  id = rep(1:3, each = 10),
  time = rep(seq(0, 9, by = 1), 3),
  uv = rnorm(30, 100, 10),
  ri = rnorm(30, 50, 5),
  concentration = rep(c(10, 25, 50), each = 10)
)

# Compute UV/RI ratio
rec <- recipe(concentration ~ ., data = df) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(uv, location = vars(time)) |>
  step_measure_input_long(ri, location = vars(time)) |>
  step_measure_channel_ratio(numerator = "uv", denominator = "ri")
}
\seealso{
Other measure-channel: 
\code{\link{step_measure_channel_align}()},
\code{\link{step_measure_channel_combine}()}
}
\concept{measure-channel}
