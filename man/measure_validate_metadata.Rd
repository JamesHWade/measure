% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metadata-validation.R
\name{measure_validate_metadata}
\alias{measure_validate_metadata}
\title{Validate Analytical Metadata}
\usage{
measure_validate_metadata(
  data,
  require = NULL,
  sample_types = measure_sample_types,
  action = c("error", "warn", "message")
)
}
\arguments{
\item{data}{A data frame to validate.}

\item{require}{Character vector of required columns. Common columns include:
\itemize{
\item \code{"sample_type"}: Sample classification (qc, standard, blank, unknown, reference)
\item \code{"run_order"}: Injection/measurement sequence (integer)
\item \code{"batch_id"}: Batch identifier (character/factor)
\item \code{"nominal_conc"}: Known concentration for standards (numeric)
\item \code{"sample_id"}: Unique sample identifier
\item \code{"analyst_id"}, \code{"day"}, \code{"instrument_id"}: Precision study factors
}}

\item{sample_types}{Allowed values for \code{sample_type} column. Default is
\link{measure_sample_types}: "qc", "standard", "blank", "unknown", "reference".}

\item{action}{What to do when validation fails:
\itemize{
\item \code{"error"} (default): Stop with an informative error
\item \code{"warn"}: Issue warnings but continue
\item \code{"message"}: Issue messages but continue
}}
}
\value{
Invisibly returns a list with validation results:
\itemize{
\item \code{valid}: Logical, TRUE if all checks passed
\item \code{checks}: List of individual check results
\item \code{data}: The original data (unchanged)
}
}
\description{
Validates that a data frame contains the required metadata columns for
analytical workflows. This function checks for column presence, correct
data types, and valid values (e.g., sample_type levels).
}
\details{
\subsection{Canonical Columns}{

Milestone 2 functions expect specific column names with specific types:\tabular{lll}{
   Column \tab Type \tab Description \cr
   \code{sample_type} \tab character/factor \tab Sample classification \cr
   \code{run_order} \tab integer \tab Injection sequence within batch \cr
   \code{batch_id} \tab character/factor \tab Batch identifier \cr
   \code{nominal_conc} \tab numeric \tab Known concentration (standards) \cr
   \code{sample_id} \tab character/factor \tab Unique sample identifier \cr
   \code{analyst_id} \tab character/factor \tab Analyst performing measurement \cr
   \code{day} \tab character/Date \tab Day of measurement \cr
   \code{instrument_id} \tab character/factor \tab Instrument identifier \cr
   \code{dilution_factor} \tab numeric \tab Sample dilution factor \cr
}

}

\subsection{Sample Type Values}{

The \code{sample_type} column must contain only values from \link{measure_sample_types}:
\itemize{
\item \code{"qc"}: Quality control sample (pooled QC, system suitability)
\item \code{"standard"}: Calibration standard with known concentration
\item \code{"blank"}: Blank sample (solvent, matrix blank)
\item \code{"unknown"}: Sample with unknown concentration
\item \code{"reference"}: Reference material for batch correction
}
}
}
\examples{
# Create sample analytical data
data <- data.frame(
  sample_id = paste0("S", 1:10),
  sample_type = c("qc", "standard", "standard", "unknown", "unknown",
                  "unknown", "qc", "blank", "unknown", "qc"),
  run_order = 1:10,
  batch_id = "B001",
  nominal_conc = c(NA, 10, 50, NA, NA, NA, NA, 0, NA, NA),
  response = rnorm(10, mean = 100)
)

# Validate required columns
measure_validate_metadata(data, require = c("sample_type", "run_order"))

# Validate for calibration workflow
measure_validate_metadata(
  data,
  require = c("sample_type", "nominal_conc")
)

# More lenient validation (warnings only)
measure_validate_metadata(
  data,
  require = c("sample_type", "run_order", "missing_col"),
  action = "warn"
)
}
\seealso{
\code{\link[=measure_standardize_sample_type]{measure_standardize_sample_type()}} for converting non-standard
sample type values to canonical form.
}
