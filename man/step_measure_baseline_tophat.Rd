% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/baseline-extended.R, R/baseline-morphological.R
\name{step_measure_baseline_tophat}
\alias{step_measure_baseline_tophat}
\title{Top-Hat Morphological Baseline Correction}
\usage{
step_measure_baseline_tophat(
  recipe,
  measures = NULL,
  window_size = 50L,
  smoothing = 11L,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_baseline_tophat")
)

step_measure_baseline_tophat(
  recipe,
  measures = NULL,
  window_size = 50L,
  smoothing = 11L,
  role = NA,
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_baseline_tophat")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{measures}{An optional character vector of measure column names.}

\item{window_size}{Size of the structuring element in number of points.
Default is 50.}

\item{smoothing}{Additional smoothing window applied to baseline. Default is 11.}

\item{role}{Not used.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}

\item{half_window}{Half-window size for the structuring element. Default is 50.}
}
\value{
An updated recipe with the new step added.

An updated recipe with the new step added.
}
\description{
\code{step_measure_baseline_tophat()} creates a \emph{specification} of a recipe step
that applies top-hat morphological baseline correction.

\code{step_measure_baseline_tophat()} creates a \emph{specification} of a recipe step
that applies morphological top-hat filtering for baseline correction.
}
\details{
The top-hat transform is a morphological operation that extracts bright
features (peaks) from a dark background. It is computed as the difference
between the original signal and its morphological opening.

This is effective for chromatography with sharp, well-defined peaks
on a smooth baseline.

The top-hat filter is a morphological operation that uses opening
(erosion followed by dilation) to estimate the baseline. The baseline
is then subtracted from the original signal.

This method is effective for:
\itemize{
\item Chromatographic data with narrow peaks
\item Spectra where peaks are narrower than baseline variations
\item Data with gradual drift
}
}
\examples{
library(recipes)

\donttest{
rec <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_baseline_tophat(half_window = 30) |>
  prep()
}
library(recipes)

\donttest{
rec <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_baseline_tophat(window_size = 50) |>
  prep()

bake(rec, new_data = NULL)
}
}
\seealso{
Other measure-baseline: 
\code{\link{step_measure_baseline_airpls}()},
\code{\link{step_measure_baseline_als}()},
\code{\link{step_measure_baseline_arpls}()},
\code{\link{step_measure_baseline_aspls}()},
\code{\link{step_measure_baseline_auto}()},
\code{\link{step_measure_baseline_custom}()},
\code{\link{step_measure_baseline_fastchrom}()},
\code{\link{step_measure_baseline_gpc}()},
\code{\link{step_measure_baseline_iarpls}()},
\code{\link{step_measure_baseline_minima}()},
\code{\link{step_measure_baseline_morph}()},
\code{\link{step_measure_baseline_morphological}()},
\code{\link{step_measure_baseline_poly}()},
\code{\link{step_measure_baseline_py}()},
\code{\link{step_measure_baseline_rf}()},
\code{\link{step_measure_baseline_rolling}()},
\code{\link{step_measure_baseline_snip}()},
\code{\link{step_measure_detrend}()}

Other measure-baseline: 
\code{\link{step_measure_baseline_airpls}()},
\code{\link{step_measure_baseline_als}()},
\code{\link{step_measure_baseline_arpls}()},
\code{\link{step_measure_baseline_aspls}()},
\code{\link{step_measure_baseline_auto}()},
\code{\link{step_measure_baseline_custom}()},
\code{\link{step_measure_baseline_fastchrom}()},
\code{\link{step_measure_baseline_gpc}()},
\code{\link{step_measure_baseline_iarpls}()},
\code{\link{step_measure_baseline_minima}()},
\code{\link{step_measure_baseline_morph}()},
\code{\link{step_measure_baseline_morphological}()},
\code{\link{step_measure_baseline_poly}()},
\code{\link{step_measure_baseline_py}()},
\code{\link{step_measure_baseline_rf}()},
\code{\link{step_measure_baseline_rolling}()},
\code{\link{step_measure_baseline_snip}()},
\code{\link{step_measure_detrend}()}
}
\concept{measure-baseline}
