% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qc.R
\name{step_measure_qc_snr}
\alias{step_measure_qc_snr}
\title{Calculate Signal-to-Noise Ratio}
\usage{
step_measure_qc_snr(
  recipe,
  measures = NULL,
  new_col = ".snr",
  signal_method = c("max", "range", "rms"),
  noise_method = c("diff", "mad", "residual"),
  role = "predictor",
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("measure_qc_snr")
)
}
\arguments{
\item{recipe}{A recipe object.}

\item{measures}{An optional character vector of measure column names.}

\item{new_col}{Name of the new column to store SNR values. Default is
\code{".snr"}.}

\item{signal_method}{How to estimate signal:
\itemize{
\item \code{"max"} (default): Maximum absolute value
\item \code{"range"}: Peak-to-peak range
\item \code{"rms"}: Root mean square
}}

\item{noise_method}{How to estimate noise:
\itemize{
\item \code{"diff"} (default): RMS of first differences (estimates high-freq noise)
\item \code{"mad"}: Median absolute deviation of values
\item \code{"residual"}: Residuals from smoothed fit
}}

\item{role}{Role for the new column. Default is \code{"predictor"}.}

\item{trained}{Logical indicating if the step has been trained.}

\item{skip}{Logical. Should the step be skipped when baking?}

\item{id}{Unique step identifier.}
}
\value{
An updated recipe with the new step added.
}
\description{
\code{step_measure_qc_snr()} creates a \emph{specification} of a recipe step that
calculates the signal-to-noise ratio (SNR) for each measurement and adds
it as a new column. This is useful for quality control and filtering.
}
\details{
SNR is calculated as \code{signal / noise}, where signal and noise are estimated
using the specified methods. Higher values indicate cleaner data.

The \code{"diff"} noise method is particularly useful because it estimates
high-frequency noise without being affected by broad spectral features:
\deqn{noise = \sqrt{\frac{1}{2(n-1)} \sum_{i=2}^{n} (x_i - x_{i-1})^2}}
}
\examples{
library(recipes)

rec <- recipe(water + fat + protein ~ ., data = meats_long) |>
  update_role(id, new_role = "id") |>
  step_measure_input_long(transmittance, location = vars(channel)) |>
  step_measure_qc_snr() |>
  prep()

bake(rec, new_data = NULL)
}
\seealso{
Other measure-qc: 
\code{\link{step_measure_impute}()},
\code{\link{step_measure_qc_outlier}()},
\code{\link{step_measure_qc_saturated}()}
}
\concept{measure-qc}
