[{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement codeofconduct@rstudio.com. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to anylr","title":"Contributing to anylr","text":"outlines propose change anylr. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to anylr","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to anylr","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://jameshwade.github.io/measure/dev/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to anylr","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"JamesHWade/anylr\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to anylr","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://jameshwade.github.io/measure/dev/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to anylr","text":"Please note anylr project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://jameshwade.github.io/measure/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 James Wade Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://jameshwade.github.io/measure/dev/SUPPORT.html","id":null,"dir":"","previous_headings":"","what":"Getting help with anylr","title":"Getting help with anylr","text":"Thanks using anylr! filing issue, places explore pieces put together make process smooth possible.","code":""},{"path":"https://jameshwade.github.io/measure/dev/SUPPORT.html","id":"make-a-reprex","dir":"","previous_headings":"","what":"Make a reprex","title":"Getting help with anylr","text":"Start making minimal reproducible example using reprex package. haven’t heard used reprex , ’re treat! Seriously, reprex make R-question-asking endeavors easier (pretty insane ROI five ten minutes ’ll take learn ’s ). additional reprex pointers, check Get help! section tidyverse site.","code":""},{"path":"https://jameshwade.github.io/measure/dev/SUPPORT.html","id":"where-to-ask","dir":"","previous_headings":"","what":"Where to ask?","title":"Getting help with anylr","text":"Armed reprex, next step figure ask. ’s question: start community.rstudio.com, /StackOverflow. people answer questions. ’s bug: ’re right place, file issue. ’re sure: let community help figure ! problem bug feature request, can easily return report . opening new issue, sure search issues pull requests make sure bug hasn’t reported /already fixed development version. default, search pre-populated :issue :open. can edit qualifiers (e.g. :pr, :closed) needed. example, ’d simply remove :open search issues repo, open closed.","code":""},{"path":"https://jameshwade.github.io/measure/dev/SUPPORT.html","id":"what-happens-next","dir":"","previous_headings":"","what":"What happens next?","title":"Getting help with anylr","text":"efficient possible, development tidyverse packages tends bursty, shouldn’t worry don’t get immediate response. Typically don’t look repo sufficient quantity issues accumulates, ’s burst intense activity focus efforts. makes development efficient avoids expensive context switching problems, cost taking longer get back . process makes good reprex particularly important might multiple months initial report start working . can’t reproduce bug, can’t fix !","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Baseline Correction","text":"Baseline correction fundamental preprocessing step spectroscopic chromatographic data. Baselines can drift due instrument effects, sample scattering, fluorescence, detector response, obscuring chemical information measurements. measure package provides several baseline correction methods recipe steps, plus ability use custom R functions Python’s pybaselines library.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"the-problem-baseline-drift","dir":"Articles","previous_headings":"","what":"The problem: Baseline drift","title":"Baseline Correction","text":"Let’s visualize baseline issues NIR spectra:  Notice vertical offset spectra? baseline shift isn’t related chemical composition want model.","code":"data(meats)  # Convert to long format for visualization meats_viz <- meats |>   mutate(id = row_number()) |>   pivot_longer(     cols = starts_with(\"x_\"),     names_to = \"channel\",     values_to = \"transmittance\"   ) |>   mutate(channel = as.integer(gsub(\"x_\", \"\", channel)))  # Plot raw spectra meats_viz |>   filter(id <= 20) |>   ggplot(aes(x = channel, y = transmittance, group = id, color = factor(id))) +   geom_line(alpha = 0.7) +   labs(     x = \"Channel\",     y = \"Transmittance\",     title = \"Raw NIR Spectra with Baseline Variation\"   ) +   theme_minimal() +   theme(legend.position = \"none\")"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"asymmetric-least-squares-als","dir":"Articles","previous_headings":"Built-in baseline correction methods","what":"Asymmetric Least Squares (ALS)","title":"Baseline Correction","text":"step_measure_baseline_als() uses Asymmetric Least Squares algorithm, excellent spectra peaks predominantly one direction (e.g., absorption peaks going emission peaks going ).  Key parameters: lambda: Smoothness penalty (higher = smoother baseline). Try 10^4 10^9. p: Asymmetry parameter (0-1). Lower values fit signal. Try 0.001-0.1.","code":"rec_als <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_als(lambda = 1e6, p = 0.01)  processed_als <- bake(prep(rec_als), new_data = NULL)  # Visualize using unnest plot_als <- processed_als |>   slice(1:20) |>   mutate(id = row_number()) |>   unnest(.measures)  ggplot(plot_als, aes(x = location, y = value, group = id, color = factor(id))) +   geom_line(alpha = 0.7) +   labs(     x = \"Channel\",     y = \"Corrected Transmittance\",     title = \"ALS Baseline Correction\"   ) +   theme_minimal() +   theme(legend.position = \"none\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"polynomial-baseline","dir":"Articles","previous_headings":"Built-in baseline correction methods","what":"Polynomial baseline","title":"Baseline Correction","text":"step_measure_baseline_poly() fits polynomial spectrum subtracts . Simple fast, works well gentle baseline curvature.","code":"rec_poly <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_poly(degree = 2)  processed_poly <- bake(prep(rec_poly), new_data = NULL)  # Visualize using unnest plot_poly <- processed_poly |>   slice(1:20) |>   mutate(id = row_number()) |>   unnest(.measures)  ggplot(plot_poly, aes(x = location, y = value, group = id, color = factor(id))) +   geom_line(alpha = 0.7) +   labs(     x = \"Channel\",     y = \"Corrected Transmittance\",     title = \"Polynomial Baseline Correction (degree = 2)\"   ) +   theme_minimal() +   theme(legend.position = \"none\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"robust-fitting-baseline","dir":"Articles","previous_headings":"Built-in baseline correction methods","what":"Robust fitting baseline","title":"Baseline Correction","text":"step_measure_baseline_rf() uses robust local regression (LOESS iterative reweighting) estimate baseline. Good complex baseline shapes.","code":"rec_rf <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_rf(span = 0.5) |>   step_measure_output_wide(prefix = \"nir_\")  processed_rf <- bake(prep(rec_rf), new_data = NULL) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L)"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"detrending","dir":"Articles","previous_headings":"Built-in baseline correction methods","what":"Detrending","title":"Baseline Correction","text":"step_measure_detrend() removes polynomial trends spectra. simplest baseline correction - just removes overall trend.","code":"rec_detrend <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_detrend(degree = 1) |>   step_measure_output_wide(prefix = \"nir_\")  processed_detrend <- bake(prep(rec_detrend), new_data = NULL) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L)"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"gpcsec-baseline-correction","dir":"Articles","previous_headings":"Built-in baseline correction methods","what":"GPC/SEC baseline correction","title":"Baseline Correction","text":"step_measure_baseline_gpc() specialized chromatography data baseline regions exist start end chromatogram.","code":"# For chromatography data rec_gpc <- recipe(outcome ~ ., data = chromatogram_data) |>    step_measure_input_long(signal, location = vars(time)) |>   step_measure_baseline_gpc(left_frac = 0.05, right_frac = 0.05, method = \"linear\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"custom-baseline-functions","dir":"Articles","previous_headings":"","what":"Custom baseline functions","title":"Baseline Correction","text":"step_measure_baseline_custom() lets provide R function baseline estimation. function receives measure_tbl (tibble location value columns) return numeric vector baseline values.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"using-a-function","dir":"Articles","previous_headings":"Custom baseline functions","what":"Using a function","title":"Baseline Correction","text":"","code":"# Simple moving minimum baseline moving_min_baseline <- function(x, window = 51) {   y <- x$value   n <- length(y)   baseline <- numeric(n)   half_win <- window %/% 2     for (i in seq_len(n)) {     start <- max(1, i - half_win)     end <- min(n, i + half_win)     baseline[i] <- min(y[start:end], na.rm = TRUE)   }   baseline }  rec_custom <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_custom(.fn = moving_min_baseline, window = 101) |>   step_measure_output_wide(prefix = \"nir_\")  processed_custom <- bake(prep(rec_custom), new_data = NULL) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L)"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"using-a-formula","dir":"Articles","previous_headings":"Custom baseline functions","what":"Using a formula","title":"Baseline Correction","text":"quick one-liners, use formula interface .x measure_tbl:","code":"# LOESS baseline using formula rec_loess <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_custom(     .fn = ~ stats::loess(.x$value ~ .x$location, span = span)$fitted,     span = 0.3   ) |>   step_measure_output_wide(prefix = \"nir_\")  processed_loess <- bake(prep(rec_loess), new_data = NULL) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L)"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"extracting-the-baseline","dir":"Articles","previous_headings":"Custom baseline functions","what":"Extracting the baseline","title":"Baseline Correction","text":"step_measure_baseline_custom() step_measure_baseline_py(), set subtract = FALSE get baseline instead corrected signal:","code":"# Use custom baseline with subtract = FALSE to extract the baseline rec_extract <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_custom(     .fn = ~ stats::loess(.x$value ~ .x$location, span = 0.5)$fitted,     subtract = FALSE   )  baselines <- bake(prep(rec_extract), new_data = NULL)  # The .measures column now contains the estimated baselines baselines |>   slice(1) |>   unnest(.measures) |>   head() #> # A tibble: 6 × 5 #>   water   fat protein location value #>   <dbl> <dbl>   <dbl>    <dbl> <dbl> #> 1  60.5  22.5    16.7        1  2.62 #> 2  60.5  22.5    16.7        2  2.62 #> 3  60.5  22.5    16.7        3  2.62 #> 4  60.5  22.5    16.7        4  2.62 #> 5  60.5  22.5    16.7        5  2.62 #> 6  60.5  22.5    16.7        6  2.62"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"python-pybaselines-integration","dir":"Articles","previous_headings":"","what":"Python pybaselines integration","title":"Baseline Correction","text":"step_measure_baseline_py() provides access 50 baseline correction algorithms Python pybaselines library.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"setup","dir":"Articles","previous_headings":"Python pybaselines integration","what":"Setup","title":"Baseline Correction","text":"First, install pybaselines:","code":"# Install reticulate if needed install.packages(\"reticulate\")  # Install pybaselines reticulate::py_require(\"pybaselines\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"using-pybaselines-methods","dir":"Articles","previous_headings":"Python pybaselines integration","what":"Using pybaselines methods","title":"Baseline Correction","text":"","code":"# Asymmetric Least Squares rec_py_asls <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_py(method = \"asls\", lam = 1e6, p = 0.01) |>   step_measure_output_wide(prefix = \"nir_\")  # SNIP algorithm (good for spectroscopy) rec_py_snip <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_py(method = \"snip\", max_half_window = 40) |>   step_measure_output_wide(prefix = \"nir_\")  # Modified polynomial rec_py_modpoly <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_py(method = \"modpoly\", poly_order = 3) |>   step_measure_output_wide(prefix = \"nir_\")  # Morphological (rolling ball) rec_py_mor <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_py(method = \"rolling_ball\", half_window = 30) |>   step_measure_output_wide(prefix = \"nir_\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"available-pybaselines-methods","dir":"Articles","previous_headings":"Python pybaselines integration","what":"Available pybaselines methods","title":"Baseline Correction","text":"See pybaselines documentation full list parameter details.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"using-derivatives-for-baseline-correction","dir":"Articles","previous_headings":"","what":"Using derivatives for baseline correction","title":"Baseline Correction","text":"Savitzky-Golay derivatives remain powerful approach baseline correction, especially NIR spectroscopy:","code":"# First derivative removes constant baseline rec_d1 <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 1) |>   step_measure_output_wide(prefix = \"nir_\")  # Second derivative removes linear baseline rec_d2 <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 2) |>   step_measure_output_wide(prefix = \"nir_\")"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"hyperparameter-tuning","dir":"Articles","previous_headings":"","what":"Hyperparameter tuning","title":"Baseline Correction","text":"baseline correction steps tunable tidymodels tuning framework: step_measure_baseline_custom(), can declare tunable parameters explicitly:","code":"library(tune)  # Create tunable recipe rec_tunable <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_als(     lambda = tune(),  # Will be tuned     p = tune()        # Will be tuned   ) |>   step_measure_output_wide(prefix = \"nir_\")  # The tunable parameters are automatically detected tunable(rec_tunable) rec_custom_tunable <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_baseline_custom(     .fn = ~ stats::loess(.x$value ~ .x$location, span = span)$fitted,     span = 0.5,     tunable = list(       span = list(pkg = \"dials\", fun = \"degree\", range = c(0.1, 0.9))     )   )"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"complete-preprocessing-pipeline","dir":"Articles","previous_headings":"","what":"Complete preprocessing pipeline","title":"Baseline Correction","text":"Baseline correction often works best part complete preprocessing pipeline:","code":"rec_complete <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   # Baseline correction   step_measure_baseline_als(lambda = 1e6, p = 0.01) |>   # Scatter correction   step_measure_snv() |>   # Smoothing with mild derivative   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   # Output for modeling   step_measure_output_wide(prefix = \"nir_\")  final_data <- bake(prep(rec_complete), new_data = NULL) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L) final_data[1:5, 1:8] #> # A tibble: 5 × 8 #>   water   fat protein nir_01    nir_02    nir_03    nir_04    nir_05    #>   <dbl> <dbl>   <dbl> <list>    <list>    <list>    <list>    <list>    #> 1  60.5  22.5    16.7 <dbl [1]> <dbl [1]> <dbl [1]> <dbl [1]> <dbl [1]> #> 2  46    40.1    13.5 <dbl [1]> <dbl [1]> <dbl [1]> <dbl [1]> <dbl [1]> #> 3  71     8.4    20.5 <dbl [1]> <dbl [1]> <dbl [1]> <dbl [1]> <dbl [1]> #> 4  72.8   5.9    20.7 <dbl [2]> <dbl [2]> <dbl [2]> <dbl [2]> <dbl [2]> #> 5  58.3  25.5    15.5 <dbl [2]> <dbl [2]> <dbl [2]> <dbl [2]> <dbl [2]>"},{"path":"https://jameshwade.github.io/measure/dev/articles/baseline.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Baseline Correction","text":"ALS (step_measure_baseline_als()) good default spectroscopy applications Polynomial (step_measure_baseline_poly()) works well simple baseline shapes Derivatives via step_measure_savitzky_golay() effective NIR/IR peak shapes aren’t critical Custom functions (step_measure_baseline_custom()) provide maximum flexibility pybaselines (step_measure_baseline_py()) offers 50+ advanced algorithms R options aren’t sufficient Combine baseline correction normalization (SNV/MSC) best results","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Internal Class System","text":"vignette describes measure’s internal class system. users won’t need interact internals directly, understanding useful ’re: Debugging unexpected behavior Contributing measure Building extensions work measure data","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"motivation","dir":"Articles","previous_headings":"","what":"Motivation","title":"Internal Class System","text":"Early versions measure relied column named .measures store spectral data. worked limitations: Name clashes users .measures column way multiple measure columns Detection relied column names, types Following Issue #16, measure now uses custom S3 classes. enables robust detection via inherits() supports multiple measure columns per dataset (see Multiple Measure Columns ).","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"the-two-classes","dir":"Articles","previous_headings":"","what":"The two classes","title":"Internal Class System","text":"measure uses two-level class hierarchy:","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"measure_tbl","dir":"Articles","previous_headings":"The two classes","what":"measure_tbl","title":"Internal Class System","text":"single measurement - tibble location value columns:","code":"# After preprocessing, each row's .measures element is a measure_tbl rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  result <- bake(rec, new_data = NULL)  # Extract one measurement one_measurement <- result$.measures[[1]] one_measurement #> <measure_tbl [100 x 2]> #> # A tibble: 100 × 2 #>    location value #>       <int> <dbl> #>  1        1  2.62 #>  2        2  2.62 #>  3        3  2.62 #>  4        4  2.62 #>  5        5  2.62 #>  6        6  2.62 #>  7        7  2.62 #>  8        8  2.62 #>  9        9  2.63 #> 10       10  2.63 #> # ℹ 90 more rows  # Check the class class(one_measurement) #> [1] \"measure_tbl\" \"tbl_df\"      \"tbl\"         \"data.frame\" is_measure_tbl(one_measurement) #> [1] TRUE"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"measure_list","dir":"Articles","previous_headings":"The two classes","what":"measure_list","title":"Internal Class System","text":"list column containing multiple measure_tbl objects - one per row data:","code":"# The .measures column itself is a measure_list class(result$.measures) #> [1] \"measure_list\"  \"vctrs_list_of\" \"vctrs_vctr\"    \"list\" is_measure_list(result$.measures) #> [1] TRUE  # Nice printing in tibbles result #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"detecting-measure-columns","dir":"Articles","previous_headings":"","what":"Detecting measure columns","title":"Internal Class System","text":"measure provides helper functions find validate measure columns:","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"is_measure_list-and-is_measure_tbl","dir":"Articles","previous_headings":"Detecting measure columns","what":"is_measure_list() and is_measure_tbl()","title":"Internal Class System","text":"Test object appropriate class:","code":"is_measure_list(result$.measures) #> [1] TRUE is_measure_tbl(result$.measures[[1]]) #> [1] TRUE  # Regular lists and tibbles return FALSE is_measure_list(list()) #> [1] FALSE is_measure_tbl(tibble::tibble(location = 1:5, value = rnorm(5))) #> [1] FALSE"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"find_measure_cols","dir":"Articles","previous_headings":"Detecting measure columns","what":"find_measure_cols()","title":"Internal Class System","text":"Find measure columns data frame:","code":"find_measure_cols(result) #> [1] \".measures\""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"has_measure_col","dir":"Articles","previous_headings":"Detecting measure columns","what":"has_measure_col()","title":"Internal Class System","text":"Check data frame least one measure column, erroring : used internally processing steps validate input.","code":"has_measure_col(result)"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"why-this-matters","dir":"Articles","previous_headings":"","what":"Why this matters","title":"Internal Class System","text":"class-based approach provides several benefits: Robust detection: Steps use inherits(x, \"measure_list\") instead checking column names Nice printing: Tibbles show <meas [100]> instead raw list output Multiple columns: can multiple measure columns per dataset (e.g., UV MS spectra) Validation: classes enforce measurements expected structure","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"for-package-developers","dir":"Articles","previous_headings":"","what":"For package developers","title":"Internal Class System","text":"’re writing functions work measure data: helper functions measure_to_matrix() matrix_to_measure() R/helpers.R convert measure lists matrices bulk operations.","code":"my_function <- function(data) {   # Validate input has measure columns   has_measure_col(data)    # Find measure columns   meas_cols <- find_measure_cols(data)    # Work with the measure_list   for (col in meas_cols) {     measurements <- data[[col]]     # Each element is a measure_tbl with $location and $value   } }"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"working-with-measure-data-interactively","dir":"Articles","previous_headings":"","what":"Working with Measure Data Interactively","title":"Internal Class System","text":"recipe steps primary interface production pipelines, measure provides utility functions interactive exploration debugging.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"measure_map-prototyping-transformations","dir":"Articles","previous_headings":"Working with Measure Data Interactively","what":"measure_map(): Prototyping transformations","title":"Internal Class System","text":"developing custom transformation, use measure_map() test interactively: Important: measure_map() exploration . transformation works, move step_measure_map() reproducible pipelines:","code":"# Apply a transformation to each sample's measurements centered <- measure_map(result, ~ {   .x$value <- .x$value - mean(.x$value)   .x })  # Check the result mean(centered$.measures[[1]]$value)  # Should be ~0 #> [1] -1.599431e-16 # For production use rec <- recipe(...) |>   step_measure_input_long(...) |>   step_measure_map(~ { .x$value <- .x$value - mean(.x$value); .x })"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"measure_map_safely-fault-tolerant-exploration","dir":"Articles","previous_headings":"Working with Measure Data Interactively","what":"measure_map_safely(): Fault-tolerant exploration","title":"Internal Class System","text":"exploring data might problematic samples, use safer variant:","code":"result <- measure_map_safely(data, risky_function)  # Check which samples failed result$errors  # result$result contains data with successful transforms # (failed samples keep original values)"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"measure_summarize-understanding-your-data","dir":"Articles","previous_headings":"Working with Measure Data Interactively","what":"measure_summarize(): Understanding your data","title":"Internal Class System","text":"Compute summary statistics across samples measurement location: useful : Computing reference spectra (e.g., MSC-style corrections) Identifying high-variability regions Quality control outlier detection","code":"# Default: mean and SD at each location stats <- measure_summarize(result) head(stats) #> # A tibble: 6 × 3 #>   location  mean    sd #>      <int> <dbl> <dbl> #> 1        1  2.81 0.411 #> 2        2  2.81 0.413 #> 3        3  2.81 0.416 #> 4        4  2.82 0.418 #> 5        5  2.82 0.421 #> 6        6  2.82 0.424"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"multiple-measure-columns","dir":"Articles","previous_headings":"","what":"Multiple Measure Columns","title":"Internal Class System","text":"measure supports multiple measure columns single dataset. useful different types measurements (e.g., UV MS spectra) need separate processing.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"creating-multiple-measure-columns","dir":"Articles","previous_headings":"Multiple Measure Columns","what":"Creating multiple measure columns","title":"Internal Class System","text":"Use col_name parameter input steps:","code":"rec <- recipe(outcome ~ ., data = my_data) |>   step_measure_input_wide(     starts_with(\"uv_\"),     col_name = \".uv_spectrum\"   ) |>   step_measure_input_wide(     starts_with(\"ms_\"),     col_name = \".ms_spectrum\"   )"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"processing-steps","dir":"Articles","previous_headings":"Multiple Measure Columns","what":"Processing steps","title":"Internal Class System","text":"default, processing steps operate measure columns: process specific columns, use measures parameter:","code":"rec <- rec |>   step_measure_snv()  # Applies to both .uv_spectrum and .ms_spectrum rec <- rec |>   step_measure_snv(measures = \".uv_spectrum\")  # Only UV"},{"path":"https://jameshwade.github.io/measure/dev/articles/internals.html","id":"output-steps","dir":"Articles","previous_headings":"Multiple Measure Columns","what":"Output steps","title":"Internal Class System","text":"multiple measure columns exist, output steps require specify column output: don’t specify multiple columns exist, ’ll get helpful error message telling columns available.","code":"rec <- rec |>   step_measure_output_wide(measures = \".uv_spectrum\", prefix = \"uv_\") |>   step_measure_output_wide(measures = \".ms_spectrum\", prefix = \"ms_\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started with measure","text":"measure package extends tidymodels preprocessing steps designed specifically analytical measurement data. work spectroscopy, chromatography, instrument-generated signals, measure provides familiar recipes-style preprocessing integrates seamlessly tidymodels ecosystem.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"why-measure","dir":"Articles","previous_headings":"Introduction","what":"Why measure?","title":"Getting Started with measure","text":"Analytical data unique preprocessing requirements: Multi-dimensional signals: sample produces many measurements (e.g., absorbance hundreds wavelengths) Specialized transformations: Techniques like Savitzky-Golay derivatives scatter correction standard practice Format flexibility: Data may arrive wide format (one column per wavelength) long format (one row per measurement) measure handles keeping intuitive recipes interface already know. ## measure workflow typical measure workflow three phases: Input step: Convert data measure’s internal format Processing steps: Apply spectral preprocessing (smoothing, derivatives, normalization) Output step: Convert back format suitable modeling Let’s see action real data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"example-nir-spectroscopy-of-meat-samples","dir":"Articles","previous_headings":"","what":"Example: NIR spectroscopy of meat samples","title":"Getting Started with measure","text":"’ll use meats_long dataset included measure. contains NIR (Near-Infrared) transmittance spectra meat samples, goal predicting water, fat, protein content. data “long” format row represents one measurement one channel one sample. Let’s visualize spectra:","code":"data(meats_long)  # Each sample has 100 spectral channels meats_long #> # A tibble: 21,500 × 6 #>       id water   fat protein channel transmittance #>    <int> <dbl> <dbl>   <dbl>   <int>         <dbl> #>  1     1  60.5  22.5    16.7       1          2.62 #>  2     1  60.5  22.5    16.7       2          2.62 #>  3     1  60.5  22.5    16.7       3          2.62 #>  4     1  60.5  22.5    16.7       4          2.62 #>  5     1  60.5  22.5    16.7       5          2.62 #>  6     1  60.5  22.5    16.7       6          2.62 #>  7     1  60.5  22.5    16.7       7          2.62 #>  8     1  60.5  22.5    16.7       8          2.62 #>  9     1  60.5  22.5    16.7       9          2.63 #> 10     1  60.5  22.5    16.7      10          2.63 #> # ℹ 21,490 more rows meats_long |>   filter(id <= 10) |>   ggplot(aes(x = channel, y = transmittance, group = id, color = factor(id))) +   geom_line(alpha = 0.8) +   labs(     x = \"Channel\",     y = \"Transmittance\",     title = \"Raw NIR Spectra\",     color = \"Sample ID\"   ) +   theme_minimal()"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"creating-a-recipe","dir":"Articles","previous_headings":"Example: NIR spectroscopy of meat samples","what":"Creating a recipe","title":"Getting Started with measure","text":"start creating recipe specifies outcome variables predictors:","code":"rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   # Mark 'id' as an identifier, not a predictor   update_role(id, new_role = \"id\")  rec #>  #> ── Recipe ────────────────────────────────────────────────────────────────────── #>  #> ── Inputs #> Number of variables by role #> outcome:   3 #> predictor: 2 #> id:        1"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"step-1-input-the-measurements","dir":"Articles","previous_headings":"Example: NIR spectroscopy of meat samples","what":"Step 1: Input the measurements","title":"Getting Started with measure","text":"Since data long format, use step_measure_input_long(). converts transmittance values (indexed channel) measure’s internal format: prepping baking, ’ll see original transmittance channel columns replaced .measures column containing nested tibbles:","code":"rec <- rec |>   step_measure_input_long(transmittance, location = vars(channel))  rec #>  #> ── Recipe ────────────────────────────────────────────────────────────────────── #>  #> ── Inputs #> Number of variables by role #> outcome:   3 #> predictor: 2 #> id:        1 #>  #> ── Operations #> • Collate long analytical measurements: transmittance rec_prepped <- prep(rec) internal_format <- bake(rec_prepped, new_data = NULL)  # The data now has a .measures list-column internal_format #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows  # Each element contains location and value internal_format$.measures[[1]] #> <measure_tbl [100 x 2]> #> # A tibble: 100 × 2 #>    location value #>       <int> <dbl> #>  1        1  2.62 #>  2        2  2.62 #>  3        3  2.62 #>  4        4  2.62 #>  5        5  2.62 #>  6        6  2.62 #>  7        7  2.62 #>  8        8  2.62 #>  9        9  2.63 #> 10       10  2.63 #> # ℹ 90 more rows"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"step-2-apply-preprocessing","dir":"Articles","previous_headings":"Example: NIR spectroscopy of meat samples","what":"Step 2: Apply preprocessing","title":"Getting Started with measure","text":"Now can add spectral preprocessing steps. operate internal .measures column: measure provides many built-preprocessing steps: Filtering: step_measure_savitzky_golay() smoothing derivatives Scatter correction: step_measure_snv(), step_measure_msc() Sample-wise normalization: step_measure_normalize_sum(), step_measure_normalize_max(), step_measure_normalize_peak(), Variable-wise scaling: step_measure_center(), step_measure_scale_auto(), step_measure_scale_pareto(), Custom transformations: step_measure_map() built-steps don’t cover needs See vignette(\"preprocessing\") details available options. Let’s see transforms spectra:","code":"rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>    # Savitzky-Golay first derivative for baseline removal   step_measure_savitzky_golay(     window_side = 5,     differentiation_order = 1   ) |>   # Standard Normal Variate for scatter correction   step_measure_snv()  rec #>  #> ── Recipe ────────────────────────────────────────────────────────────────────── #>  #> ── Inputs #> Number of variables by role #> outcome:   3 #> predictor: 2 #> id:        1 #>  #> ── Operations #> • Collate long analytical measurements: transmittance #> Savitzky-Golay preprocessing on  #> SNV transformation on processed <- bake(prep(rec), new_data = NULL)  # Unnest for plotting plot_data <- processed |>   filter(row_number() <= 10) |>   mutate(sample_id = row_number()) |>   unnest(.measures)  ggplot(plot_data, aes(x = location, y = value, group = sample_id, color = factor(sample_id))) +   geom_line(alpha = 0.8) +   labs(     x = \"Channel\",     y = \"Preprocessed Signal\",     title = \"After Savitzky-Golay + SNV\",     subtitle = \"First derivative removes baseline; SNV normalizes scatter\",     color = \"Sample\"   ) +   theme_minimal()"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"step-3-output-for-modeling","dir":"Articles","previous_headings":"Example: NIR spectroscopy of meat samples","what":"Step 3: Output for modeling","title":"Getting Started with measure","text":"modeling workflows, ’ll want data wide format (one column per spectral feature):","code":"rec_full <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv() |>   step_measure_output_wide(prefix = \"nir_\")  modeling_data <- bake(prep(rec_full), new_data = NULL)  # Ready for modeling! modeling_data[1:5, 1:10] #> # A tibble: 5 × 10 #>      id water   fat protein  nir_01  nir_02  nir_03  nir_04  nir_05  nir_06 #>   <int> <dbl> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> #> 1     1  60.5  22.5    16.7 -0.126  -0.110  -0.0928 -0.0745 -0.0553 -0.0346 #> 2     2  46    40.1    13.5  0.0184  0.0381  0.0601  0.0841  0.110   0.137  #> 3     3  71     8.4    20.5  0.105   0.114   0.125   0.136   0.148   0.159  #> 4     4  72.8   5.9    20.7  0.0716  0.0786  0.0871  0.0974  0.108   0.119  #> 5     5  58.3  25.5    15.5 -0.132  -0.118  -0.101  -0.0817 -0.0608 -0.0385"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"working-with-wide-format-data","dir":"Articles","previous_headings":"","what":"Working with wide-format data","title":"Getting Started with measure","text":"data starts wide format (measurements columns), use step_measure_input_wide() instead. ’s example using data modeldata:","code":"library(modeldata) data(meats)  # This data has x_001, x_002, ... columns for spectral channels head(meats[, 1:8]) #> # A tibble: 6 × 8 #>   x_001 x_002 x_003 x_004 x_005 x_006 x_007 x_008 #>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1  2.62  2.62  2.62  2.62  2.62  2.62  2.62  2.62 #> 2  2.83  2.84  2.84  2.85  2.85  2.86  2.86  2.87 #> 3  2.58  2.58  2.59  2.59  2.59  2.59  2.59  2.60 #> 4  2.82  2.82  2.83  2.83  2.83  2.83  2.83  2.84 #> 5  2.79  2.79  2.79  2.79  2.80  2.80  2.80  2.80 #> 6  3.01  3.02  3.02  3.03  3.03  3.04  3.04  3.05  # Create location values (optional - defaults to 1, 2, 3, ...) wavelengths <- seq(850, 1050, length.out = 100)  rec_wide <- recipe(water + fat + protein ~ ., data = meats) |>   step_measure_input_wide(     starts_with(\"x_\"),     location_values = wavelengths   ) |>   step_measure_snv() |>   step_measure_output_wide(prefix = \"spec_\")  bake(prep(rec_wide), new_data = NULL)[1:5, 1:8] #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L) #> # A tibble: 5 × 8 #>   water   fat protein spec_0850.0000 spec_0852.0202 spec_0854.0404 #>   <dbl> <dbl>   <dbl> <list>         <list>         <list>         #> 1  60.5  22.5    16.7 <dbl [1]>      <dbl [1]>      <dbl [1]>      #> 2  46    40.1    13.5 <dbl [1]>      <dbl [1]>      <dbl [1]>      #> 3  71     8.4    20.5 <dbl [1]>      <dbl [1]>      <dbl [1]>      #> 4  72.8   5.9    20.7 <dbl [2]>      <dbl [2]>      <dbl [2]>      #> 5  58.3  25.5    15.5 <dbl [2]>      <dbl [2]>      <dbl [2]>      #> # ℹ 2 more variables: spec_0856.0606 <list>, spec_0858.0808 <list>"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"applying-recipes-to-new-data","dir":"Articles","previous_headings":"","what":"Applying recipes to new data","title":"Getting Started with measure","text":"Like recipe, prep training data, bake new data:","code":"# Split the data set.seed(123) train_idx <- sample(nrow(meats), 180) train_data <- meats[train_idx, ] test_data <- meats[-train_idx, ]  # Prep on training data rec <- recipe(water + fat + protein ~ ., data = train_data) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 1) |>   step_measure_snv() |>   step_measure_output_wide(prefix = \"nir_\")  rec_prepped <- prep(rec, training = train_data) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L)  # Bake on both train_processed <- bake(rec_prepped, new_data = NULL) test_processed <- bake(rec_prepped, new_data = test_data) #> Warning: Values from `value` are not uniquely identified; output will contain list-cols. #> • Use `values_fn = list` to suppress this warning. #> • Use `values_fn = {summary_fun}` to summarise duplicates. #> • Use the following dplyr code to identify duplicates. #>   {data} |> #>   dplyr::summarise(n = dplyr::n(), .by = c(water, fat, protein, location)) |> #>   dplyr::filter(n > 1L)  cat(\"Training samples:\", nrow(train_processed), \"\\n\") #> Training samples: 153 cat(\"Test samples:\", nrow(test_processed), \"\\n\") #> Test samples: 32"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"integration-with-tidymodels","dir":"Articles","previous_headings":"","what":"Integration with tidymodels","title":"Getting Started with measure","text":"measure recipes work seamlessly broader tidymodels ecosystem. See vignette(\"recipes\") complete examples including: Bundling preprocessing models using workflows Cross-validation measure recipes Hyperparameter tuning preprocessing steps Comparing preprocessing strategies","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"included-datasets","dir":"Articles","previous_headings":"Finding test data","what":"Included datasets","title":"Getting Started with measure","text":"measure package includes several datasets testing examples:","code":"# NIR spectroscopy data(meats_long)           # 215 meat samples, long format  # Raman spectroscopy data(glucose_bioreactors)  # Loads bioreactors_small (210) and bioreactors_large (42)  # Chromatography data(hplc_chromatograms)   # 20 simulated HPLC samples data(sec_chromatograms)    # 10 SEC samples (5 standards + 5 polymers) data(sec_calibration)      # MW calibration standards  # Mass spectrometry data(maldi_spectra)        # 16 simulated MALDI-TOF spectra"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"external-data-sources","dir":"Articles","previous_headings":"Finding test data","what":"External data sources","title":"Getting Started with measure","text":"additional test data, several R packages provide spectral datasets: Online repositories public analytical data: Mendeley Data - Search spectroscopy/chromatography datasets Zenodo - Open science data repository NIST Chemistry WebBook - Reference IR, MS, UV-Vis spectra MassBank - Mass spectrometry database HMDB - Human Metabolome Database (NMR, MS)","code":"# modeldata - meats dataset in wide format library(modeldata) data(meats)  # prospectr - NIR soil spectroscopy (825 samples) data(NIRsoil, package = \"prospectr\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/measure.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next steps","title":"Getting Started with measure","text":"Savitzky-Golay smoothing derivatives SNV MSC scatter correction Sample-wise normalization (sum, max, range, peak region) Variable-wise scaling (centering, auto-scaling, Pareto scaling) Explore hyperparameter tuning tune - Savitzky-Golay peak normalization steps tunable! Check function reference available steps","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Preprocessing Techniques","text":"Spectral preprocessing essential building accurate chemometric models. Raw spectra often contain unwanted variation physical effects (scatter, baseline drift) obscure chemical information ’re trying model. vignette covers preprocessing technique available measure use .","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"why-preprocess-spectra","dir":"Articles","previous_headings":"","what":"Why preprocess spectra?","title":"Preprocessing Techniques","text":"diving specific techniques, let’s understand ’re dealing . raw NIR spectra meats dataset:  Notice spectra shifted vertically relative ? offset isn’t due chemical differences - ’s caused physical factors like particle size, path length, light scatter. preprocessing goal remove unwanted effects preserving chemical information.","code":"rec_raw <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths)  raw_data <- get_internal(rec_raw)  plot_spectra(raw_data, \"Raw NIR Spectra\", \"Note the vertical offset differences between samples\")"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"what-it-does","dir":"Articles","previous_headings":"Savitzky-Golay Filtering","what":"What it does","title":"Preprocessing Techniques","text":"Savitzky-Golay filter performs polynomial smoothing can compute derivatives. fits polynomial sliding window points, using polynomial’s value (derivative) center point output.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"when-to-use-it","dir":"Articles","previous_headings":"Savitzky-Golay Filtering","what":"When to use it","title":"Preprocessing Techniques","text":"Smoothing (order = 0): Reduce random noise preserving peak shapes First derivative (order = 1): Remove constant baseline offsets, enhance peak differences Second derivative (order = 2): Remove linear baseline trends, enhance peak resolution","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"parameters","dir":"Articles","previous_headings":"Savitzky-Golay Filtering","what":"Parameters","title":"Preprocessing Techniques","text":"window_side: Number points side center point (total window = 2 * window_side + 1) differentiation_order: 0 smoothing, 1 first derivative, 2 second derivative degree: Polynomial degree (defaults differentiation_order + 1)","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"examples","dir":"Articles","previous_headings":"Savitzky-Golay Filtering","what":"Examples","title":"Preprocessing Techniques","text":"","code":"# Just smoothing rec_smooth <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 0)  # First derivative rec_d1 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1)  # Second derivative rec_d2 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 2) library(patchwork)  p1 <- plot_spectra(raw_data, \"Raw\") p2 <- plot_spectra(get_internal(rec_smooth), \"Smoothed (window = 15)\") p3 <- plot_spectra(get_internal(rec_d1), \"1st Derivative\", \"Baseline offset removed\") p4 <- plot_spectra(get_internal(rec_d2), \"2nd Derivative\", \"Linear baseline removed\")  (p1 + p2) / (p3 + p4)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"choosing-window-size","dir":"Articles","previous_headings":"Savitzky-Golay Filtering","what":"Choosing window size","title":"Preprocessing Techniques","text":"window size bias-variance trade-: - Smaller window: Less smoothing, preserves sharp features, noise - Larger window: smoothing, may blur sharp peaks, less noise good starting point window spans narrowest feature want preserve.","code":"windows <- c(3, 7, 15)  window_data <- lapply(windows, function(w) {   rec <- recipe(water ~ ., data = meats) |>     step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>     step_measure_savitzky_golay(window_side = w, differentiation_order = 1)    get_internal(rec) |>     filter(sample_id == 1) |>     mutate(window = paste0(\"window_side = \", w)) }) |>   bind_rows()  ggplot(window_data, aes(x = location, y = value, color = window)) +   geom_line() +   labs(     x = \"Wavelength\",     y = \"Signal\",     title = \"Effect of Window Size on First Derivative\",     color = NULL   ) +   theme_minimal()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"tuning-with-dials","dir":"Articles","previous_headings":"Savitzky-Golay Filtering","what":"Tuning with dials","title":"Preprocessing Techniques","text":"Savitzky-Golay step tunable! means can use tune() find optimal parameters:","code":"library(tune) library(workflows)  rec_tunable <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(     window_side = tune(),     differentiation_order = tune()   ) |>   step_measure_output_wide()  # The tunable parameters are: tunable(rec_tunable)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"spectral-math-transformations","dir":"Articles","previous_headings":"","what":"Spectral Math Transformations","title":"Preprocessing Techniques","text":"measure package includes mathematical transformations commonly used spectroscopy chemometrics.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"absorbance-and-transmittance","dir":"Articles","previous_headings":"Spectral Math Transformations","what":"Absorbance and Transmittance","title":"Preprocessing Techniques","text":"Convert transmittance absorbance using Beer-Lambert relationship: Absorbance: =−log10(T)= -\\log_{10}(T) Transmittance: T=10−= 10^{-}  transformations inverses - round-trip preserves values:","code":"# Convert transmittance to absorbance rec_abs <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_absorbance()  plot_spectra(get_internal(rec_abs), \"Absorbance\", \"Converted from transmittance\") rec_roundtrip <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_absorbance() |>   step_measure_transmittance()  # Back to original"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"log-transformation","dir":"Articles","previous_headings":"Spectral Math Transformations","what":"Log Transformation","title":"Preprocessing Techniques","text":"Apply logarithmic transformation configurable base offset:","code":"# Natural log (base e) rec_log <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_log()  # Log base 10 with offset for handling zeros rec_log10 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_log(base = 10, offset = 1)  plot_spectra(get_internal(rec_log), \"Natural Log Transform\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"kubelka-munk-transformation","dir":"Articles","previous_headings":"Spectral Math Transformations","what":"Kubelka-Munk Transformation","title":"Preprocessing Techniques","text":"diffuse reflectance data, Kubelka-Munk transformation converts reflectance quantity proportional concentration: f(R)=(1−R)22Rf(R) = \\frac{(1-R)^2}{2R}","code":"# For reflectance data (values between 0 and 1) rec_km <- recipe(concentration ~ ., data = reflectance_data) |>   step_measure_input_wide(starts_with(\"r_\")) |>   step_measure_kubelka_munk()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"simple-finite-difference-derivatives","dir":"Articles","previous_headings":"Spectral Math Transformations","what":"Simple Finite Difference Derivatives","title":"Preprocessing Techniques","text":"quick derivatives without smoothing, use step_measure_derivative(): Note: Derivatives reduce spectrum length (first derivative: n-1 points, second derivative: n-2 points). order parameter tunable.","code":"# First derivative - removes constant baseline offsets rec_fd1 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_derivative(order = 1)  # Second derivative - removes linear baseline trends rec_fd2 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_derivative(order = 2)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"gap-norris-williams-derivatives","dir":"Articles","previous_headings":"Spectral Math Transformations","what":"Gap (Norris-Williams) Derivatives","title":"Preprocessing Techniques","text":"Gap derivatives compute differences points separated gap, commonly used NIR chemometrics:  gap segment parameters tunable dials.","code":"# Gap derivative with gap=5 rec_gap <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_derivative_gap(gap = 5)  # Norris-Williams with segment averaging for noise reduction rec_nw <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_derivative_gap(gap = 5, segment = 3)  plot_spectra(get_internal(rec_gap), \"Gap Derivative (gap=5)\")"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"region-operations","dir":"Articles","previous_headings":"","what":"Region Operations","title":"Preprocessing Techniques","text":"Region operations allow select, exclude, resample specific portions measurements. essential chromatographic workflows useful focusing analysis regions interest.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"trimming-to-a-range","dir":"Articles","previous_headings":"Region Operations","what":"Trimming to a range","title":"Preprocessing Techniques","text":"step_measure_trim() keeps measurements within specified x-axis range:  Common use cases: - Remove noisy regions measurement edges - Focus spectral region interest - Define integration windows chromatography","code":"# Keep only wavelengths 880-1020 rec_trim <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_trim(range = c(880, 1020))  trim_data <- get_internal(rec_trim) plot_spectra(trim_data, \"Trimmed to 880-1020 nm\",              \"Removed noisy edge regions\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"excluding-ranges","dir":"Articles","previous_headings":"Region Operations","what":"Excluding ranges","title":"Preprocessing Techniques","text":"step_measure_exclude() removes measurements within one specified ranges:  Common use cases: - Remove solvent peaks chromatography - Exclude detector saturation regions - Remove known interference regions","code":"# Exclude water absorption bands rec_exclude <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_exclude(ranges = list(c(920, 940), c(980, 1000)))  exclude_data <- get_internal(rec_exclude) plot_spectra(exclude_data, \"Excluded Regions\",              \"Removed wavelength ranges 920-940 and 980-1000\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"resampling-to-a-new-grid","dir":"Articles","previous_headings":"Region Operations","what":"Resampling to a new grid","title":"Preprocessing Techniques","text":"step_measure_resample() interpolates measurements new regular grid:  can also specify spacing points: Common use cases: - Align data different instruments different sampling rates - Reduce data density faster processing - Ensure uniform spacing methods require ","code":"# Resample to 50 evenly spaced points rec_resample <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_resample(n = 50, method = \"spline\")  resample_data <- get_internal(rec_resample) plot_spectra(resample_data, \"Resampled to 50 Points\",              \"Spline interpolation to regular grid\") # Resample with 5 nm spacing rec_resample_spacing <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_resample(spacing = 5, method = \"linear\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"combining-region-operations","dir":"Articles","previous_headings":"Region Operations","what":"Combining region operations","title":"Preprocessing Techniques","text":"Region operations often used together start preprocessing pipeline:","code":"rec_regions <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   # First trim to region of interest   step_measure_trim(range = c(860, 1040)) |>   # Then resample to regular grid   step_measure_resample(n = 50, method = \"spline\") |>   # Now apply spectral preprocessing   step_measure_savitzky_golay(window_side = 3, differentiation_order = 1) |>   step_measure_snv()  region_pipeline_data <- get_internal(rec_regions) plot_spectra(region_pipeline_data, \"Region Selection + Preprocessing\",              \"Trim → Resample → SG derivative → SNV\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"baseline-correction","dir":"Articles","previous_headings":"","what":"Baseline Correction","title":"Preprocessing Techniques","text":"Baseline correction critical removing unwanted background signals spectral data. measure package provides several algorithms suited different situations.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"rolling-ball-baseline","dir":"Articles","previous_headings":"Baseline Correction","what":"Rolling ball baseline","title":"Preprocessing Techniques","text":"rolling ball algorithm “rolls” ball specified radius spectrum estimate baseline:  Key parameters: - window_size: Diameter rolling ball (larger = smoother baseline) - smoothing: Amount smoothing applied estimated baseline","code":"rec_rolling <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_baseline_rolling(window_size = 50)  rolling_data <- get_internal(rec_rolling) plot_spectra(rolling_data, \"Rolling Ball Baseline Correction\",              \"Window size = 50\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"airpls-baseline","dir":"Articles","previous_headings":"Baseline Correction","what":"airPLS baseline","title":"Preprocessing Techniques","text":"Adaptive Iteratively Reweighted Penalized Least Squares adapts complex, varying baselines:  lambda parameter controls smoothness (larger = smoother baseline) tunable dials.","code":"rec_airpls <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_baseline_airpls(lambda = 1e5, max_iter = 20)  airpls_data <- get_internal(rec_airpls) plot_spectra(airpls_data, \"airPLS Baseline Correction\",              \"lambda = 1e5\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"snip-baseline","dir":"Articles","previous_headings":"Baseline Correction","what":"SNIP baseline","title":"Preprocessing Techniques","text":"Statistics-sensitive Non-linear Iterative Peak-clipping (SNIP) well-suited spectroscopy sharp peaks:  Key parameters: - iterations: Number clipping iterations (= aggressive baseline removal) - decreasing: Whether decrease window size iterations (recommended peaks)","code":"rec_snip <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_baseline_snip(iterations = 30)  snip_data <- get_internal(rec_snip) plot_spectra(snip_data, \"SNIP Baseline Correction\",              \"30 iterations, decreasing window\")"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"what-it-does-1","dir":"Articles","previous_headings":"Standard Normal Variate (SNV)","what":"What it does","title":"Preprocessing Techniques","text":"SNV normalizes spectrum independently centering scaling: SNV(x)=x−x‾sxSNV(x) = \\frac{x - \\bar{x}}{s_x} x‾\\bar{x} spectrum’s mean sxs_x standard deviation.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"when-to-use-it-1","dir":"Articles","previous_headings":"Standard Normal Variate (SNV)","what":"When to use it","title":"Preprocessing Techniques","text":"Remove multiplicative scatter effects Correct path length variations Normalize spectra similar magnitude SNV particularly effective diffuse reflectance spectra particle size causes scatter variations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"example","dir":"Articles","previous_headings":"Standard Normal Variate (SNV)","what":"Example","title":"Preprocessing Techniques","text":"","code":"rec_snv <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_snv()  snv_data <- get_internal(rec_snv) plot_spectra(snv_data, \"After SNV Normalization\", \"Each spectrum has mean = 0 and sd = 1\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"combining-with-derivatives","dir":"Articles","previous_headings":"Standard Normal Variate (SNV)","what":"Combining with derivatives","title":"Preprocessing Techniques","text":"SNV often combined Savitzky-Golay derivatives. order matters:","code":"# Derivative then SNV (more common) rec_d1_snv <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv()  plot_spectra(get_internal(rec_d1_snv), \"1st Derivative + SNV\",              \"Combined baseline removal and scatter correction\")"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"what-it-does-2","dir":"Articles","previous_headings":"Multiplicative Scatter Correction (MSC)","what":"What it does","title":"Preprocessing Techniques","text":"MSC aligns spectrum reference spectrum (typically mean training spectra) correcting additive multiplicative effects: Fit spectrum xix_i reference xrx_r: xi=mi⋅xr+aix_i = m_i \\cdot x_r + a_i Correct: MSC(xi)=xi−aimiMSC(x_i) = \\frac{x_i - a_i}{m_i}","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"when-to-use-it-2","dir":"Articles","previous_headings":"Multiplicative Scatter Correction (MSC)","what":"When to use it","title":"Preprocessing Techniques","text":"Similar applications SNV good reference spectrum Often slightly better SNV scatter correction","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"how-it-differs-from-snv","dir":"Articles","previous_headings":"Multiplicative Scatter Correction (MSC)","what":"How it differs from SNV","title":"Preprocessing Techniques","text":"SNV: spectrum normalized independently (reference needed) MSC: spectra aligned common reference (learns reference prep) means MSC trained step - learns reference spectrum training data applies reference new data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"example-1","dir":"Articles","previous_headings":"Multiplicative Scatter Correction (MSC)","what":"Example","title":"Preprocessing Techniques","text":"","code":"rec_msc <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_msc()  msc_data <- get_internal(rec_msc) plot_spectra(msc_data, \"After MSC\", \"Spectra aligned to mean reference\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"comparing-snv-and-msc","dir":"Articles","previous_headings":"Multiplicative Scatter Correction (MSC)","what":"Comparing SNV and MSC","title":"Preprocessing Techniques","text":"methods produce similar results dataset. practice, try compare model performance.","code":"p_snv <- plot_spectra(get_internal(rec_snv), \"SNV\") p_msc <- plot_spectra(get_internal(rec_msc), \"MSC\")  p_snv / p_msc"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"extended-scatter-correction","dir":"Articles","previous_headings":"","what":"Extended Scatter Correction","title":"Preprocessing Techniques","text":"complex scatter effects, measure provides advanced scatter correction methods.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"extended-msc-emsc","dir":"Articles","previous_headings":"Extended Scatter Correction","what":"Extended MSC (EMSC)","title":"Preprocessing Techniques","text":"EMSC extends standard MSC modeling wavelength-dependent scatter effects using polynomial terms:  degree parameter controls polynomial order wavelength terms (0 = standard MSC, higher = flexibility). parameter tunable.","code":"rec_emsc <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_emsc(degree = 2)  emsc_data <- get_internal(rec_emsc) plot_spectra(emsc_data, \"After EMSC (degree=2)\", \"Wavelength-dependent scatter correction\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"orthogonal-signal-correction-osc","dir":"Articles","previous_headings":"Extended Scatter Correction","what":"Orthogonal Signal Correction (OSC)","title":"Preprocessing Techniques","text":"OSC removes variation spectra orthogonal (uncorrelated) response variable. supervised technique requires outcome variables:  OSC automatically detects outcome variables recipe formula. n_components parameter controls many orthogonal components remove tunable. use EMSC vs OSC: - EMSC: Physical scatter effects vary wavelength - OSC: Systematic variation unrelated response (supervised)","code":"rec_osc <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_osc(n_components = 2)  osc_data <- get_internal(rec_osc) plot_spectra(osc_data, \"After OSC\", \"Removed 2 orthogonal components\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"feature-engineering","dir":"Articles","previous_headings":"","what":"Feature Engineering","title":"Preprocessing Techniques","text":"Feature engineering steps extract scalar features spectral data, creating new predictor columns useful modeling.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"region-integration","dir":"Articles","previous_headings":"Feature Engineering","what":"Region Integration","title":"Preprocessing Techniques","text":"step_measure_integrals() calculates integrated areas specified regions, useful quantifying peak areas:","code":"rec_integrals <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_integrals(     regions = list(       region_a = c(870, 920),       region_b = c(950, 1000)     ),     method = \"trapezoid\"   )  # View extracted features bake(prep(rec_integrals), new_data = NULL) |>   select(starts_with(\"integral_\")) |>   head() #> # A tibble: 6 × 2 #>   integral_region_a integral_region_b #>               <dbl>             <dbl> #> 1              131.              161. #> 2              146.              170. #> 3              129.              152. #> 4              140.              167. #> 5              141.              177. #> 6              155.              183."},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"region-ratios","dir":"Articles","previous_headings":"Feature Engineering","what":"Region Ratios","title":"Preprocessing Techniques","text":"step_measure_ratios() calculates ratios integrated regions, often used internal calibration:","code":"rec_ratios <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_ratios(     numerator = c(870, 920),     denominator = c(950, 1000),     name = \"peak_ratio\"   )  bake(prep(rec_ratios), new_data = NULL) |>   select(peak_ratio) |>   head() #> # A tibble: 6 × 1 #>   peak_ratio #>        <dbl> #> 1      0.810 #> 2      0.855 #> 3      0.849 #> 4      0.841 #> 5      0.795 #> 6      0.851"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"statistical-moments","dir":"Articles","previous_headings":"Feature Engineering","what":"Statistical Moments","title":"Preprocessing Techniques","text":"step_measure_moments() extracts statistical moments spectra:","code":"rec_moments <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_moments(moments = c(\"mean\", \"sd\", \"skewness\", \"kurtosis\"))  bake(prep(rec_moments), new_data = NULL) |>   select(starts_with(\"moment_\")) |>   head() #> # A tibble: 6 × 4 #>   moment_mean moment_sd moment_skewness moment_kurtosis #>         <dbl>     <dbl>           <dbl>           <dbl> #> 1        2.97     0.270           0.222           -1.38 #> 2        3.24     0.234          -0.311           -1.19 #> 3        2.82     0.206           0.536           -1.15 #> 4        3.09     0.238           0.540           -1.19 #> 5        3.25     0.326           0.102           -1.37 #> 6        3.48     0.262          -0.387           -1.17"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"spectral-binning","dir":"Articles","previous_headings":"Feature Engineering","what":"Spectral Binning","title":"Preprocessing Techniques","text":"step_measure_bin() reduces spectral resolution averaging summing bins. can reduce noise dimensionality:  bin_width parameter tunable:","code":"rec_bin <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_bin(n_bins = 20, method = \"mean\")  bin_data <- get_internal(rec_bin) plot_spectra(bin_data, \"Binned to 20 Points\", \"Reduced dimensionality\") rec_tunable_bin <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_bin(bin_width = tune()) |>   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"sample-wise-normalization","dir":"Articles","previous_headings":"","what":"Sample-wise Normalization","title":"Preprocessing Techniques","text":"measure package provides several sample-wise normalization methods normalize spectrum independently. Unlike SNV/MSC address scatter, methods adjust differences total signal intensity.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"sum-normalization","dir":"Articles","previous_headings":"Sample-wise Normalization","what":"Sum normalization","title":"Preprocessing Techniques","text":"Divides spectrum total intensity. transformation, spectra sum 1:","code":"rec_norm_sum <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_normalize_sum()  plot_spectra(get_internal(rec_norm_sum), \"Sum Normalized\",              \"Each spectrum sums to 1\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"max-normalization","dir":"Articles","previous_headings":"Sample-wise Normalization","what":"Max normalization","title":"Preprocessing Techniques","text":"Divides spectrum maximum value, useful peak-focused analysis:","code":"rec_norm_max <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_normalize_max()  plot_spectra(get_internal(rec_norm_max), \"Max Normalized\",              \"Each spectrum has maximum = 1\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"peak-region-normalization-tunable","dir":"Articles","previous_headings":"Sample-wise Normalization","what":"Peak region normalization (tunable)","title":"Preprocessing Techniques","text":"internal standard known location, use step_measure_normalize_peak() normalize specific region:  location_min location_max parameters tunable:","code":"rec_norm_peak <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_normalize_peak(     location_min = 900,     location_max = 950,     method = \"mean\"  # or \"max\" or \"integral\"   )  plot_spectra(get_internal(rec_norm_peak), \"Peak Region Normalized\",              \"Normalized by mean of region 900-950\") rec_tunable_peak <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_normalize_peak(     location_min = tune(),     location_max = tune(),     method = \"mean\"   ) |>   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"variable-wise-scaling","dir":"Articles","previous_headings":"","what":"Variable-wise Scaling","title":"Preprocessing Techniques","text":"sample-wise methods normalize spectrum independently, variable-wise scaling operates across samples measurement location. methods learn statistics training data apply consistently new data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"when-to-use-variable-wise-scaling","dir":"Articles","previous_headings":"Variable-wise Scaling","what":"When to use variable-wise scaling","title":"Preprocessing Techniques","text":"PCA/PLS: Centering essential; scaling equalizes variable importance variables different scales: Auto-scaling gives equal weight locations metabolomics data: Pareto scaling common practice","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"mean-centering","dir":"Articles","previous_headings":"Variable-wise Scaling","what":"Mean centering","title":"Preprocessing Techniques","text":"step_measure_center() subtracts column mean location:","code":"rec_center <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_center()  center_data <- get_internal(rec_center) plot_spectra(center_data, \"Mean Centered\",              \"Column means are zero\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"auto-scaling-z-score","dir":"Articles","previous_headings":"Variable-wise Scaling","what":"Auto-scaling (z-score)","title":"Preprocessing Techniques","text":"step_measure_scale_auto() centers scales unit variance location:","code":"rec_auto <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_scale_auto()  auto_data <- get_internal(rec_auto) plot_spectra(auto_data, \"Auto-Scaled (Z-Score)\",              \"Column means = 0, SDs = 1\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"pareto-scaling","dir":"Articles","previous_headings":"Variable-wise Scaling","what":"Pareto scaling","title":"Preprocessing Techniques","text":"step_measure_scale_pareto() divides square root standard deviation - compromise scaling auto-scaling:","code":"rec_pareto <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |>   step_measure_scale_pareto()  pareto_data <- get_internal(rec_pareto) plot_spectra(pareto_data, \"Pareto Scaled\",              \"Reduces influence of large values while preserving fold changes\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"comparing-scaling-methods","dir":"Articles","previous_headings":"Variable-wise Scaling","what":"Comparing scaling methods","title":"Preprocessing Techniques","text":"","code":"p_raw <- plot_spectra(raw_data, \"Raw\") p_center <- plot_spectra(center_data, \"Centered\") p_auto <- plot_spectra(auto_data, \"Auto-Scaled\") p_pareto <- plot_spectra(pareto_data, \"Pareto Scaled\")  (p_raw + p_center) / (p_auto + p_pareto)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"learned-parameters","dir":"Articles","previous_headings":"Variable-wise Scaling","what":"Learned parameters","title":"Preprocessing Techniques","text":"Variable-wise scaling steps store learned parameters can examined training:","code":"rec_prepped <- prep(rec_auto)  # View learned parameters tidy_params <- tidy(rec_prepped, number = 2) head(tidy_params) #> # A tibble: 6 × 5 #>   terms     location  mean    sd id                       #>   <chr>        <dbl> <dbl> <dbl> <chr>                    #> 1 .measures     850   2.81 0.411 measure_scale_auto_uVs7T #> 2 .measures     852.  2.81 0.413 measure_scale_auto_uVs7T #> 3 .measures     854.  2.81 0.416 measure_scale_auto_uVs7T #> 4 .measures     856.  2.82 0.418 measure_scale_auto_uVs7T #> 5 .measures     858.  2.82 0.421 measure_scale_auto_uVs7T #> 6 .measures     860.  2.82 0.424 measure_scale_auto_uVs7T  # Plot the learned means and SDs ggplot(tidy_params, aes(x = location)) +   geom_line(aes(y = mean), color = \"blue\") +   geom_ribbon(aes(ymin = mean - sd, ymax = mean + sd), alpha = 0.3, fill = \"blue\") +   labs(x = \"Wavelength\", y = \"Value\",        title = \"Learned Parameters from Auto-Scaling\",        subtitle = \"Mean ± 1 SD at each wavelength\") +   theme_minimal()"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"when-built-in-steps-arent-enough","dir":"Articles","previous_headings":"Custom Transformations","what":"When built-in steps aren’t enough","title":"Preprocessing Techniques","text":"built-preprocessing steps cover common operations, may need domain-specific transformations: Custom baseline correction algorithms Instrument-specific corrections Experimental preprocessing techniques Transformations specialized packages step_measure_map() provides “escape hatch” applying custom function measurements staying within recipes framework.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"using-step_measure_map","dir":"Articles","previous_headings":"Custom Transformations","what":"Using step_measure_map()","title":"Preprocessing Techniques","text":"function provide must accept tibble location value columns return tibble structure:","code":"# Example: Shift spectra to start at zero zero_baseline <- function(x) {  x$value <- x$value - min(x$value) x }  rec_custom <- recipe(water ~ ., data = meats) |> step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |> step_measure_map(zero_baseline) |> step_measure_snv()  plot_spectra(get_internal(rec_custom), \"Custom Zero-Baseline + SNV\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"formula-syntax-for-inline-transformations","dir":"Articles","previous_headings":"Custom Transformations","what":"Formula syntax for inline transformations","title":"Preprocessing Techniques","text":"simple transformations, use formula syntax instead defining separate function:","code":"rec_inline <- recipe(water ~ ., data = meats) |> step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |> step_measure_map(~ { # Log transform (common for absorbance data) .x$value <- log1p(.x$value) .x })"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"passing-additional-arguments","dir":"Articles","previous_headings":"Custom Transformations","what":"Passing additional arguments","title":"Preprocessing Techniques","text":"can pass extra arguments transformation function:","code":"# A function with configurable parameters robust_scale <- function(x, center_fn = median, scale_fn = mad) { x$value <- (x$value - center_fn(x$value)) / scale_fn(x$value) x }  # Use with custom parameters rec <- recipe(water ~ ., data = meats) |> step_measure_input_wide(starts_with(\"x_\")) |> step_measure_map(robust_scale, center_fn = mean, scale_fn = sd)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"prototyping-with-measure_map","dir":"Articles","previous_headings":"Custom Transformations","what":"Prototyping with measure_map()","title":"Preprocessing Techniques","text":"developing custom transformation, helps prototype interactively putting recipe. Use measure_map() exploration: transformation works correctly, move step_measure_map() production use. ensures transformation : Applied consistently prep() bake() Included bundling recipes workflows Reproducible across sessions","code":"# First, get data in internal format rec_internal <- recipe(water ~ ., data = meats) |> step_measure_input_wide(starts_with(\"x_\"), location_values = wavelengths) |> prep()  baked_data <- bake(rec_internal, new_data = NULL)  # Prototype your transformation result <- measure_map(baked_data, ~ { # Experiment with different approaches .x$value <- .x$value - median(.x$value) .x })  # Check results result$.measures[[1]] #> <measure_tbl [100 x 2]> #> # A tibble: 100 × 2 #>    location  value #>       <dbl>  <dbl> #>  1     850  -0.317 #>  2     852. -0.316 #>  3     854. -0.316 #>  4     856. -0.315 #>  5     858. -0.314 #>  6     860. -0.314 #>  7     862. -0.312 #>  8     864. -0.311 #>  9     866. -0.309 #> 10     868. -0.307 #> # ℹ 90 more rows"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"handling-problematic-samples","dir":"Articles","previous_headings":"Custom Transformations","what":"Handling problematic samples","title":"Preprocessing Techniques","text":"Use measure_map_safely() exploring data might problematic samples:","code":"# A transformation that might fail for some samples risky_transform <- function(x) { if (any(x$value <= 0)) stop(\"Non-positive values!\") x$value <- log(x$value) x }  # Errors are captured, not thrown result <- measure_map_safely(baked_data, risky_transform)  # Check which samples failed if (nrow(result$errors) > 0) { print(result$errors) }  # result$result contains the data with successful transforms # (failed samples keep their original values)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"understanding-your-data-with-measure_summarize","dir":"Articles","previous_headings":"Custom Transformations","what":"Understanding your data with measure_summarize()","title":"Preprocessing Techniques","text":"preprocessing, ’s often helpful compute summary statistics across samples:  can help identify: - Wavelength regions high variability - Potential outliers - Reference spectra custom corrections","code":"# Compute mean and SD at each wavelength summary_stats <- measure_summarize(baked_data) summary_stats #> # A tibble: 100 × 3 #>    location  mean    sd #>       <dbl> <dbl> <dbl> #>  1     850   2.81 0.411 #>  2     852.  2.81 0.413 #>  3     854.  2.81 0.416 #>  4     856.  2.82 0.418 #>  5     858.  2.82 0.421 #>  6     860.  2.82 0.424 #>  7     862.  2.83 0.426 #>  8     864.  2.83 0.429 #>  9     866.  2.83 0.432 #> 10     868.  2.84 0.434 #> # ℹ 90 more rows  # Visualize the mean spectrum with variability ggplot(summary_stats, aes(x = location)) + geom_ribbon(aes(ymin = mean - sd, ymax = mean + sd), alpha = 0.3) + geom_line(aes(y = mean)) + labs(x = \"Wavelength\", y = \"Signal\", title = \"Mean Spectrum ± 1 SD\") + theme_minimal()"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"common-combinations","dir":"Articles","previous_headings":"Preprocessing pipelines","what":"Common combinations","title":"Preprocessing Techniques","text":"commonly used preprocessing pipelines:","code":"# Pipeline 1: Basic scatter correction pipe1 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_snv() |>   step_measure_output_wide()  # Pipeline 2: Derivative + normalization pipe2 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv() |>   step_measure_output_wide()  # Pipeline 3: Second derivative (often enough on its own) pipe3 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 2) |>   step_measure_output_wide()  # Pipeline 4: MSC + smoothing pipe4 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_msc() |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 0) |>   step_measure_output_wide()  # Pipeline 5: For PCA/PLS - SNV + centering pipe5 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_snv() |>   step_measure_center() |>   step_measure_output_wide()  # Pipeline 6: Metabolomics-style with Pareto scaling pipe6 <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_normalize_sum() |>   step_measure_scale_pareto() |>   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"order-of-operations","dir":"Articles","previous_headings":"Preprocessing pipelines","what":"Order of operations","title":"Preprocessing Techniques","text":"order preprocessing steps matters. General guidelines: Derivatives first: Apply Savitzky-Golay derivatives transformations Sample-wise normalization variable-wise scaling: Normalize spectra (SNV, MSC, normalize_*) centering/scaling Center/scale last: Variable-wise scaling typically final step modeling Keep simple: Often, single well-chosen step outperforms complex pipelines typical order might :","code":"Derivatives → Sample normalization (SNV/MSC) → Variable scaling (center/auto-scale)"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"data-augmentation","dir":"Articles","previous_headings":"","what":"Data Augmentation","title":"Preprocessing Techniques","text":"Data augmentation steps add controlled variations training data, helping models generalize better. steps default skip = TRUE, meaning apply training (via prep()) skipped applying recipe new data (via bake() new_data).","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"adding-random-noise","dir":"Articles","previous_headings":"Data Augmentation","what":"Adding Random Noise","title":"Preprocessing Techniques","text":"step_measure_augment_noise() adds random noise simulate measurement uncertainty:","code":"rec_noise <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_augment_noise(     sd = 0.01,              # Noise level (relative to signal range)     distribution = \"gaussian\",     relative = TRUE         # TRUE = sd is relative to signal range   ) |>   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"random-x-axis-shifts","dir":"Articles","previous_headings":"Data Augmentation","what":"Random X-axis Shifts","title":"Preprocessing Techniques","text":"step_measure_augment_shift() applies small random shifts along x-axis, helping models become shift-invariant:","code":"rec_shift <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_augment_shift(max_shift = 2) |>  # Max shift in location units   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"random-intensity-scaling","dir":"Articles","previous_headings":"Data Augmentation","what":"Random Intensity Scaling","title":"Preprocessing Techniques","text":"step_measure_augment_scale() applies random scaling factors intensities:","code":"rec_scale <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_augment_scale(range = c(0.9, 1.1)) |>  # Scale between 90-110%   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"combining-augmentations","dir":"Articles","previous_headings":"Data Augmentation","what":"Combining Augmentations","title":"Preprocessing Techniques","text":"Multiple augmentation steps can combined. Augmentations reproducible - applying recipe data produces identical results: use augmentation: - Training deep learning models - Small training sets variation helps - Building shift/scale-invariant models","code":"rec_augment <- recipe(water ~ ., data = meats) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_augment_noise(sd = 0.005) |>   step_measure_augment_shift(max_shift = 1) |>   step_measure_augment_scale(range = c(0.95, 1.05)) |>   step_measure_snv() |>   step_measure_output_wide()  # Augmentation only applies during training prepped <- prep(rec_augment) training_data <- bake(prepped, new_data = NULL)  # Augmented new_data <- bake(prepped, new_data = meats[1:5, ])  # Not augmented"},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"tips-for-choosing-preprocessing","dir":"Articles","previous_headings":"","what":"Tips for choosing preprocessing","title":"Preprocessing Techniques","text":"Start simple: Try SNV first derivative alone complex pipelines Visualize: Always plot preprocessed spectra check artifacts Validate: Use cross-validation compare preprocessing strategies Domain knowledge: Consider physics measurement system Tune: Use tune() optimize Savitzky-Golay parameters","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/preprocessing.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Preprocessing Techniques","text":"Savitzky, ., Golay, M. J. E. (1964). Smoothing Differentiation Data Simplified Least Squares Procedures. Analytical Chemistry, 36(8), 1627-1639. Barnes, R. J., Dhanoa, M. S., Lister, S. J. (1989). Standard Normal Variate Transformation De-Trending Near-Infrared Diffuse Reflectance Spectra. Applied Spectroscopy, 43(5), 772-777. Geladi, P., MacDougall, D., Martens, H. (1985). Linearization Scatter-Correction Near-Infrared Reflectance Spectra Meat. Applied Spectroscopy, 39(3), 491-500.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Integrating with tidymodels","text":"One measure’s key design goals seamless integration tidymodels ecosystem. vignette shows use measure preprocessing within complete modeling workflows, including: Bundling preprocessing models using workflows Cross-validation measure recipes Hyperparameter tuning preprocessing steps Comparing preprocessing strategies","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"setup-the-meats-dataset","dir":"Articles","previous_headings":"","what":"Setup: The meats dataset","title":"Integrating with tidymodels","text":"’ll use NIR spectroscopy dataset modeldata predict water content meat samples. ’ll focus just predicting water keep example simple.","code":"data(meats)  # Keep only water as outcome and spectral columns meats_water <- meats |>   select(water, starts_with(\"x_\"))  # Create train/test split split <- initial_split(meats_water, prop = 0.75) train <- training(split) test <- testing(split)  cat(\"Training samples:\", nrow(train), \"\\n\") #> Training samples: 161 cat(\"Test samples:\", nrow(test), \"\\n\") #> Test samples: 54"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"basic-workflow","dir":"Articles","previous_headings":"","what":"Basic workflow","title":"Integrating with tidymodels","text":"simplest way use measure tidymodels workflow bundles preprocessing modeling:","code":"# Define preprocessing recipe rec <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv() |>   step_measure_output_wide()  # Define model - simple linear regression # (For real applications, use regularization like glmnet or PLS) lm_spec <- linear_reg() |>   set_engine(\"lm\")  # Create workflow wf <- workflow() |>   add_recipe(rec) |>   add_model(lm_spec)  wf #> ══ Workflow ════════════════════════════════════════════════════════════════════ #> Preprocessor: Recipe #> Model: linear_reg() #>  #> ── Preprocessor ──────────────────────────────────────────────────────────────── #> 4 Recipe Steps #>  #> • step_measure_input_wide() #> • step_measure_savitzky_golay() #> • step_measure_snv() #> • step_measure_output_wide() #>  #> ── Model ─────────────────────────────────────────────────────────────────────── #> Linear Regression Model Specification (regression) #>  #> Computational engine: lm"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"fit-and-evaluate","dir":"Articles","previous_headings":"Basic workflow","what":"Fit and evaluate","title":"Integrating with tidymodels","text":"","code":"# Fit the workflow wf_fit <- fit(wf, data = train)  # Predict on test data predictions <- predict(wf_fit, test) |>   bind_cols(test |> select(water))  # Evaluate metrics(predictions, truth = water, estimate = .pred)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"cross-validation","dir":"Articles","previous_headings":"","what":"Cross-validation","title":"Integrating with tidymodels","text":"Cross-validation straightforward workflows:","code":"# Create folds folds <- vfold_cv(train, v = 5)  # Fit resamples cv_results <- fit_resamples(wf, resamples = folds)  # Collect metrics collect_metrics(cv_results)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"tuning-preprocessing-parameters","dir":"Articles","previous_headings":"","what":"Tuning preprocessing parameters","title":"Integrating with tidymodels","text":"Several measure steps tunable parameters: step_measure_savitzky_golay(): window_side, differentiation_order, degree step_measure_normalize_peak(): location_min, location_max Baseline correction steps: lambda, p, degree, etc. Let’s find optimal Savitzky-Golay parameters:","code":"# Create a tunable recipe rec_tune <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(     window_side = tune(),     differentiation_order = tune()   ) |>   step_measure_snv() |>   step_measure_output_wide()  # Create tunable workflow wf_tune <- workflow() |>   add_recipe(rec_tune) |>   add_model(lm_spec)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"define-the-parameter-grid","dir":"Articles","previous_headings":"Tuning preprocessing parameters","what":"Define the parameter grid","title":"Integrating with tidymodels","text":"","code":"# Create a grid grid <- grid_regular(   window_side(range = c(3L, 11L)),   differentiation_order(range = c(0L, 2L)),   levels = c(5, 3) )  grid"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"run-the-tuning","dir":"Articles","previous_headings":"Tuning preprocessing parameters","what":"Run the tuning","title":"Integrating with tidymodels","text":"","code":"tune_results <- tune_grid(   wf_tune,   resamples = folds,   grid = grid )  # Show best results show_best(tune_results, metric = \"rmse\", n = 5)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"visualize-tuning-results","dir":"Articles","previous_headings":"Tuning preprocessing parameters","what":"Visualize tuning results","title":"Integrating with tidymodels","text":"","code":"autoplot(tune_results)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"finalize-the-workflow","dir":"Articles","previous_headings":"Tuning preprocessing parameters","what":"Finalize the workflow","title":"Integrating with tidymodels","text":"","code":"# Select best parameters best_params <- select_best(tune_results, metric = \"rmse\") best_params  # Finalize workflow final_wf <- finalize_workflow(wf_tune, best_params)  # Fit on full training data and evaluate on test final_fit <- last_fit(final_wf, split)  collect_metrics(final_fit)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"comparing-preprocessing-strategies","dir":"Articles","previous_headings":"","what":"Comparing preprocessing strategies","title":"Integrating with tidymodels","text":"common workflow comparing different preprocessing approaches. ’s set fair comparison:","code":"# Strategy 1: SNV only rec_snv <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_snv() |>   step_measure_output_wide()  # Strategy 2: First derivative + SNV rec_d1_snv <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 1) |>   step_measure_snv() |>   step_measure_output_wide()  # Strategy 3: MSC rec_msc <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_msc() |>   step_measure_output_wide()  # Strategy 4: Second derivative only rec_d2 <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_savitzky_golay(window_side = 7, differentiation_order = 2) |>   step_measure_output_wide()  # Strategy 5: SNV + centering (good for PLS) rec_snv_center <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_snv() |>   step_measure_center() |>   step_measure_output_wide()  # Strategy 6: Sum normalization + auto-scaling rec_norm_scale <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_normalize_sum() |>   step_measure_scale_auto() |>   step_measure_output_wide()  # Create workflow set wf_set <- workflow_set(   preproc = list(     snv = rec_snv,     d1_snv = rec_d1_snv,     msc = rec_msc,     d2 = rec_d2,     snv_center = rec_snv_center,     norm_scale = rec_norm_scale   ),   models = list(lm = lm_spec) )  wf_set"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"evaluate-all-strategies","dir":"Articles","previous_headings":"Comparing preprocessing strategies","what":"Evaluate all strategies","title":"Integrating with tidymodels","text":"","code":"# Fit all workflows with cross-validation comparison <- workflow_map(   wf_set,   fn = \"fit_resamples\",   resamples = folds )  # Rank by performance rank_results(comparison, rank_metric = \"rmse\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"visualize-comparison","dir":"Articles","previous_headings":"Comparing preprocessing strategies","what":"Visualize comparison","title":"Integrating with tidymodels","text":"","code":"autoplot(comparison) +   labs(title = \"Preprocessing Strategy Comparison\")"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"working-with-workflows-and-new-data","dir":"Articles","previous_headings":"","what":"Working with workflows and new data","title":"Integrating with tidymodels","text":"’ve selected final workflow, ’s use predictions new data:","code":"# Use the finalized workflow from tuning final_trained <- fit(final_wf, train)  # Predict on new data new_predictions <- predict(final_trained, test)  # Or use augment for predictions with original data augment(final_trained, test) |>   select(water, .pred) |>   head()"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"high-dimensional-data","dir":"Articles","previous_headings":"Tips for spectral modeling","what":"High-dimensional data","title":"Integrating with tidymodels","text":"Spectral data typically high-dimensional (many features, fewer samples). Consider: Regularization: Use ridge elastic net regression (linear_reg(penalty = tune(), mixture = tune())) PLS regression: Use pls() parsnip mixOmics engine Feature selection: Consider variable importance initial modeling","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"preprocessing-for-pcapls","dir":"Articles","previous_headings":"Tips for spectral modeling","what":"Preprocessing for PCA/PLS","title":"Integrating with tidymodels","text":"multivariate methods like PCA PLS, centering essential: Use step_measure_scale_auto() want give equal weight wavelengths, step_measure_scale_pareto() compromise preserves magnitude information.","code":"rec_for_pls <- recipe(water ~ ., data = train) |>   step_measure_input_wide(starts_with(\"x_\")) |>   step_measure_snv() |>   step_measure_center() |>  # Essential for PCA/PLS   step_measure_output_wide()"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"memory-considerations","dir":"Articles","previous_headings":"Tips for spectral modeling","what":"Memory considerations","title":"Integrating with tidymodels","text":"large spectral datasets: internal .measures format memory-efficient Consider processing batches memory limited Use step_measure_output_wide() needed modeling","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"reproducibility","dir":"Articles","previous_headings":"Tips for spectral modeling","what":"Reproducibility","title":"Integrating with tidymodels","text":"Always set seed cross-validation tuning:","code":"set.seed(123) folds <- vfold_cv(train, v = 10)"},{"path":"https://jameshwade.github.io/measure/dev/articles/recipes.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Integrating with tidymodels","text":"measure integrates naturally tidymodels: Use workflow() bundle preprocessing modeling Cross-validate fit_resamples() vfold_cv() Tune preprocessing parameters (Savitzky-Golay, peak normalization, baseline) tune_grid() Compare strategies workflow_set() Variable-wise scaling steps (step_measure_center(), step_measure_scale_*()) learn training data apply consistently new data recipes paradigm means preprocessing applied consistently training data, cross-validation folds, new predictions - eliminating common source data leakage chemometric modeling.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Data Organization and Diagnostic Plots","text":"working analytical data, proper organization visualization essential building effective preprocessing pipelines. measure package provides tools : Detect column types automatically based naming conventions Assign roles columns use recipes Validate recipes running Visualize spectra preprocessing effects vignette covers data organization diagnostic capabilities.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"detecting-column-types","dir":"Articles","previous_headings":"","what":"Detecting Column Types","title":"Data Organization and Diagnostic Plots","text":"Analytical data often follows naming conventions indicate column represents. measure_identify_columns() function automatically detects patterns:","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"example-identifying-columns-in-wide-format-data","dir":"Articles","previous_headings":"Detecting Column Types","what":"Example: Identifying columns in wide-format data","title":"Data Organization and Diagnostic Plots","text":"function returns tibble : - column: Column name - type: Detected type (“” pattern matched) - suggested_role: Recommended recipe role - n_values: Count non-NA values - class: R class column","code":"# Create example wide-format spectral data spec_data <- data.frame(  sample_id = paste0(\"S\", 1:5),   concentration = c(10.2, 25.1, 50.3, 75.0, 100.5),   batch = c(\"A\", \"A\", \"B\", \"B\", \"B\"),   wn_1000 = rnorm(5),   wn_1001 = rnorm(5),   wn_1002 = rnorm(5),   wn_1003 = rnorm(5),   wn_1004 = rnorm(5) )  # Identify column types col_info <- measure_identify_columns(spec_data) col_info #> # A tibble: 8 × 5 #>   column        type       suggested_role n_values class     #>   <chr>         <chr>      <chr>             <int> <chr>     #> 1 sample_id     other      id                    5 character #> 2 concentration other      outcome               5 numeric   #> 3 batch         other      predictor             5 character #> 4 wn_1000       wavenumber predictor             5 numeric   #> 5 wn_1001       wavenumber predictor             5 numeric   #> 6 wn_1002       wavenumber predictor             5 numeric   #> 7 wn_1003       wavenumber predictor             5 numeric   #> 8 wn_1004       wavenumber predictor             5 numeric"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"summarizing-by-type","dir":"Articles","previous_headings":"Detecting Column Types","what":"Summarizing by type","title":"Data Organization and Diagnostic Plots","text":"quick overview, use measure_column_summary():","code":"measure_column_summary(spec_data) #> # A tibble: 2 × 3 #>   type       n_columns example_cols                    #>   <chr>          <int> <chr>                           #> 1 wavenumber         5 wn_1000, wn_1001, wn_1002       #> 2 other              3 sample_id, concentration, batch"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"assigning-roles-in-recipes","dir":"Articles","previous_headings":"","what":"Assigning Roles in Recipes","title":"Data Organization and Diagnostic Plots","text":"Recipes use roles determine columns treated. Common roles include:","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"using-set_measure_roles","dir":"Articles","previous_headings":"Assigning Roles in Recipes","what":"Using set_measure_roles()","title":"Data Organization and Diagnostic Plots","text":"set_measure_roles() function provides convenient way assign multiple roles : equivalent calling update_role() multiple times, concise common analytical data patterns.","code":"rec <- recipe(concentration ~ ., data = spec_data) |>   set_measure_roles(     id_cols = sample_id,     metadata_cols = batch   )  # Check the assigned roles rec$var_info #> # A tibble: 8 × 4 #>   variable      type      role      source   #>   <chr>         <list>    <chr>     <chr>    #> 1 sample_id     <chr [3]> id        original #> 2 batch         <chr [3]> metadata  original #> 3 wn_1000       <chr [2]> predictor original #> 4 wn_1001       <chr [2]> predictor original #> 5 wn_1002       <chr [2]> predictor original #> 6 wn_1003       <chr [2]> predictor original #> 7 wn_1004       <chr [2]> predictor original #> 8 concentration <chr [2]> outcome   original"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"custom-roles-for-analytical-workflows","dir":"Articles","previous_headings":"Assigning Roles in Recipes","what":"Custom roles for analytical workflows","title":"Data Organization and Diagnostic Plots","text":"analytical chemistry workflows, might want identify special sample types:","code":"# Example with QC and blank samples analytical_data <- data.frame(   sample_id = c(\"blank_1\", \"QC_1\", \"S1\", \"S2\", \"QC_2\", \"S3\"),   sample_type = c(\"blank\", \"qc\", \"sample\", \"sample\", \"qc\", \"sample\"),   concentration = c(NA, 50, 10, 25, 50, 75),   wn_1000 = rnorm(6),   wn_1001 = rnorm(6) )  rec <- recipe(concentration ~ ., data = analytical_data) |>   set_measure_roles(     id_cols = sample_id,     blank_cols = starts_with(\"blank\"),     qc_cols = starts_with(\"QC\")   )"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"validating-recipe-structure","dir":"Articles","previous_headings":"","what":"Validating Recipe Structure","title":"Data Organization and Diagnostic Plots","text":"running preprocessing pipeline, check_measure_recipe() validates recipe structure identifies potential issues:","code":"# A well-structured recipe data(meats_long)  good_rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_snv() |>   step_measure_output_wide()  issues <- check_measure_recipe(good_rec) issues #> # A tibble: 0 × 3 #> # ℹ 3 variables: level <chr>, check <chr>, message <chr>"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"detecting-common-issues","dir":"Articles","previous_headings":"Validating Recipe Structure","what":"Detecting common issues","title":"Data Organization and Diagnostic Plots","text":"function checks : Errors (cause failures): - input step - Multiple input steps - Output step input step Warnings (may cause issues): - output step - Processing steps output step Info (suggestions): - ID column - Large number predictors","code":"# A recipe with issues bad_rec <- recipe(water ~ ., data = meats_long) |>   step_measure_snv()  # Missing input step!  issues <- check_measure_recipe(bad_rec) issues #> # A tibble: 3 × 3 #>   level   check     message                                                      #>   <chr>   <chr>     <chr>                                                        #> 1 error   no_input  Recipe has no input step. Add step_measure_input_wide() or … #> 2 warning no_output Recipe has no output step. Data will remain in internal .me… #> 3 info    no_id     No ID column identified. Consider using update_role(col, ne…"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"interactive-mode","dir":"Articles","previous_headings":"Validating Recipe Structure","what":"Interactive mode","title":"Data Organization and Diagnostic Plots","text":"Use strict = FALSE interactive feedback:","code":"check_measure_recipe(bad_rec, strict = FALSE) # ✖ Recipe has no input step. Add step_measure_input_wide() or step_measure_input_long()."},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"visualizing-spectra","dir":"Articles","previous_headings":"","what":"Visualizing Spectra","title":"Data Organization and Diagnostic Plots","text":"measure package provides autoplot() methods quick visualization spectral data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"plotting-a-single-spectrum","dir":"Articles","previous_headings":"Visualizing Spectra","what":"Plotting a single spectrum","title":"Data Organization and Diagnostic Plots","text":"","code":"# Create a single spectrum spec <- new_measure_tbl(   location = seq(1000, 1100, by = 1),   value = sin(seq(1000, 1100, by = 1) / 20) + rnorm(101, sd = 0.1) )  autoplot(spec)"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"plotting-multiple-spectra","dir":"Articles","previous_headings":"Visualizing Spectra","what":"Plotting multiple spectra","title":"Data Organization and Diagnostic Plots","text":"","code":"# Process some data to get a measure_list rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep(retain = TRUE)  baked <- bake(rec, new_data = NULL)  # Plot the spectra autoplot(baked$.measures, max_spectra = 20)"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"adding-summary-statistics","dir":"Articles","previous_headings":"Visualizing Spectra","what":"Adding summary statistics","title":"Data Organization and Diagnostic Plots","text":"Use summary = TRUE overlay mean ± standard deviation:","code":"autoplot(baked$.measures, summary = TRUE, max_spectra = 30, alpha = 0.2)"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"beforeafter-comparison","dir":"Articles","previous_headings":"Visualizing Preprocessing Effects","what":"Before/after comparison","title":"Data Organization and Diagnostic Plots","text":"autoplot() method recipes shows preprocessing effects:","code":"# Create a preprocessing recipe rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv() |>   prep(retain = TRUE)  autoplot(rec, n_samples = 10) #> Warning: Could not extract 'before' data for comparison. #> ℹ Showing processed data only. #> ✖ ℹ In argument: `dplyr::all_of(res)`. Caused by error in `dplyr::all_of()`: ! #>   Can't subset elements that don't exist. ✖ Elements `transmittance` and #>   `channel` don't exist."},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"summary-statistics-view","dir":"Articles","previous_headings":"Visualizing Preprocessing Effects","what":"Summary statistics view","title":"Data Organization and Diagnostic Plots","text":"","code":"autoplot(rec, which = \"summary\", n_samples = 50)"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"comparing-preprocessing-strategies","dir":"Articles","previous_headings":"","what":"Comparing Preprocessing Strategies","title":"Data Organization and Diagnostic Plots","text":"Use plot_measure_comparison() compare different preprocessing approaches side--side:","code":"# Define different preprocessing strategies base_rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel))  # Strategy 1: Just SNV snv_rec <- base_rec |>   step_measure_snv() |>   prep(retain = TRUE)  # Strategy 2: Savitzky-Golay + SNV sg_snv_rec <- base_rec |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv() |>   prep(retain = TRUE)  # Strategy 3: MSC msc_rec <- base_rec |>   step_measure_msc() |>   prep(retain = TRUE)  # Compare all three plot_measure_comparison(   \"SNV\" = snv_rec,   \"SG + SNV\" = sg_snv_rec,   \"MSC\" = msc_rec,   n_samples = 15 )"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"summary-comparison","dir":"Articles","previous_headings":"Comparing Preprocessing Strategies","what":"Summary comparison","title":"Data Organization and Diagnostic Plots","text":"cleaner comparison, use summary_only = TRUE:","code":"plot_measure_comparison(   \"SNV\" = snv_rec,   \"SG + SNV\" = sg_snv_rec,   \"MSC\" = msc_rec,   n_samples = 50,   summary_only = TRUE )"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"summary-plot-for-processed-data","dir":"Articles","previous_headings":"","what":"Summary Plot for Processed Data","title":"Data Organization and Diagnostic Plots","text":"measure_plot_summary() function creates publication-ready summary plots:  Show full range show_range = TRUE:","code":"baked <- bake(sg_snv_rec, new_data = NULL) measure_plot_summary(baked) measure_plot_summary(baked, show_range = TRUE)"},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"best-practices","dir":"Articles","previous_headings":"","what":"Best Practices","title":"Data Organization and Diagnostic Plots","text":"Always check recipe check_measure_recipe() running long preprocessing pipelines Use measure_identify_columns() understand data structure building recipes Assign roles explicitly ID columns, metadata, special sample types Visualize stage - use autoplot() verify preprocessing effects Compare strategies plot_measure_comparison() committing preprocessing approach","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/roles-diagnostics.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Data Organization and Diagnostic Plots","text":"See vignette(\"preprocessing\") details preprocessing steps See vignette(\"recipes\") integration tidymodels workflows Explore hyperparameter tuning preprocessing steps tune","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Case Study: Bioreactor Glucose Prediction","text":"vignette demonstrates complete chemometric modeling workflow using measure. ’ll predict glucose concentration bioreactors using Raman spectroscopy data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"the-dataset","dir":"Articles","previous_headings":"","what":"The dataset","title":"Case Study: Bioreactor Glucose Prediction","text":"glucose_bioreactors dataset contains Raman spectra bioreactor experiments described Kuhn Johnson’s Feature Engineering Selection (2020). dataset : - 2,651 spectral channels (Raman wavenumbers) - glucose: target variable predict - day: sampling day (1-14) - batch_id batch_sample: reactor identifiers","code":"data(glucose_bioreactors)  # Small-scale bioreactors (15 reactors, 14 days) dim(bioreactors_small) #> [1]  210 2655  # Large-scale bioreactors (3 reactors, 14 days) dim(bioreactors_large) #> [1]   42 2655"},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"exploratory-visualization","dir":"Articles","previous_headings":"","what":"Exploratory visualization","title":"Case Study: Bioreactor Glucose Prediction","text":"Let’s visualize spectra small-scale reactors:","code":"# Get spectral column names (numeric wavenumbers) spec_cols <- names(bioreactors_small)[sapply(names(bioreactors_small), function(x) !is.na(suppressWarnings(as.numeric(x))))]  # Convert a few samples to long format for plotting viz_data <- bioreactors_small |>   slice(1:10) |>   mutate(sample_id = row_number()) |>   select(sample_id, glucose, all_of(spec_cols[1:500])) |>  # First 500 channels   pivot_longer(     cols = -c(sample_id, glucose),     names_to = \"wavenumber\",     values_to = \"intensity\"   ) |>   mutate(wavenumber = as.numeric(wavenumber))  ggplot(viz_data, aes(x = wavenumber, y = intensity, group = sample_id, color = glucose)) +   geom_line(alpha = 0.7) +   scale_color_viridis_c() +   labs(     x = \"Wavenumber\",     y = \"Intensity\",     title = \"Raman Spectra from Small-Scale Bioreactors\",     subtitle = \"Color indicates glucose concentration\",     color = \"Glucose\"   ) +   theme_minimal()"},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"building-a-preprocessing-recipe","dir":"Articles","previous_headings":"","what":"Building a preprocessing recipe","title":"Case Study: Bioreactor Glucose Prediction","text":"Raman spectroscopy, typical preprocessing pipeline includes: Smoothing reduce noise Baseline correction (via derivatives) Normalization instrument variations","code":"# Use first 500 spectral columns for faster example spec_cols_subset <- spec_cols[1:500] wavenumbers <- as.numeric(spec_cols_subset)  # Prepare training data train_data <- bioreactors_small |>   select(glucose, day, batch_id, all_of(spec_cols_subset))  # Create preprocessing recipe rec <- recipe(glucose ~ ., data = train_data) |>   # Don't use day and batch_id as predictors   update_role(day, batch_id, new_role = \"id\") |>   # Convert wide spectral columns to internal format   step_measure_input_wide(     all_of(spec_cols_subset),     location_values = wavenumbers   ) |>   # Savitzky-Golay smoothing + first derivative   step_measure_savitzky_golay(     window_side = 7,     differentiation_order = 1   ) |>   # Standard Normal Variate normalization   step_measure_snv() |>   # Convert back to wide format   step_measure_output_wide(prefix = \"raman_\")  rec #>  #> ── Recipe ────────────────────────────────────────────────────────────────────── #>  #> ── Inputs #> Number of variables by role #> outcome:     1 #> predictor: 500 #> id:          2 #>  #> ── Operations #> • Collate wide analytical measurements: all_of(spec_cols_subset) #> Savitzky-Golay preprocessing on  #> SNV transformation on #> • Restructure analytical measurements to wide format: \"<internal data>\""},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"preparing-the-data","dir":"Articles","previous_headings":"","what":"Preparing the data","title":"Case Study: Bioreactor Glucose Prediction","text":"preprocessed data fewer columns : - day batch_id columns preserved ID columns - 500 spectral columns transformed renamed prefix raman_","code":"# Prep the recipe (learns parameters from training data) rec_prepped <- prep(rec)  # Bake to get preprocessed data train_processed <- bake(rec_prepped, new_data = NULL)  # Check dimensions dim(train_processed) #> [1] 210 489"},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"visualize-preprocessed-spectra","dir":"Articles","previous_headings":"","what":"Visualize preprocessed spectra","title":"Case Study: Bioreactor Glucose Prediction","text":"","code":"# Get preprocessed spectral columns proc_cols <- names(train_processed)[grepl(\"^raman_\", names(train_processed))]  proc_viz <- train_processed |>   slice(1:10) |>   mutate(sample_id = row_number()) |>   select(sample_id, glucose, all_of(proc_cols)) |>   pivot_longer(     cols = starts_with(\"raman_\"),     names_to = \"feature\",     values_to = \"value\"   ) |>   mutate(wavenumber = as.numeric(gsub(\"raman_\", \"\", feature)))  ggplot(proc_viz, aes(x = wavenumber, y = value, group = sample_id, color = glucose)) +   geom_line(alpha = 0.7) +   scale_color_viridis_c() +   labs(     x = \"Wavenumber\",     y = \"Preprocessed Intensity\",     title = \"Preprocessed Raman Spectra\",     subtitle = \"After SG derivative + SNV normalization\",     color = \"Glucose\"   ) +   theme_minimal()"},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"fitting-a-model","dir":"Articles","previous_headings":"","what":"Fitting a model","title":"Case Study: Bioreactor Glucose Prediction","text":"Now can fit model predict glucose:","code":"library(parsnip)  # Simple linear model (PLS would be better for real applications) lm_spec <- linear_reg() |>   set_engine(\"lm\")  # Fit model model <- lm_spec |>   fit(glucose ~ ., data = train_processed |> select(-day, -batch_id))  # Training performance train_preds <- predict(model, train_processed) |>   bind_cols(train_processed |> select(glucose))  train_preds |>   summarize(     rmse = sqrt(mean((glucose - .pred)^2)),     r_squared = cor(glucose, .pred)^2   ) #> # A tibble: 1 × 2 #>       rmse r_squared #>      <dbl>     <dbl> #> 1 1.76e-12         1"},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"applying-to-new-data","dir":"Articles","previous_headings":"","what":"Applying to new data","title":"Case Study: Bioreactor Glucose Prediction","text":"key advantage recipes framework consistent preprocessing new data:","code":"# Prepare test data from large-scale bioreactors test_data <- bioreactors_large |>   select(glucose, day, batch_id, all_of(spec_cols_subset))  # Apply the same preprocessing test_processed <- bake(rec_prepped, new_data = test_data)  # Predict test_preds <- predict(model, test_processed) |>   bind_cols(test_processed |> select(glucose, batch_id, day)) #> Warning in predict.lm(object = object$fit, newdata = new_data, type = #> \"response\", : prediction from rank-deficient fit; consider predict(., #> rankdeficient=\"NA\")  # Plot predictions vs actual ggplot(test_preds, aes(x = glucose, y = .pred, color = batch_id)) +   geom_point(alpha = 0.7) +   geom_abline(slope = 1, intercept = 0, linetype = \"dashed\") +   labs(     x = \"Actual Glucose\",     y = \"Predicted Glucose\",     title = \"Model Performance on Large-Scale Bioreactors\",     color = \"Reactor\"   ) +   theme_minimal()"},{"path":"https://jameshwade.github.io/measure/dev/articles/sec-analysis-example.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Case Study: Bioreactor Glucose Prediction","text":"case study demonstrated: Loading exploring spectral data bioreactors Building preprocessing recipe measure steps Fitting model preprocessed training data Applying consistent preprocessing new data Key takeaways: recipe framework ensures identical preprocessing training test data step_measure_input_wide() handles conversion many spectral columns Processing steps like Savitzky-Golay SNV remove unwanted variation step_measure_output_wide() produces modeling-ready data real applications, consider: Using PLS ridge regression high-dimensional spectral data Tuning preprocessing parameters cross-validation Validating truly independent test sets","code":""},{"path":"https://jameshwade.github.io/measure/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"James Wade. Author, maintainer. Max Kuhn. Contributor.","code":""},{"path":"https://jameshwade.github.io/measure/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Wade J (2025). measure: Recipes-Style Interface Tidymodels Analytical Measurements. R package version 0.0.1.9000, https://jameshwade.github.io/measure/.","code":"@Manual{,   title = {measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements},   author = {James Wade},   year = {2025},   note = {R package version 0.0.1.9000},   url = {https://jameshwade.github.io/measure/}, }"},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"measure extends tidymodels preprocessing steps analytical measurement data spectroscopy, chromatography, instrument-generated signals. provides recipes-style interface common spectral preprocessing techniques. measure helps : Convert measurement data wide long formats internal representation Preprocess spectra using techniques like smoothing, derivatives, normalization Transform data back wide long format modeling visualization","code":""},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"can install development version measure GitHub:","code":"# install.packages(\"pak\") pak::pak(\"JamesHWade/measure\")"},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"measure workflow follows familiar recipes pattern: define recipe, add steps, prep, bake.","code":"library(measure) library(recipes) library(ggplot2)  # NIR spectroscopy data for predicting meat composition data(meats_long) head(meats_long) #> # A tibble: 6 × 6 #>      id water   fat protein channel transmittance #>   <int> <dbl> <dbl>   <dbl>   <int>         <dbl> #> 1     1  60.5  22.5    16.7       1          2.62 #> 2     1  60.5  22.5    16.7       2          2.62 #> 3     1  60.5  22.5    16.7       3          2.62 #> 4     1  60.5  22.5    16.7       4          2.62 #> 5     1  60.5  22.5    16.7       5          2.62 #> 6     1  60.5  22.5    16.7       6          2.62"},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"building-a-preprocessing-recipe","dir":"","previous_headings":"Usage","what":"Building a preprocessing recipe","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"","code":"rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   # Assign sample ID role (not used as predictor)   update_role(id, new_role = \"id\") |>   # Convert long-format measurements to internal representation   step_measure_input_long(transmittance, location = vars(channel)) |>   # Apply Savitzky-Golay smoothing with first derivative   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   # Standard Normal Variate normalization   step_measure_snv() |>   # Convert back to wide format for modeling   step_measure_output_wide(prefix = \"nir_\")"},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"preparing-and-applying-the-recipe","dir":"","previous_headings":"Usage","what":"Preparing and applying the recipe","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"","code":"# Prep learns any parameters from training data prepped <- prep(rec)  # Bake applies the transformations processed <- bake(prepped, new_data = NULL)  # Result is ready for modeling processed[1:5, 1:8] #> # A tibble: 5 × 8 #>      id water   fat protein  nir_01  nir_02  nir_03  nir_04 #>   <int> <dbl> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> #> 1     1  60.5  22.5    16.7 -0.126  -0.110  -0.0928 -0.0745 #> 2     2  46    40.1    13.5  0.0184  0.0381  0.0601  0.0841 #> 3     3  71     8.4    20.5  0.105   0.114   0.125   0.136  #> 4     4  72.8   5.9    20.7  0.0716  0.0786  0.0871  0.0974 #> 5     5  58.3  25.5    15.5 -0.132  -0.118  -0.101  -0.0817"},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"visualizing-the-preprocessing","dir":"","previous_headings":"Usage","what":"Visualizing the preprocessing","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"","code":"# Get data at intermediate step (before output conversion) rec_for_viz <- recipe(water + fat + protein ~ ., data = meats_long) |> update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_savitzky_golay(window_side = 5, differentiation_order = 1) |>   step_measure_snv()  processed_long <- bake(prep(rec_for_viz), new_data = NULL)  # Extract and plot a few spectra library(tidyr) library(dplyr)  plot_data <- processed_long |>   slice(1:10) |>   mutate(sample_id = row_number()) |>   unnest(.measures)  ggplot(plot_data, aes(x = location, y = value, group = sample_id, color = factor(sample_id))) +   geom_line(alpha = 0.7) +   labs(     x = \"Channel\",     y = \"Preprocessed Signal\",     title = \"NIR Spectra After Preprocessing\",     subtitle = \"Savitzky-Golay first derivative + SNV normalization\",     color = \"Sample\"   ) +   theme_minimal() +   theme(legend.position = \"none\")"},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"learning-more","dir":"","previous_headings":"","what":"Learning more","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"Getting Started - comprehensive introduction measure Preprocessing Techniques - Deep dive available preprocessing methods","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"included-datasets","dir":"","previous_headings":"Datasets","what":"Included Datasets","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"package includes datasets examples testing:","code":"# Load datasets data(meats_long) data(glucose_bioreactors)  # loads bioreactors_small and bioreactors_large data(hplc_chromatograms) data(sec_chromatograms) data(sec_calibration) data(maldi_spectra)"},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"external-data-sources","dir":"","previous_headings":"Datasets","what":"External Data Sources","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"additional test data beyond ’s included measure, sources provide publicly available analytical measurement data: R Packages Spectral Data: Online Repositories: Mendeley Data - Search “spectroscopy”, “chromatography”, “mass spectrometry” Zenodo - Open science data repository Kaggle Datasets - Community-contributed datasets NIST Chemistry WebBook - Reference spectra (IR, MS, UV-Vis) SDBS - Spectral Database Organic Compounds (NMR, IR, MS) Domain-Specific Databases:","code":"# Example: Load NIRsoil from prospectr # install.packages(\"prospectr\") data(NIRsoil, package = \"prospectr\")"},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"related-packages","dir":"","previous_headings":"","what":"Related packages","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"measure builds tidymodels ecosystem: recipes - foundation preprocessing pipelines parsnip - Unified modeling interface workflows - Bundle preprocessing modeling tune - Hyperparameter tuning (works measure’s tunable steps!) spectral analysis R, might also find packages useful: prospectr - Spectral preprocessing functions ChemoSpec - Exploratory chemometrics mdatools - Multivariate data analysis","code":""},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"package active development. Contributions welcome! Please see contributing guidelines.","code":""},{"path":"https://jameshwade.github.io/measure/dev/index.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"A Recipes-Style Interface to Tidymodels for Analytical Measurements","text":"Please note measure project released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/align_max_shift.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for alignment steps — align_max_shift","title":"Parameters for alignment steps — align_max_shift","text":"align_max_shift() controls maximum shift allowed alignment. align_segment_length() controls segment size COW alignment.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/align_max_shift.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for alignment steps — align_max_shift","text":"","code":"align_max_shift(range = c(1L, 50L), trans = NULL)  align_segment_length(range = c(10L, 100L), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/align_max_shift.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for alignment steps — align_max_shift","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/align_max_shift.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for alignment steps — align_max_shift","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/align_max_shift.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for alignment steps — align_max_shift","text":"","code":"align_max_shift() #> Maximum Alignment Shift (quantitative) #> Range: [1, 50] align_segment_length() #> Alignment Segment Length (quantitative) #> Range: [10, 100]"},{"path":"https://jameshwade.github.io/measure/dev/reference/autoplot-measure.html","id":null,"dir":"Reference","previous_headings":"","what":"Autoplot Methods for Measure Objects — autoplot-measure","title":"Autoplot Methods for Measure Objects — autoplot-measure","text":"Create ggplot2 visualizations spectral/chromatographic data stored measure objects.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/autoplot-measure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Autoplot Methods for Measure Objects — autoplot-measure","text":"","code":"# S3 method for class 'measure_tbl' autoplot(object, ...)  # S3 method for class 'measure_list' autoplot(object, summary = FALSE, max_spectra = 50, alpha = 0.3, ...)  # S3 method for class 'recipe' autoplot(object, n_samples = 10, which = c(\"before_after\", \"summary\"), ...)"},{"path":"https://jameshwade.github.io/measure/dev/reference/autoplot-measure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Autoplot Methods for Measure Objects — autoplot-measure","text":"object measure_tbl, measure_list, recipe object. ... Additional arguments passed specific plot types. summary Logical. TRUE, add mean +/- SD ribbon. Default FALSE. max_spectra Maximum number individual spectra plot. Default 50. Set NULL limit. alpha Transparency individual spectrum lines. Default 0.3. n_samples Number samples show /comparison. Default 10. comparison show: \"before_after\" (default) shows side--side /comparison, \"summary\" shows summary statistics (mean +/- SD) processed data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/autoplot-measure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Autoplot Methods for Measure Objects — autoplot-measure","text":"ggplot2 object.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/autoplot-measure.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Autoplot Methods for Measure Objects — autoplot-measure","text":"measure_tbl (single spectrum): Plots location vs value line measure_list (multiple spectra): Plots spectra optional summary ribbon Use summary = TRUE mean +/- SD ribbon Use max_spectra limit number individual lines recipe: Shows /comparison preprocessing Requires prepped recipe Use n_samples control number samples shown","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/autoplot-measure.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Autoplot Methods for Measure Objects — autoplot-measure","text":"","code":"if (FALSE) { # \\dontrun{ library(ggplot2)  # Single spectrum spec <- new_measure_tbl(location = 1:100, value = sin(1:100 / 10) + rnorm(100, sd = 0.1)) autoplot(spec)  # Multiple spectra with summary rec <- recipe(water ~ ., data = meats_long) |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep() baked <- bake(rec, new_data = NULL) autoplot(baked$.measures, summary = TRUE)  # Recipe before/after comparison rec <- recipe(water ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_snv() |>   prep() autoplot(rec, n_samples = 10) } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/baseline_lambda.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for baseline correction steps — baseline_lambda","title":"Parameters for baseline correction steps — baseline_lambda","text":"baseline_lambda() controls smoothness penalty ALS baseline correction. baseline_asymmetry() controls asymmetry parameter ALS. baseline_degree() controls polynomial degree baseline fitting.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/baseline_lambda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for baseline correction steps — baseline_lambda","text":"","code":"baseline_lambda(range = c(2, 9), trans = scales::transform_log10())  baseline_asymmetry(range = c(0.001, 0.1), trans = NULL)  baseline_degree(range = c(1L, 6L), trans = NULL)  baseline_half_window(range = c(5L, 100L), trans = NULL)  baseline_span(range = c(0.1, 0.9), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/baseline_lambda.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for baseline correction steps — baseline_lambda","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/baseline_lambda.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for baseline correction steps — baseline_lambda","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/baseline_lambda.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for baseline correction steps — baseline_lambda","text":"","code":"baseline_lambda() #> Baseline Smoothness (lambda) (quantitative) #> Transformer: log-10 [1e-100, Inf] #> Range (transformed scale): [2, 9] baseline_asymmetry() #> Baseline Asymmetry (p) (quantitative) #> Range: [0.001, 0.1] baseline_degree() #> Baseline Polynomial Degree (quantitative) #> Range: [1, 6] baseline_span() #> LOESS Span (quantitative) #> Range: [0.1, 0.9]"},{"path":"https://jameshwade.github.io/measure/dev/reference/bin_width.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for feature engineering and scatter correction — bin_width","title":"Parameters for feature engineering and scatter correction — bin_width","text":"bin_width() controls width bins spectral binning. emsc_degree() controls polynomial degree EMSC correction. osc_n_components() controls number orthogonal components OSC.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/bin_width.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for feature engineering and scatter correction — bin_width","text":"","code":"bin_width(range = c(1, 20), trans = NULL)  emsc_degree(range = c(0L, 4L), trans = NULL)  osc_n_components(range = c(1L, 10L), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/bin_width.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for feature engineering and scatter correction — bin_width","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/bin_width.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for feature engineering and scatter correction — bin_width","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/bin_width.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for feature engineering and scatter correction — bin_width","text":"","code":"bin_width() #> Bin Width (quantitative) #> Range: [1, 20] emsc_degree() #> EMSC Polynomial Degree (quantitative) #> Range: [0, 4] osc_n_components() #> Number of OSC Components (quantitative) #> Range: [1, 10]"},{"path":"https://jameshwade.github.io/measure/dev/reference/check_measure_recipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Measure Recipe Structure — check_measure_recipe","title":"Check Measure Recipe Structure — check_measure_recipe","text":"Validates recipe properly structured measure operations. Checks common issues like missing input steps, incompatible column types, role conflicts.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/check_measure_recipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Measure Recipe Structure — check_measure_recipe","text":"","code":"check_measure_recipe(recipe, strict = TRUE)"},{"path":"https://jameshwade.github.io/measure/dev/reference/check_measure_recipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Measure Recipe Structure — check_measure_recipe","text":"recipe recipe object validate. strict Logical. TRUE (default), returns errors tibble. FALSE, issues cli warnings returns recipe invisibly.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/check_measure_recipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Measure Recipe Structure — check_measure_recipe","text":"strict = TRUE, returns tibble columns: level Severity: \"error\", \"warning\", \"info\" check Name check triggered message message Description issue strict = FALSE, returns recipe invisibly printing warnings.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/check_measure_recipe.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check Measure Recipe Structure — check_measure_recipe","text":"following checks performed: Errors (cause failures): input step (step_measure_input_*) Output step input step Multiple input steps Warnings (may cause issues): output step (data stays internal format) Processing steps output step predictor columns identified Info (suggestions): Large number measurement columns (consider dimension reduction) ID column identified","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/check_measure_recipe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Measure Recipe Structure — check_measure_recipe","text":"","code":"if (FALSE) { # \\dontrun{ library(recipes)  # Check a properly structured recipe rec <- recipe(outcome ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_snv() |>   step_measure_output_wide()  check_measure_recipe(rec)  # Check a recipe with issues bad_rec <- recipe(outcome ~ ., data = my_data) |>   step_measure_snv()  # Missing input step!  check_measure_recipe(bad_rec) } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/data-organization.html","id":null,"dir":"Reference","previous_headings":"","what":"Data Organization and Role Assignment — data-organization","title":"Data Organization and Role Assignment — data-organization","text":"Functions automatically detecting column types analytical data assigning appropriate roles recipes.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/derivative_order.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for derivative steps — derivative_order","title":"Parameters for derivative steps — derivative_order","text":"derivative_order() controls order differentiation step_measure_derivative() (1 = first derivative, 2 = second derivative). derivative_gap() derivative_segment() control gap derivative (Norris-Williams) parameters step_measure_derivative_gap().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/derivative_order.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for derivative steps — derivative_order","text":"","code":"derivative_order(range = c(1L, 2L), trans = NULL)  derivative_gap(range = c(1L, 10L), trans = NULL)  derivative_segment(range = c(1L, 5L), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/derivative_order.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for derivative steps — derivative_order","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/derivative_order.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for derivative steps — derivative_order","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/derivative_order.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for derivative steps — derivative_order","text":"","code":"derivative_order() #> Derivative Order (quantitative) #> Range: [1, 2] derivative_gap() #> Derivative Gap (quantitative) #> Range: [1, 10] derivative_segment() #> Derivative Segment (quantitative) #> Range: [1, 5]"},{"path":"https://jameshwade.github.io/measure/dev/reference/diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Diagnostics and Visualization for Measure Data — diagnostics","title":"Diagnostics and Visualization for Measure Data — diagnostics","text":"Autoplot fortify methods visualizing spectral/chromatographic data recipe transformations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_measure_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"Find measure columns in a data frame — find_measure_cols","title":"Find measure columns in a data frame — find_measure_cols","text":"Finds columns data frame contain measurement data (.e., class measure_list).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_measure_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find measure columns in a data frame — find_measure_cols","text":"","code":"find_measure_cols(data)"},{"path":"https://jameshwade.github.io/measure/dev/reference/find_measure_cols.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find measure columns in a data frame — find_measure_cols","text":"data data frame.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_measure_cols.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find measure columns in a data frame — find_measure_cols","text":"Character vector column names containing measure data. Returns empty character vector measure columns found.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_measure_cols.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Find measure columns in a data frame — find_measure_cols","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  result <- bake(rec, new_data = NULL) find_measure_cols(result)  # \".measures\" #> [1] \".measures\""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_peaks_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"Find peaks columns in a data frame — find_peaks_cols","title":"Find peaks columns in a data frame — find_peaks_cols","text":"Find peaks columns data frame","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_peaks_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find peaks columns in a data frame — find_peaks_cols","text":"","code":"find_peaks_cols(data)"},{"path":"https://jameshwade.github.io/measure/dev/reference/find_peaks_cols.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find peaks columns in a data frame — find_peaks_cols","text":"data data frame.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/find_peaks_cols.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find peaks columns in a data frame — find_peaks_cols","text":"Character vector column names.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/fortify-measure.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Measure Objects to Data Frames for Plotting — fortify-measure","title":"Convert Measure Objects to Data Frames for Plotting — fortify-measure","text":"methods convert measure objects data frames suitable use ggplot2.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/fortify-measure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Measure Objects to Data Frames for Plotting — fortify-measure","text":"","code":"# S3 method for class 'measure_tbl' fortify(model, data = NULL, ...)  # S3 method for class 'measure_list' fortify(model, data = NULL, ...)"},{"path":"https://jameshwade.github.io/measure/dev/reference/fortify-measure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Measure Objects to Data Frames for Plotting — fortify-measure","text":"model measure_tbl measure_list object. data Ignored. Present compatibility generic. ... Additional arguments (currently unused).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/fortify-measure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Measure Objects to Data Frames for Plotting — fortify-measure","text":"tibble columns location value (measure_tbl) location, value, sample (measure_list).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/fortify-measure.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Measure Objects to Data Frames for Plotting — fortify-measure","text":"","code":"if (FALSE) { # \\dontrun{ library(ggplot2)  # Single spectrum spec <- new_measure_tbl(location = 1:100, value = rnorm(100)) ggplot(fortify(spec), aes(location, value)) + geom_line()  # Multiple spectra (from recipe output) rec <- recipe(water ~ ., data = meats_long) |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep() baked <- bake(rec, new_data = NULL) ggplot(fortify(baked$.measures), aes(location, value, group = sample)) +   geom_line(alpha = 0.5) } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/glucose_bioreactors.html","id":null,"dir":"Reference","previous_headings":"","what":"Raman Spectra Bioreactor Data — glucose_bioreactors","title":"Raman Spectra Bioreactor Data — glucose_bioreactors","text":"Kuhn Johnson (2013) used two data sets model glucose yeild large- small-scale bioreactors:","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/glucose_bioreactors.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Raman Spectra Bioreactor Data — glucose_bioreactors","text":"Kuhn Johnson (2020), Feature Engineering Selection, Chapman Hall/CRC . https://bookdown.org/max/FES/ https://github.com/topepo/FES","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/glucose_bioreactors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Raman Spectra Bioreactor Data — glucose_bioreactors","text":"Two tibbles. , 2,651 columns whose names numbers measured assay values (names wave numbers). numeric column glucose outcome data, day number days bioreactor, batch_id reactor identifier (\"L\" large \"S\" small), batch_sample ID day.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/glucose_bioreactors.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Raman Spectra Bioreactor Data — glucose_bioreactors","text":"Fifteen small-scale (5 liters) bioreactors seeded cells monitored daily 14 days. Three large-scale bioreactors also seeded cells batch monitored daily 14 days. Samples collected day bioreactors glucose measured. goal create models data numerous small-scale bioreactors evaluate results can accurately predict happening large-scale bioreactors.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/glucose_bioreactors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Raman Spectra Bioreactor Data — glucose_bioreactors","text":"","code":"data(glucose_bioreactors) dim(bioreactors_small) #> [1]  210 2655"},{"path":"https://jameshwade.github.io/measure/dev/reference/has_measure_col.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if data frame has measure column(s) — has_measure_col","title":"Check if data frame has measure column(s) — has_measure_col","text":"Checks whether data frame contains least one measure column. recommended way validate data step functions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/has_measure_col.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if data frame has measure column(s) — has_measure_col","text":"","code":"has_measure_col(data)"},{"path":"https://jameshwade.github.io/measure/dev/reference/has_measure_col.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if data frame has measure column(s) — has_measure_col","text":"data data frame.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/has_measure_col.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if data frame has measure column(s) — has_measure_col","text":"Invisibly returns names measure columns found. Throws error measure columns found.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/has_measure_col.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if data frame has measure column(s) — has_measure_col","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  result <- bake(rec, new_data = NULL) has_measure_col(result)  # TRUE (returns invisibly)"},{"path":"https://jameshwade.github.io/measure/dev/reference/hplc_chromatograms.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated HPLC Chromatography Data — hplc_chromatograms","title":"Simulated HPLC Chromatography Data — hplc_chromatograms","text":"Simulated HPLC-UV chromatogram data demonstration chromatographic preprocessing peak analysis. dataset represents separation five phenolic compounds (caffeine, theobromine, catechin, epicatechin, quercetin) 20 samples varying concentrations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/hplc_chromatograms.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated HPLC Chromatography Data — hplc_chromatograms","text":"tibble 30,020 observations 8 variables: sample_id Integer sample identifier (1-20) time_min Retention time minutes (0-15, 0.01 min resolution) absorbance_mAU UV absorbance signal milli-absorbance units caffeine_conc True caffeine concentration (mg/L) calibration theobromine_conc True theobromine concentration (mg/L) catechin_conc True catechin concentration (mg/L) epicatechin_conc True epicatechin concentration (mg/L) quercetin_conc True quercetin concentration (mg/L)","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/hplc_chromatograms.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Simulated HPLC Chromatography Data — hplc_chromatograms","text":"Simulated data generated measure package. See data-raw/generate_datasets.R generation script.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/hplc_chromatograms.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulated HPLC Chromatography Data — hplc_chromatograms","text":"chromatograms include realistic features : Gaussian peak shapes compound-specific widths Baseline drift Instrumental noise Small retention time variations runs Concentration-dependent peak heights dataset useful demonstrating: Baseline correction methods Peak detection integration Calibration curve construction Retention time alignment peaks appear approximately retention times: Caffeine: ~2.5 min Theobromine: ~4.2 min Catechin: ~6.8 min Epicatechin: ~9.1 min Quercetin: ~12.3 min","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/hplc_chromatograms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulated HPLC Chromatography Data — hplc_chromatograms","text":"","code":"data(hplc_chromatograms)  # View structure str(hplc_chromatograms) #> tibble [30,020 × 8] (S3: tbl_df/tbl/data.frame) #>  $ sample_id       : int [1:30020] 1 1 1 1 1 1 1 1 1 1 ... #>  $ time_min        : num [1:30020] 0 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 ... #>  $ absorbance_mAU  : num [1:30020] 6.39 7.14 11.21 9.25 5.82 ... #>  $ caffeine_conc   : num [1:30020] 141 141 141 141 141 ... #>  $ theobromine_conc: num [1:30020] 115 115 115 115 115 ... #>  $ catechin_conc   : num [1:30020] 47.2 47.2 47.2 47.2 47.2 ... #>  $ epicatechin_conc: num [1:30020] 93.1 93.1 93.1 93.1 93.1 ... #>  $ quercetin_conc  : num [1:30020] 45.7 45.7 45.7 45.7 45.7 ...  # Get a single chromatogram library(dplyr) chrom_1 <- hplc_chromatograms |> filter(sample_id == 1)  # Plot (if ggplot2 available) if (requireNamespace(\"ggplot2\", quietly = TRUE)) {   library(ggplot2)   ggplot(chrom_1, aes(x = time_min, y = absorbance_mAU)) +     geom_line() +     labs(x = \"Retention Time (min)\", y = \"Absorbance (mAU)\",          title = \"HPLC Chromatogram\") }"},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Test if object is a measure list — is_measure_list","title":"Test if object is a measure list — is_measure_list","text":"Test object measure list","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test if object is a measure list — is_measure_list","text":"","code":"is_measure_list(x)"},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test if object is a measure list — is_measure_list","text":"x Object test.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test if object is a measure list — is_measure_list","text":"Logical indicating x inherits measure_list.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test if object is a measure list — is_measure_list","text":"","code":"# After using step_measure_input_*, the .measures column is a measure_list library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  result <- bake(rec, new_data = NULL) is_measure_list(result$.measures) #> [1] TRUE"},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Test if object is a measure tibble — is_measure_tbl","title":"Test if object is a measure tibble — is_measure_tbl","text":"Test object measure tibble","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test if object is a measure tibble — is_measure_tbl","text":"","code":"is_measure_tbl(x)"},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_tbl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test if object is a measure tibble — is_measure_tbl","text":"x Object test.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_tbl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test if object is a measure tibble — is_measure_tbl","text":"Logical indicating x inherits measure_tbl.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_measure_tbl.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test if object is a measure tibble — is_measure_tbl","text":"","code":"# Create a measure tibble mt <- measure:::new_measure_tbl(location = 1:5, value = rnorm(5)) is_measure_tbl(mt) #> [1] TRUE  # Regular tibbles are not measure tibbles is_measure_tbl(tibble::tibble(location = 1:5, value = rnorm(5))) #> [1] FALSE"},{"path":"https://jameshwade.github.io/measure/dev/reference/is_peaks_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Test if object is a peaks list — is_peaks_list","title":"Test if object is a peaks list — is_peaks_list","text":"Test object peaks list","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_peaks_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test if object is a peaks list — is_peaks_list","text":"","code":"is_peaks_list(x)"},{"path":"https://jameshwade.github.io/measure/dev/reference/is_peaks_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test if object is a peaks list — is_peaks_list","text":"x Object test.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/is_peaks_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test if object is a peaks list — is_peaks_list","text":"Logical.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/maldi_spectra.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated MALDI-TOF Mass Spectrometry Data — maldi_spectra","title":"Simulated MALDI-TOF Mass Spectrometry Data — maldi_spectra","text":"Simulated MALDI-TOF (Matrix-Assisted Laser Desorption/Ionization Time--Flight) mass spectrometry data demonstration mass spectral preprocessing. dataset represents protein/peptide analysis four experimental groups four replicates .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/maldi_spectra.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated MALDI-TOF Mass Spectrometry Data — maldi_spectra","text":"tibble 304,016 observations 5 variables: sample_id Sample identifier combining group replicate group Experimental group (\"Control\", \"Treatment_A\", \"Treatment_B\", \"Treatment_C\") replicate Replicate number (1-4) mz Mass--charge ratio (m/z) Daltons (1000-20000 Da) intensity Signal intensity (arbitrary units)","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/maldi_spectra.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Simulated MALDI-TOF Mass Spectrometry Data — maldi_spectra","text":"Simulated data generated measure package. See data-raw/generate_datasets.R generation script.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/maldi_spectra.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulated MALDI-TOF Mass Spectrometry Data — maldi_spectra","text":"MALDI-TOF soft ionization technique commonly used analyzing biomolecules proteins, peptides, polymers. technique provides mass--charge (m/z) ratios can used identification quantification. spectra include realistic features : Multiple peptide/protein peaks different m/z values Baseline variation Chemical noise Peak width proportional m/z (resolution effects) Replicate variation dataset useful demonstrating: Baseline correction methods Peak detection mass spectra Normalization samples Differential analysis groups group characteristic peak pattern: Control: Peptides m/z ~1200, 1450, 1800, 2200, 3500, 5800, 8400, 12000 Treatment_A: Peptides m/z ~1100, 1650, 2100, 2800, 4200, 6500, 9200, 14000 Treatment_B: Proteins m/z ~2500, 4000, 5500, 8000, 11000, 15000, 18000 Treatment_C: Peptides m/z ~1050, 1280, 1520, 1890, 2340, 2980, 3650, 4500 m/z resolution approximately 500 ppm (parts per million), typical linear MALDI-TOF instruments. Note simulated spectra include baseline noise minor peaks addition characteristic peaks listed .","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/maldi_spectra.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulated MALDI-TOF Mass Spectrometry Data — maldi_spectra","text":"","code":"data(maldi_spectra)  # View structure str(maldi_spectra) #> tibble [304,016 × 5] (S3: tbl_df/tbl/data.frame) #>  $ sample_id: chr [1:304016] \"Control_1\" \"Control_1\" \"Control_1\" \"Control_1\" ... #>  $ group    : chr [1:304016] \"Control\" \"Control\" \"Control\" \"Control\" ... #>  $ replicate: int [1:304016] 1 1 1 1 1 1 1 1 1 1 ... #>  $ mz       : num [1:304016] 1000 1001 1002 1003 1004 ... #>  $ intensity: num [1:304016] 33.5 56.6 70.1 31.5 37.2 ...  # Get unique samples unique(maldi_spectra$sample_id) #>  [1] \"Control_1\"     \"Control_2\"     \"Control_3\"     \"Control_4\"     #>  [5] \"Treatment_A_1\" \"Treatment_A_2\" \"Treatment_A_3\" \"Treatment_A_4\" #>  [9] \"Treatment_B_1\" \"Treatment_B_2\" \"Treatment_B_3\" \"Treatment_B_4\" #> [13] \"Treatment_C_1\" \"Treatment_C_2\" \"Treatment_C_3\" \"Treatment_C_4\"  # Get one spectrum library(dplyr) spec_1 <- maldi_spectra |> filter(sample_id == \"Control_1\")  # Plot (if ggplot2 available) if (requireNamespace(\"ggplot2\", quietly = TRUE)) {   library(ggplot2)   ggplot(spec_1, aes(x = mz, y = intensity)) +     geom_line() +     labs(x = \"m/z (Da)\", y = \"Intensity\",          title = \"MALDI-TOF Mass Spectrum\") }   # Compare groups if (requireNamespace(\"ggplot2\", quietly = TRUE)) {   # Get one replicate per group   comparison <- maldi_spectra |>     filter(replicate == 1)    ggplot(comparison, aes(x = mz, y = intensity, color = group)) +     geom_line(alpha = 0.7) +     facet_wrap(~group, ncol = 1) +     labs(x = \"m/z (Da)\", y = \"Intensity\",          title = \"MALDI-TOF Spectra by Group\") }"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":null,"dir":"Reference","previous_headings":"","what":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"measure package provides preprocessing steps analytical measurement data (spectroscopy, chromatography, etc.) within tidymodels framework.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":"input-steps","dir":"Reference","previous_headings":"","what":"Input Steps","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"Convert raw data measure's internal format: step_measure_input_wide(): data measurements columns step_measure_input_long(): data measurements rows","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":"processing-steps","dir":"Reference","previous_headings":"","what":"Processing Steps","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"Apply spectral preprocessing transformations: step_measure_savitzky_golay(): Smoothing derivatives step_measure_snv(): Standard Normal Variate normalization step_measure_msc(): Multiplicative Scatter Correction step_measure_map(): Custom transformations","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":"sample-wise-normalization","dir":"Reference","previous_headings":"","what":"Sample-wise Normalization","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"Normalize spectrum independently: step_measure_normalize_sum(): Divide sum step_measure_normalize_max(): Divide maximum step_measure_normalize_range(): Scale 0-1 range step_measure_normalize_vector(): L2 normalization step_measure_normalize_auc(): Divide area curve step_measure_normalize_peak(): Normalize region (tunable)","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":"variable-wise-scaling","dir":"Reference","previous_headings":"","what":"Variable-wise Scaling","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"Scale across samples location (learns training data): step_measure_center(): Mean centering step_measure_scale_auto(): Z-score normalization step_measure_scale_pareto(): Pareto scaling step_measure_scale_range(): Range scaling step_measure_scale_vast(): VAST scaling","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":"output-steps","dir":"Reference","previous_headings":"","what":"Output Steps","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"Convert back modeling-ready format: step_measure_output_wide(): Back wide format step_measure_output_long(): Back long format","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/measure-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"measure: A Recipes-Style Interface to Tidymodels for Analytical Measurements — measure-package","text":"Maintainer: James Wade github@jameshwade.com (ORCID) contributors: Max Kuhn max@posit.co (ORCID) [contributor]","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_patterns.html","id":null,"dir":"Reference","previous_headings":"","what":"Common column naming patterns for analytical data — measure_column_patterns","title":"Common column naming patterns for analytical data — measure_column_patterns","text":"Named list regex patterns detecting measurement column types. Used measure_identify_columns() auto-detection. Users can extend modify patterns pass detection functions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_patterns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Common column naming patterns for analytical data — measure_column_patterns","text":"","code":"measure_column_patterns"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_patterns.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Common column naming patterns for analytical data — measure_column_patterns","text":"Named list regex patterns: wavenumber wn_ prefix IR wavenumber (cm^-1) wavelength nm_ prefix wavelength (nm) retention_time rt_ prefix chromatography retention time mz mz_ prefix mass--charge ratio (MS) ppm ppm_ prefix NMR chemical shift channel ch_ prefix numbered channels generic x_ prefix generic/unknown axis","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_patterns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Common column naming patterns for analytical data — measure_column_patterns","text":"","code":"# View default patterns measure_column_patterns #> $wavenumber #> [1] \"^wn_\" #>  #> $wavelength #> [1] \"^nm_\" #>  #> $retention_time #> [1] \"^rt_\" #>  #> $mz #> [1] \"^mz_\" #>  #> $ppm #> [1] \"^ppm_\" #>  #> $channel #> [1] \"^ch_\" #>  #> $generic #> [1] \"^x_\" #>   # Create custom patterns my_patterns <- c(measure_column_patterns, list(custom = \"^my_prefix_\"))"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Column Summary by Type — measure_column_summary","title":"Get Column Summary by Type — measure_column_summary","text":"Summarizes columns detected type, useful understanding structure analytical datasets.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Column Summary by Type — measure_column_summary","text":"","code":"measure_column_summary(data, patterns = measure_column_patterns)"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Column Summary by Type — measure_column_summary","text":"data data frame analyze. patterns Named list regex patterns. Defaults measure_column_patterns.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Column Summary by Type — measure_column_summary","text":"tibble summarizing detected type: type Column type n_columns Number columns type example_cols First 3 column names type","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_column_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Column Summary by Type — measure_column_summary","text":"","code":"df <- data.frame(   id = 1:5,   wn_1000 = rnorm(5), wn_1001 = rnorm(5), wn_1002 = rnorm(5),   concentration = rnorm(5) ) measure_column_summary(df) #> # A tibble: 2 × 3 #>   type       n_columns example_cols              #>   <chr>          <int> <chr>                     #> 1 wavenumber         3 wn_1000, wn_1001, wn_1002 #> 2 other              2 id, concentration"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_identify_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify Column Types in Analytical Data — measure_identify_columns","title":"Identify Column Types in Analytical Data — measure_identify_columns","text":"Automatically detects column types data frame based naming conventions common analytical chemistry. helps set recipes appropriate roles different column types.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_identify_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify Column Types in Analytical Data — measure_identify_columns","text":"","code":"measure_identify_columns(data, patterns = measure_column_patterns)"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_identify_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify Column Types in Analytical Data — measure_identify_columns","text":"data data frame analyze. patterns Named list regex patterns column detection. Defaults measure_column_patterns. Custom patterns can provided named list names become detected type.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_identify_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify Column Types in Analytical Data — measure_identify_columns","text":"tibble columns: column Column name type Detected type (pattern names, \"\" match) suggested_role Suggested recipe role based type n_values Number non-NA values class R class column","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_identify_columns.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Identify Column Types in Analytical Data — measure_identify_columns","text":"Column type detection uses following naming conventions: Columns matching pattern classified \"\" suggested either \"outcome\" (numeric), \"id\" (character/factor unique values), \"predictor\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_identify_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify Column Types in Analytical Data — measure_identify_columns","text":"","code":"# Wide format spectral data df <- data.frame(   sample_id = 1:5,   outcome = rnorm(5),   wn_1000 = rnorm(5),   wn_1001 = rnorm(5),   wn_1002 = rnorm(5) ) measure_identify_columns(df) #> # A tibble: 5 × 5 #>   column    type       suggested_role n_values class   #>   <chr>     <chr>      <chr>             <int> <chr>   #> 1 sample_id other      predictor             5 integer #> 2 outcome   other      outcome               5 numeric #> 3 wn_1000   wavenumber predictor             5 numeric #> 4 wn_1001   wavenumber predictor             5 numeric #> 5 wn_1002   wavenumber predictor             5 numeric  # Chromatography data df2 <- data.frame(   id = letters[1:3],   concentration = c(1.2, 2.3, 3.4),   rt_0.5 = rnorm(3),   rt_1.0 = rnorm(3),   rt_1.5 = rnorm(3) ) measure_identify_columns(df2) #> # A tibble: 5 × 5 #>   column        type           suggested_role n_values class     #>   <chr>         <chr>          <chr>             <int> <chr>     #> 1 id            other          id                    3 character #> 2 concentration other          outcome               3 numeric   #> 3 rt_0.5        retention_time predictor             3 numeric   #> 4 rt_1.0        retention_time predictor             3 numeric   #> 5 rt_1.5        retention_time predictor             3 numeric"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a Function to Each Sample's Measurements — measure_map","title":"Apply a Function to Each Sample's Measurements — measure_map","text":"measure_map() applies function sample's measurement data. function intended exploration prototyping, production pipelines. reproducible preprocessing, use step_measure_map() instead.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a Function to Each Sample's Measurements — measure_map","text":"","code":"measure_map(   .data,   .f,   .cols = NULL,   ...,   verbosity = 1L,   .error_call = rlang::caller_env() )"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a Function to Each Sample's Measurements — measure_map","text":".data data frame containing one measure_list columns. .f function formula apply sample's measurement tibble. function, used -. formula (e.g., ~ { .x$value <- log(.x$value); .x }), converted function using rlang::as_function(). .cols <tidy-select> Columns apply transformation . Defaults measure_list columns. ... Additional arguments passed .f. verbosity integer controlling output verbosity: 0: Silent - suppress messages output .f 1: Normal (default) - show output .f .error_call execution environment error reporting.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a Function to Each Sample's Measurements — measure_map","text":"data frame specified measure columns transformed.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":"intended-use-exploration-not-production","dir":"Reference","previous_headings":"","what":"Intended Use: Exploration, Not Production","title":"Apply a Function to Each Sample's Measurements — measure_map","text":"function designed interactive exploration debugging:   Unlike recipe steps, transformations applied measure_map() : Automatically applied new data Bundled workflows Reproducible across sessions","code":"# Good: Prototyping a new transformation baked_data |>   measure_map(~ { .x$value <- my_experimental_fn(.x$value); .x })  # Better: Once it works, put it in a recipe step recipe(...) |>   step_measure_map(my_experimental_fn) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":"function-requirements","dir":"Reference","previous_headings":"","what":"Function Requirements","title":"Apply a Function to Each Sample's Measurements — measure_map","text":"function .f must: Accept tibble location value columns Return tibble location value columns change number rows","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a Function to Each Sample's Measurements — measure_map","text":"","code":"library(recipes)  # First, get data in internal format rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  baked_data <- bake(rec, new_data = NULL)  # Explore a custom transformation result <- measure_map(baked_data, ~ {   # Subtract the minimum value from each spectrum   .x$value <- .x$value - min(.x$value)   .x })  # Once you're happy with it, use step_measure_map() in your recipe: # recipe(...) |> #   step_measure_map(~ { .x$value <- .x$value - min(.x$value); .x })"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map_safely.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a Function Safely to Each Sample's Measurements — measure_map_safely","title":"Apply a Function Safely to Each Sample's Measurements — measure_map_safely","text":"measure_map_safely() fault-tolerant version measure_map() captures errors instead stopping execution. useful exploring data may problematic samples.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map_safely.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a Function Safely to Each Sample's Measurements — measure_map_safely","text":"","code":"measure_map_safely(   .data,   .f,   .cols = NULL,   ...,   .otherwise = NULL,   .error_call = rlang::caller_env() )"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map_safely.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a Function Safely to Each Sample's Measurements — measure_map_safely","text":".data data frame containing one measure_list columns. .f function formula apply sample's measurement tibble. function, used -. formula (e.g., ~ { .x$value <- log(.x$value); .x }), converted function using rlang::as_function(). .cols <tidy-select> Columns apply transformation . Defaults measure_list columns. ... Additional arguments passed .f. .otherwise Value use .f fails sample. Default NULL, keeps original (untransformed) measurement. .error_call execution environment error reporting.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map_safely.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a Function Safely to Each Sample's Measurements — measure_map_safely","text":"list two elements: result: data frame transformations applied successful errors: tibble columns column, sample, error","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_map_safely.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a Function Safely to Each Sample's Measurements — measure_map_safely","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  baked_data <- bake(rec, new_data = NULL)  # A function that might fail for some samples risky_transform <- function(x) {   if (any(x$value < 0)) stop(\"Negative values not allowed\")   x$value <- log(x$value)   x }  # Errors are captured, not thrown result <- measure_map_safely(baked_data, risky_transform)  # Check which samples failed if (nrow(result$errors) > 0) {   print(result$errors) }"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_plot_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Summary Statistics for Measure Data — measure_plot_summary","title":"Plot Summary Statistics for Measure Data — measure_plot_summary","text":"Create summary plot showing mean +/- standard deviation across samples measurement location.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_plot_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Summary Statistics for Measure Data — measure_plot_summary","text":"","code":"measure_plot_summary(data, measure_col = NULL, show_range = FALSE)"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_plot_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Summary Statistics for Measure Data — measure_plot_summary","text":"data data frame measure column (.measures). measure_col Name measure column. NULL, auto-detected. show_range Logical. TRUE, also show min/max range. Default FALSE.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_plot_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Summary Statistics for Measure Data — measure_plot_summary","text":"ggplot2 object.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_plot_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Summary Statistics for Measure Data — measure_plot_summary","text":"","code":"if (FALSE) { # \\dontrun{ rec <- recipe(water ~ ., data = meats_long) |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_snv() |>   prep()  baked <- bake(rec, new_data = NULL) measure_plot_summary(baked) } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_summarize.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize Measurements Across Samples — measure_summarize","title":"Summarize Measurements Across Samples — measure_summarize","text":"measure_summarize() computes summary statistics measurement location across samples. useful understanding data, computing reference spectra, identifying outliers.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_summarize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize Measurements Across Samples — measure_summarize","text":"","code":"measure_summarize(   .data,   .cols = NULL,   .fns = list(mean = mean, sd = stats::sd),   na.rm = TRUE )"},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_summarize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize Measurements Across Samples — measure_summarize","text":".data data frame containing one measure_list columns. .cols <tidy-select> Columns summarize. Defaults measure_list columns. .fns named list summary functions. function accept numeric vector return single value. Default list(mean = mean, sd = sd). na.rm Logical. NA values removed? Default TRUE.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_summarize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize Measurements Across Samples — measure_summarize","text":"tibble one row per measurement location columns summary statistic.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_summarize.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Summarize Measurements Across Samples — measure_summarize","text":"function transform data; summarizes . Common uses: Mean spectrum: average spectrum across samples Reference spectrum: MSC-style corrections Variability: Standard deviation wavelength Quality control: Identify problematic wavelength regions","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/measure_summarize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarize Measurements Across Samples — measure_summarize","text":"","code":"library(recipes) library(ggplot2)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   prep()  baked_data <- bake(rec, new_data = NULL)  # Compute mean and SD at each wavelength summary_stats <- measure_summarize(baked_data) summary_stats #> # A tibble: 100 × 3 #>    location  mean    sd #>       <int> <dbl> <dbl> #>  1        1  2.81 0.411 #>  2        2  2.81 0.413 #>  3        3  2.81 0.416 #>  4        4  2.82 0.418 #>  5        5  2.82 0.421 #>  6        6  2.82 0.424 #>  7        7  2.83 0.426 #>  8        8  2.83 0.429 #>  9        9  2.83 0.432 #> 10       10  2.84 0.434 #> # ℹ 90 more rows  # Visualize mean spectrum with confidence band ggplot(summary_stats, aes(x = location)) +   geom_ribbon(aes(ymin = mean - sd, ymax = mean + sd), alpha = 0.3) +   geom_line(aes(y = mean)) +   labs(x = \"Channel\", y = \"Transmittance\", title = \"Mean Spectrum +/- 1 SD\")   # Custom summary functions measure_summarize(   baked_data,   .fns = list(     median = median,     q25 = function(x) quantile(x, 0.25),     q75 = function(x) quantile(x, 0.75)   ) ) #> # A tibble: 100 × 4 #>    location median   q25   q75 #>       <int>  <dbl> <dbl> <dbl> #>  1        1   2.75  2.51  3.01 #>  2        2   2.76  2.51  3.01 #>  3        3   2.76  2.51  3.01 #>  4        4   2.76  2.52  3.02 #>  5        5   2.76  2.52  3.03 #>  6        6   2.76  2.52  3.03 #>  7        7   2.76  2.52  3.04 #>  8        8   2.77  2.52  3.05 #>  9        9   2.77  2.52  3.05 #> 10       10   2.77  2.52  3.06 #> # ℹ 90 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/meats_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Fat, water and protein content of meat samples — meats_long","title":"Fat, water and protein content of meat samples — meats_long","text":"\"data recorded Tecator Infratec Food Feed Analyzer working wavelength range 850 - 1050 nm Near Infrared Transmission (NIT) principle. sample contains finely chopped pure meat different moisture, fat protein contents.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/meats_long.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fat, water and protein content of meat samples — meats_long","text":"meats_long tibble","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/meats_long.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fat, water and protein content of meat samples — meats_long","text":"results data used publication want mention instrument company name (Tecator) publication.  addition, please send preprint article Karin Thente, Tecator AB, Box 70, S-263 21 Hoganas, Sweden data available public domain responsibility original data source. data can redistributed long permission note attached.\" \"meat sample data consists 100 channel spectrum absorbances contents moisture (water), fat protein.  absorbance -log10 transmittance measured spectrometer. three contents, measured percent, determined analytic chemistry.\" Included meats data transformed long format ","code":"modeldata::meats %>%   rowid_to_column(var = \"id\") %>%   pivot_longer(cols = starts_with(\"x_\"),                names_to = \"channel\",                values_to = \"transmittance\") %>%   mutate(channel = str_extract(channel, \"[:digit:]+\") %>% as.integer())"},{"path":"https://jameshwade.github.io/measure/dev/reference/meats_long.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fat, water and protein content of meat samples — meats_long","text":"","code":"data(meats_long) str(meats_long) #> tibble [21,500 × 6] (S3: tbl_df/tbl/data.frame) #>  $ id           : int [1:21500] 1 1 1 1 1 1 1 1 1 1 ... #>  $ water        : num [1:21500] 60.5 60.5 60.5 60.5 60.5 60.5 60.5 60.5 60.5 60.5 ... #>  $ fat          : num [1:21500] 22.5 22.5 22.5 22.5 22.5 22.5 22.5 22.5 22.5 22.5 ... #>  $ protein      : num [1:21500] 16.7 16.7 16.7 16.7 16.7 16.7 16.7 16.7 16.7 16.7 ... #>  $ channel      : int [1:21500] 1 2 3 4 5 6 7 8 9 10 ... #>  $ transmittance: num [1:21500] 2.62 2.62 2.62 2.62 2.62 ..."},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new measure list — new_measure_list","title":"Create a new measure list — new_measure_list","text":"Constructor creating collection measurements suitable use list column data frame. element measure_tbl tibble location value columns.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new measure list — new_measure_list","text":"","code":"new_measure_list(x = list())"},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new measure list — new_measure_list","text":"x list measure_tbl objects tibbles location value columns.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new measure list — new_measure_list","text":"list class measure_list.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new measure list — new_measure_list","text":"","code":"# Create individual spectra spec1 <- new_measure_tbl(location = 1:10, value = rnorm(10)) spec2 <- new_measure_tbl(location = 1:10, value = rnorm(10))  # Combine into a measure_list specs <- new_measure_list(list(spec1, spec2)) specs #> A measure_list with 2 measurements #> Sizes: 10, 10 (10-10 points)"},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new measure tibble — new_measure_tbl","title":"Create a new measure tibble — new_measure_tbl","text":"Constructor creating single measurement object containing location (e.g., wavelength, retention time) value pairs.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new measure tibble — new_measure_tbl","text":"","code":"new_measure_tbl(location = double(), value = double())"},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_tbl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new measure tibble — new_measure_tbl","text":"location Numeric vector measurement locations (e.g., wavelengths, wavenumbers, retention times). value Numeric vector measurement values (e.g., absorbance, intensity, signal).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_tbl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new measure tibble — new_measure_tbl","text":"tibble class measure_tbl containing location value columns.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/new_measure_tbl.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new measure tibble — new_measure_tbl","text":"","code":"# Create a simple spectrum spec <- new_measure_tbl(   location = seq(1000, 1100, by = 10),   value = sin(seq(1000, 1100, by = 10) / 50) ) spec #> <measure_tbl [11 x 2]> #> # A tibble: 11 × 2 #>    location    value #>       <dbl>    <dbl> #>  1     1000  0.913   #>  2     1010  0.976   #>  3     1020  1.000   #>  4     1030  0.984   #>  5     1040  0.929   #>  6     1050  0.837   #>  7     1060  0.711   #>  8     1070  0.557   #>  9     1080  0.381   #> 10     1090  0.190   #> 11     1100 -0.00885"},{"path":"https://jameshwade.github.io/measure/dev/reference/outlier_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for quality control steps — outlier_threshold","title":"Parameters for quality control steps — outlier_threshold","text":"outlier_threshold() controls threshold outlier detection (standard deviation Mahalanobis distance units).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/outlier_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for quality control steps — outlier_threshold","text":"","code":"outlier_threshold(range = c(2, 5), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/outlier_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for quality control steps — outlier_threshold","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/outlier_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for quality control steps — outlier_threshold","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/outlier_threshold.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for quality control steps — outlier_threshold","text":"","code":"outlier_threshold() #> Outlier Threshold (quantitative) #> Range: [2, 5]"},{"path":"https://jameshwade.github.io/measure/dev/reference/peak_location_min.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for peak normalization — peak_location_min","title":"Parameters for peak normalization — peak_location_min","text":"peak_location_min() peak_location_max() define bounds reference region peak normalization. specified units location values measurement data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/peak_location_min.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for peak normalization — peak_location_min","text":"","code":"peak_location_min(range = c(0, 100), trans = NULL)  peak_location_max(range = c(0, 100), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/peak_location_min.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for peak normalization — peak_location_min","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/peak_location_min.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for peak normalization — peak_location_min","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/peak_location_min.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for peak normalization — peak_location_min","text":"","code":"peak_location_min() #> Peak Region Lower Bound (quantitative) #> Range: [0, 100] peak_location_max() #> Peak Region Upper Bound (quantitative) #> Range: [0, 100]"},{"path":"https://jameshwade.github.io/measure/dev/reference/plot_measure_comparison.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare Multiple Preprocessing Recipes — plot_measure_comparison","title":"Compare Multiple Preprocessing Recipes — plot_measure_comparison","text":"Visualize effect different preprocessing recipes side--side. Useful comparing different parameter settings preprocessing strategies.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/plot_measure_comparison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare Multiple Preprocessing Recipes — plot_measure_comparison","text":"","code":"plot_measure_comparison(..., data = NULL, n_samples = 5, summary_only = FALSE)"},{"path":"https://jameshwade.github.io/measure/dev/reference/plot_measure_comparison.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare Multiple Preprocessing Recipes — plot_measure_comparison","text":"... Named recipe objects compare. must prepped recipe. data Data apply recipes . NULL, uses training data first recipe. n_samples Number samples show. Default 5. summary_only TRUE, show summary statistics (mean +/- SD). Default FALSE shows individual spectra.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/plot_measure_comparison.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare Multiple Preprocessing Recipes — plot_measure_comparison","text":"ggplot2 object faceted comparison.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/plot_measure_comparison.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare Multiple Preprocessing Recipes — plot_measure_comparison","text":"","code":"if (FALSE) { # \\dontrun{ library(recipes) library(ggplot2)  # Compare SNV vs MSC preprocessing base_rec <- recipe(water ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel))  snv_rec <- base_rec |>   step_measure_snv() |>   prep()  msc_rec <- base_rec |>   step_measure_msc() |>   prep()  plot_measure_comparison(   \"SNV\" = snv_rec,   \"MSC\" = msc_rec,   n_samples = 10 ) } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. generics tunable","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/required_pkgs.recipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Set package dependencies — required_pkgs.step_measure_align_dtw","title":"Set package dependencies — required_pkgs.step_measure_align_dtw","text":"Set package dependencies","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/required_pkgs.recipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set package dependencies — required_pkgs.step_measure_align_dtw","text":"","code":"# S3 method for class 'step_measure_align_dtw' required_pkgs(x, ...)  # S3 method for class 'step_measure_align_ptw' required_pkgs(x, ...)  # S3 method for class 'step_measure_augment_noise' required_pkgs(x, ...)  # S3 method for class 'step_measure_augment_shift' required_pkgs(x, ...)  # S3 method for class 'step_measure_augment_scale' required_pkgs(x, ...)  # S3 method for class 'step_measure_integrals' required_pkgs(x, ...)  # S3 method for class 'step_measure_ratios' required_pkgs(x, ...)  # S3 method for class 'step_measure_moments' required_pkgs(x, ...)  # S3 method for class 'step_measure_bin' required_pkgs(x, ...)  # S3 method for class 'step_measure_mw_averages' required_pkgs(x, ...)  # S3 method for class 'step_measure_mw_fractions' required_pkgs(x, ...)  # S3 method for class 'step_measure_mw_distribution' required_pkgs(x, ...)  # S3 method for class 'step_measure_resample' required_pkgs(x, ...)  # S3 method for class 'step_measure_savitzky_golay' required_pkgs(x, ...)  # S3 method for class 'step_measure_emsc' required_pkgs(x, ...)  # S3 method for class 'step_measure_osc' required_pkgs(x, ...)  # S3 method for class 'step_measure_smooth_wavelet' required_pkgs(x, ...)"},{"path":"https://jameshwade.github.io/measure/dev/reference/required_pkgs.recipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set package dependencies — required_pkgs.step_measure_align_dtw","text":"x step object. ... used.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_calibration.html","id":null,"dir":"Reference","previous_headings":"","what":"SEC/GPC Calibration Standards Summary — sec_calibration","title":"SEC/GPC Calibration Standards Summary — sec_calibration","text":"Summary information polystyrene calibration standards used sec_chromatograms. Contains known molecular weights peak retention times needed construct calibration curve.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_calibration.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"SEC/GPC Calibration Standards Summary — sec_calibration","text":"tibble 5 observations 3 variables: standard Standard name (e.g., \"PS_1k\") mw Known molecular weight g/mol peak_time Peak elution time minutes","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_calibration.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"SEC/GPC Calibration Standards Summary — sec_calibration","text":"Simulated data generated measure package. See data-raw/generate_datasets.R generation script.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_calibration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"SEC/GPC Calibration Standards Summary — sec_calibration","text":"calibration curve SEC/GPC relates log(MW) retention time. simulated data: log10(MW) = 9.5 - 0.35 * time","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_calibration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SEC/GPC Calibration Standards Summary — sec_calibration","text":"","code":"data(sec_calibration)  # View calibration data sec_calibration #> # A tibble: 5 × 3 #>   standard     mw peak_time #>   <chr>     <dbl>     <dbl> #> 1 PS_1k      1000      18.6 #> 2 PS_5k      5000      16.6 #> 3 PS_20k    20000      14.9 #> 4 PS_100k  100000      12.9 #> 5 PS_500k  500000      10.9  # Create calibration curve (if ggplot2 available) if (requireNamespace(\"ggplot2\", quietly = TRUE)) {   library(ggplot2)   ggplot(sec_calibration, aes(x = peak_time, y = log10(mw))) +     geom_point(size = 3) +     geom_smooth(method = \"lm\", se = FALSE) +     labs(x = \"Peak Retention Time (min)\", y = \"log10(MW)\",          title = \"SEC Calibration Curve\") } #> `geom_smooth()` using formula = 'y ~ x'"},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_chromatograms.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated SEC/GPC Chromatography Data — sec_chromatograms","title":"Simulated SEC/GPC Chromatography Data — sec_chromatograms","text":"Simulated Size Exclusion Chromatography (SEC) / Gel Permeation Chromatography (GPC) data demonstration molecular weight analysis. dataset includes narrow polystyrene calibration standards polymer samples broad molecular weight distributions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_chromatograms.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated SEC/GPC Chromatography Data — sec_chromatograms","text":"tibble 7,510 observations 6 variables: sample_id Sample identifier (standard polymer name) sample_type Either \"standard\" \"sample\" elution_time Elution/retention time minutes ri_signal Refractive index detector signal (arbitrary units) known_mw Known weight-average molecular weight (g/mol) known_dispersity Known dispersity (Mw/Mn); ~1.05 standards","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_chromatograms.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Simulated SEC/GPC Chromatography Data — sec_chromatograms","text":"Simulated data generated measure package. See data-raw/generate_datasets.R generation script.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_chromatograms.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulated SEC/GPC Chromatography Data — sec_chromatograms","text":"SEC/GPC separates molecules hydrodynamic size, larger molecules eluting smaller ones. allows determination molecular weight distributions averages (Mn, Mw, Mz, dispersity). dataset useful demonstrating: Baseline correction chromatography Calibration curve construction using standards Molecular weight calculations (step_measure_mw_averages) Molecular weight distribution analysis dataset contains: Calibration Standards (narrow dispersity polystyrene): PS_1k: 1,000 g/mol PS_5k: 5,000 g/mol PS_20k: 20,000 g/mol PS_100k: 100,000 g/mol PS_500k: 500,000 g/mol Polymer Samples (broad distribution): Polymer_A Polymer_E varying Mw dispersity calibration relationship follows: log10(MW) = 9.5 - 0.35 * time","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/sec_chromatograms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulated SEC/GPC Chromatography Data — sec_chromatograms","text":"","code":"data(sec_chromatograms)  # View structure str(sec_chromatograms) #> tibble [7,510 × 6] (S3: tbl_df/tbl/data.frame) #>  $ sample_id       : chr [1:7510] \"PS_1k\" \"PS_1k\" \"PS_1k\" \"PS_1k\" ... #>  $ sample_type     : chr [1:7510] \"standard\" \"standard\" \"standard\" \"standard\" ... #>  $ elution_time    : num [1:7510] 5 5.02 5.04 5.06 5.08 5.1 5.12 5.14 5.16 5.18 ... #>  $ ri_signal       : num [1:7510] 1.63 2.29 2.95 1.89 1.97 ... #>  $ known_mw        : num [1:7510] 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 ... #>  $ known_dispersity: num [1:7510] 1.05 1.05 1.05 1.05 1.05 1.05 1.05 1.05 1.05 1.05 ...  # Separate standards and samples library(dplyr) standards <- sec_chromatograms |> filter(sample_type == \"standard\") samples <- sec_chromatograms |> filter(sample_type == \"sample\")  # Plot standards (if ggplot2 available) if (requireNamespace(\"ggplot2\", quietly = TRUE)) {   library(ggplot2)   ggplot(standards, aes(x = elution_time, y = ri_signal, color = sample_id)) +     geom_line() +     labs(x = \"Elution Time (min)\", y = \"RI Signal\",          title = \"SEC Calibration Standards\",          color = \"Standard\") }"},{"path":"https://jameshwade.github.io/measure/dev/reference/set_measure_roles.html","id":null,"dir":"Reference","previous_headings":"","what":"Set Measure Roles in a Recipe — set_measure_roles","title":"Set Measure Roles in a Recipe — set_measure_roles","text":"Batch assign roles columns based detected types explicit patterns. convenience wrapper around recipes::update_role() common analytical data patterns.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/set_measure_roles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set Measure Roles in a Recipe — set_measure_roles","text":"","code":"set_measure_roles(   recipe,   id_cols = NULL,   blank_cols = NULL,   qc_cols = NULL,   standard_cols = NULL,   metadata_cols = NULL,   measure_cols = NULL )"},{"path":"https://jameshwade.github.io/measure/dev/reference/set_measure_roles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set Measure Roles in a Recipe — set_measure_roles","text":"recipe recipe object. id_cols Column(s) assign \"id\" role. Accepts tidyselect. blank_cols Column(s) assign \"blank\" role. Accepts tidyselect. qc_cols Column(s) assign \"qc\" role. Accepts tidyselect. standard_cols Column(s) assign \"standard\" role. Accepts tidyselect. metadata_cols Column(s) assign \"metadata\" role. Accepts tidyselect. measure_cols Column(s) assign \"measure\" role. Accepts tidyselect.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/set_measure_roles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set Measure Roles in a Recipe — set_measure_roles","text":"Updated recipe object roles assigned.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/set_measure_roles.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set Measure Roles in a Recipe — set_measure_roles","text":"Common roles analytical chemistry workflows:","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/set_measure_roles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set Measure Roles in a Recipe — set_measure_roles","text":"","code":"if (FALSE) { # \\dontrun{ library(recipes)  # Basic role assignment rec <- recipe(outcome ~ ., data = my_data) |>   set_measure_roles(     id_cols = sample_id,     metadata_cols = c(batch, operator)   )  # With QC and blank identification by column name patterns rec <- recipe(outcome ~ ., data = my_data) |>   set_measure_roles(     id_cols = sample_id,     blank_cols = starts_with(\"blank_\"),     qc_cols = starts_with(\"qc_\")   ) } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/smooth_window.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameters for smoothing steps — smooth_window","title":"Parameters for smoothing steps — smooth_window","text":"smooth_window() controls window size moving average median smoothing. smooth_sigma() controls standard deviation Gaussian smoothing. fourier_cutoff() controls frequency cutoff Fourier filtering.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/smooth_window.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameters for smoothing steps — smooth_window","text":"","code":"smooth_window(range = c(3L, 21L), trans = NULL)  smooth_sigma(range = c(0.5, 5), trans = NULL)  fourier_cutoff(range = c(0.01, 0.5), trans = NULL)  despike_threshold(range = c(2, 10), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/smooth_window.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameters for smoothing steps — smooth_window","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/smooth_window.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameters for smoothing steps — smooth_window","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/smooth_window.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameters for smoothing steps — smooth_window","text":"","code":"smooth_window() #> Smoothing Window Size (quantitative) #> Range: [3, 21] smooth_sigma() #> Gaussian Sigma (quantitative) #> Range: [0.5, 5] fourier_cutoff() #> Fourier Cutoff Frequency (quantitative) #> Range: [0.01, 0.5]"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_absorbance.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Transmittance to Absorbance — step_measure_absorbance","title":"Convert Transmittance to Absorbance — step_measure_absorbance","text":"step_measure_absorbance() creates specification recipe step converts transmittance values absorbance using Beer-Lambert law.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_absorbance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Transmittance to Absorbance — step_measure_absorbance","text":"","code":"step_measure_absorbance(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_absorbance\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_absorbance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Transmittance to Absorbance — step_measure_absorbance","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_absorbance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Transmittance to Absorbance — step_measure_absorbance","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_absorbance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert Transmittance to Absorbance — step_measure_absorbance","text":"step applies Beer-Lambert law transformation: $$= -\\log_{10}(T)$$ \\(T\\) transmittance \\(\\) absorbance. Important: Transmittance values range (0, 1] (0, 100]. Zero negative values produce -Inf NaN warning. measurement locations preserved unchanged.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_absorbance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Transmittance to Absorbance — step_measure_absorbance","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_absorbance() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":null,"dir":"Reference","previous_headings":"","what":"Correlation Optimized Warping Alignment — step_measure_align_cow","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"step_measure_align_cow() creates specification recipe step aligns spectra using Correlation Optimized Warping (COW). method uses piecewise linear warping correct non-linear shifts.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"","code":"step_measure_align_cow(   recipe,   measures = NULL,   reference = c(\"mean\", \"median\", \"first\"),   segment_length = 30L,   slack = 1L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_align_cow\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"recipe recipe object. measures optional character vector measure column names. reference determine reference: \"mean\" (default, mean spectrum training), \"median\" (median spectrum training), \"first\" (first sample). segment_length Length segment warping. Default 30. Tunable via align_segment_length(). slack Maximum compression/expansion per segment points. Default 1. slack 1 means segment can shrink expand 1 point. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"Correlation Optimized Warping (COW) divides signals segments uses dynamic programming find optimal piecewise linear warping maximizes correlation reference spectrum. Key parameters: segment_length: Controls resolution warping. Smaller segments allow local corrections increase computation. slack: Controls much segment can stretch compress. Larger values allow flexibility may introduce artifacts. pure R implementation based Nielsen et al. (1998).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"Nielsen, N.P.V., Carstensen, J.M., Smedsgaard, J. (1998). Aligning single multiple wavelength chromatographic profiles chemometric data analysis using correlation optimised warping. Journal Chromatography , 805, 17-35.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_cow.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Correlation Optimized Warping Alignment — step_measure_align_cow","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_align_cow(segment_length = 20, slack = 2) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_dtw.html","id":null,"dir":"Reference","previous_headings":"","what":"Dynamic Time Warping Alignment — step_measure_align_dtw","title":"Dynamic Time Warping Alignment — step_measure_align_dtw","text":"step_measure_align_dtw() creates specification recipe step aligns spectra using Dynamic Time Warping (DTW). method can handle non-linear distortions x-axis.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_dtw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dynamic Time Warping Alignment — step_measure_align_dtw","text":"","code":"step_measure_align_dtw(   recipe,   measures = NULL,   reference = c(\"mean\", \"median\", \"first\"),   window_type = c(\"none\", \"sakoechiba\", \"slantedband\"),   window_size = 10L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_align_dtw\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_dtw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dynamic Time Warping Alignment — step_measure_align_dtw","text":"recipe recipe object. measures optional character vector measure column names. reference determine reference: \"mean\" (default): Use mean spectrum training \"median\": Use median spectrum training \"first\": Use first sample window_type Windowing constraint DTW. One \"none\" (default), \"sakoechiba\", \"slantedband\". window_size Window size constrained DTW. Default 10. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_dtw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dynamic Time Warping Alignment — step_measure_align_dtw","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_dtw.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Dynamic Time Warping Alignment — step_measure_align_dtw","text":"DTW finds optimal non-linear alignment two sequences minimizing distance measure allowing warping time/x-axis. useful : Chromatographic peak alignment Correcting non-linear retention time shifts Aligning spectra complex distortions Requires dtw package installed.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_dtw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Dynamic Time Warping Alignment — step_measure_align_dtw","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_align_dtw() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":null,"dir":"Reference","previous_headings":"","what":"Parametric Time Warping Alignment — step_measure_align_ptw","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"step_measure_align_ptw() creates specification recipe step aligns spectra using Parametric Time Warping (PTW). method uses polynomial warping functions correct shifts distortions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"","code":"step_measure_align_ptw(   recipe,   measures = NULL,   reference = c(\"mean\", \"median\", \"first\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_align_ptw\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"recipe recipe object. measures optional character vector measure column names. reference determine reference: \"mean\" (default, mean spectrum training), \"median\" (median spectrum training), \"first\" (first sample). role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"Parametric Time Warping optimizes polynomial warping coefficients maximize correlation sample reference spectrum. corrects smooth, continuous distortions x-axis. Requires ptw package installed.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"Eilers, P.H.C. (2004). Parametric Time Warping. Analytical Chemistry, 76(2), 404-411.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_ptw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parametric Time Warping Alignment — step_measure_align_ptw","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_align_ptw() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Align to Reference Spectrum — step_measure_align_reference","title":"Align to Reference Spectrum — step_measure_align_reference","text":"step_measure_align_reference() creates specification recipe step aligns spectra user-provided reference spectrum using cross-correlation.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Align to Reference Spectrum — step_measure_align_reference","text":"","code":"step_measure_align_reference(   recipe,   measures = NULL,   ref_spectrum,   max_shift = 10L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_align_reference\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Align to Reference Spectrum — step_measure_align_reference","text":"recipe recipe object. measures optional character vector measure column names. ref_spectrum numeric vector containing reference spectrum. Must length measurement spectra. max_shift Maximum shift (points) consider. Default 10. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Align to Reference Spectrum — step_measure_align_reference","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_reference.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Align to Reference Spectrum — step_measure_align_reference","text":"Similar step_measure_align_shift(), uses externally provided reference spectrum instead computing one training data. useful known standard calibration spectrum.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Align to Reference Spectrum — step_measure_align_reference","text":"","code":"library(recipes)  # Create a reference spectrum (in practice, this would be from calibration) ref <- rep(1, 100)  # placeholder  # Note: This example would need matching spectrum lengths to work if (FALSE) { # \\dontrun{ rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_align_reference(ref_spectrum = ref) |>   prep() } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_shift.html","id":null,"dir":"Reference","previous_headings":"","what":"Shift Alignment via Cross-Correlation — step_measure_align_shift","title":"Shift Alignment via Cross-Correlation — step_measure_align_shift","text":"step_measure_align_shift() creates specification recipe step aligns spectra finding optimal shift using cross-correlation.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_shift.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shift Alignment via Cross-Correlation — step_measure_align_shift","text":"","code":"step_measure_align_shift(   recipe,   measures = NULL,   max_shift = 10L,   reference = c(\"mean\", \"median\", \"first\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_align_shift\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_shift.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shift Alignment via Cross-Correlation — step_measure_align_shift","text":"recipe recipe object. measures optional character vector measure column names. max_shift Maximum shift (points) consider. Default 10. Tunable via align_max_shift(). reference determine reference: \"mean\" (default): Use mean spectrum training \"median\": Use median spectrum training \"first\": Use first sample role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_shift.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shift Alignment via Cross-Correlation — step_measure_align_shift","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_shift.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shift Alignment via Cross-Correlation — step_measure_align_shift","text":"step corrects small linear shifts spectra, can occur due : Wavelength calibration drift Sample positioning differences Temperature effects instrument optimal shift found maximizing cross-correlation spectrum reference. shifting, edge values filled constant extrapolation.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_align_shift.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shift Alignment via Cross-Correlation — step_measure_align_shift","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_align_shift(max_shift = 5) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_noise.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Random Noise to Measurements — step_measure_augment_noise","title":"Add Random Noise to Measurements — step_measure_augment_noise","text":"step_measure_augment_noise() creates specification recipe step adds controlled random noise spectral data data augmentation.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_noise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Random Noise to Measurements — step_measure_augment_noise","text":"","code":"step_measure_augment_noise(   recipe,   sd = 0.01,   distribution = c(\"gaussian\", \"uniform\"),   relative = TRUE,   measures = NULL,   role = NA,   trained = FALSE,   skip = TRUE,   id = recipes::rand_id(\"measure_augment_noise\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_noise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Random Noise to Measurements — step_measure_augment_noise","text":"recipe recipe object. sd Standard deviation noise. relative = TRUE (default), relative signal range (0.01 = 1% range). relative = FALSE, absolute noise level. distribution Noise distribution: \"gaussian\" (default) \"uniform\". relative Logical. TRUE (default), sd relative signal range. measures optional character vector measure column names. role used. trained Logical indicating step trained. skip Logical. step skipped baking? Default TRUE, meaning augmentation applies training. id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_noise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Random Noise to Measurements — step_measure_augment_noise","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_noise.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add Random Noise to Measurements — step_measure_augment_noise","text":"Data augmentation adds variability training data improve model robustness. Adding noise simulates measurement uncertainty helps models generalize better. Default behavior (skip = TRUE): augmentation applied prep() training data. bake() called new data, step skipped. Reproducibility: noise deterministic based row content, input always produces augmented output within session.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_noise.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Random Noise to Measurements — step_measure_augment_noise","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_augment_noise(sd = 0.02) |>   prep()  # Noise only applied to training data bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_scale.html","id":null,"dir":"Reference","previous_headings":"","what":"Random Intensity Scaling — step_measure_augment_scale","title":"Random Intensity Scaling — step_measure_augment_scale","text":"step_measure_augment_scale() creates specification recipe step applies random intensity scaling scale invariance training.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_scale.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Random Intensity Scaling — step_measure_augment_scale","text":"","code":"step_measure_augment_scale(   recipe,   range = c(0.9, 1.1),   measures = NULL,   role = NA,   trained = FALSE,   skip = TRUE,   id = recipes::rand_id(\"measure_augment_scale\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_scale.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Random Intensity Scaling — step_measure_augment_scale","text":"recipe recipe object. range numeric vector length 2 specifying range scaling factors. Default c(0.9, 1.1), meaning 90%-110% original. measures optional character vector measure column names. role used. trained Logical indicating step trained. skip Logical. step skipped baking? Default TRUE. id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_scale.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Random Intensity Scaling — step_measure_augment_scale","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_scale.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Random Intensity Scaling — step_measure_augment_scale","text":"step multiplies spectrum values random scaling factor sampled uniformly specified range. helps models become robust variations signal intensity. Common use cases: Simulating concentration variations Compensating detector sensitivity differences Making models robust sample preparation variability Default behavior (skip = TRUE): scaling applied training. predicting new data, step skipped.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_scale.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Random Intensity Scaling — step_measure_augment_scale","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_augment_scale(range = c(0.8, 1.2)) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_shift.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Random X-axis Shifts — step_measure_augment_shift","title":"Add Random X-axis Shifts — step_measure_augment_shift","text":"step_measure_augment_shift() creates specification recipe step applies random shifts along x-axis shift invariance training.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_shift.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Random X-axis Shifts — step_measure_augment_shift","text":"","code":"step_measure_augment_shift(   recipe,   max_shift = 1,   measures = NULL,   role = NA,   trained = FALSE,   skip = TRUE,   id = recipes::rand_id(\"measure_augment_shift\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_shift.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Random X-axis Shifts — step_measure_augment_shift","text":"recipe recipe object. max_shift Maximum shift amount location units. actual shift uniformly sampled [-max_shift, max_shift]. measures optional character vector measure column names. role used. trained Logical indicating step trained. skip Logical. step skipped baking? Default TRUE. id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_shift.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Random X-axis Shifts — step_measure_augment_shift","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_shift.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add Random X-axis Shifts — step_measure_augment_shift","text":"step adds random x-axis shifts help models become invariant small retention time wavelength shifts. particularly useful chromatographic data peak positions may vary slightly. spectrum interpolated shifted positions using linear interpolation. Values outside original range use boundary values. Default behavior (skip = TRUE): shift applied training. predicting new data, step skipped.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_augment_shift.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Random X-axis Shifts — step_measure_augment_shift","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_augment_shift(max_shift = 2) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":null,"dir":"Reference","previous_headings":"","what":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"step_measure_baseline_airpls() creates specification recipe step applies airPLS baseline correction. method automatically adjusts weights based difference signal fitted baseline.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"","code":"step_measure_baseline_airpls(   recipe,   measures = NULL,   lambda = 1e+05,   max_iter = 50L,   tol = 0.001,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_airpls\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"recipe recipe object. measures optional character vector measure column names. lambda Smoothness parameter. Higher values produce smoother baselines. Default 1e5. Tunable via baseline_lambda(). max_iter Maximum number iterations. Default 50. tol Convergence tolerance weight changes. Default 1e-3. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"airPLS (Adaptive Iteratively Reweighted Penalized Least Squares) improvement standard ALS automatically adapts asymmetry parameter based residuals. Key features: need manually set asymmetry parameter Good signals varying baseline curvature Robust different peak heights","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"Zhang, Z.M., Chen, S., & Liang, Y.Z. (2010). Baseline correction using adaptive iteratively reweighted penalized least squares. Analyst, 135, 1138-1146.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_airpls.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Adaptive Iteratively Reweighted Penalized Least Squares Baseline — step_measure_baseline_airpls","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_airpls(lambda = 1e5) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":null,"dir":"Reference","previous_headings":"","what":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"step_measure_baseline_als() creates specification recipe step applies Asymmetric Least Squares baseline correction measurement data. ALS iteratively fits smooth baseline giving less weight points baseline (peaks).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"","code":"step_measure_baseline_als(   recipe,   measures = NULL,   lambda = 1e+06,   p = 0.01,   max_iter = 20L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_als\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. lambda Smoothness parameter (2nd derivative constraint). Higher values produce smoother baselines. Default 1e6. Typical range 1e3 1e9. Tunable via baseline_lambda(). p Asymmetry parameter controlling weight positive residuals. Values near 0 (e.g., 0.001-0.05) work well spectra peaks baseline. Default 0.01. Tunable via baseline_asymmetry(). max_iter Maximum number iterations. Default 20. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"Asymmetric Least Squares (ALS) baseline correction uses Whittaker smoother asymmetric weights fit baseline follows lower envelope spectrum. algorithm iteratively: 1 . Fits smooth baseline using penalized least squares 2. Calculates residuals (spectrum - baseline) 3. Assigns weights: p positive residuals (peaks), 1-p negative 4. Repeats convergence max iterations smoothness controlled lambda, penalizes second derivative baseline. Larger lambda produces smoother baselines. ALS particularly effective : NIR/IR spectroscopy broad baseline drift Raman spectroscopy fluorescence background UV-Vis spectroscopy scattering effects selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"tidy() step, tibble columns terms, lambda, p, id returned.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"tuning","dir":"Reference","previous_headings":"","what":"Tuning","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"step parameters can tuned: lambda: Use baseline_lambda() (log10 scale recommended) p: Use baseline_asymmetry()","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"Eilers, P.H.C. Boelens, H.F.M. (2005). Baseline Correction Asymmetric Least Squares Smoothing. Leiden University Medical Centre report.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_als.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Asymmetric Least Squares (ALS) Baseline Correction — step_measure_baseline_als","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_als(lambda = 1e6, p = 0.01) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_arpls.html","id":null,"dir":"Reference","previous_headings":"","what":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","title":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","text":"step_measure_baseline_arpls() creates specification recipe step applies arPLS baseline correction using asymmetric weighting.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_arpls.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","text":"","code":"step_measure_baseline_arpls(   recipe,   measures = NULL,   lambda = 1e+05,   ratio = 0.001,   max_iter = 50L,   tol = 0.001,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_arpls\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_arpls.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","text":"recipe recipe object. measures optional character vector measure column names. lambda Smoothing parameter. Larger values produce smoother baselines. Default 1e5. ratio Asymmetric weighting ratio. Default 0.001. max_iter Maximum number iterations. Default 50. tol Convergence tolerance. Default 1e-3. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_arpls.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_arpls.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","text":"arPLS algorithm uses asymmetric least squares ratio-based weighting scheme. robust peak interference works well signals varying baseline curvature. Reference: Baek et al. (2015), Analyst 140, 250-257","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_arpls.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Asymmetrically Reweighted Penalized Least Squares Baseline Correction — step_measure_baseline_arpls","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_arpls(lambda = 1e5) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_auto.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","title":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","text":"step_measure_baseline_auto() creates specification recipe step automatically selects applies best baseline correction method based signal characteristics.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_auto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","text":"","code":"step_measure_baseline_auto(   recipe,   measures = NULL,   methods = c(\"rolling\", \"airpls\", \"snip\", \"tophat\", \"minima\"),   role = NA,   trained = FALSE,   selected_method = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_auto\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_auto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","text":"recipe recipe object. measures optional character vector measure column names. methods Character vector methods consider. Default includes available methods. role used. trained Logical indicating step trained. selected_method method selected training (internal). skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_auto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_auto.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","text":"step analyzes signal characteristics (noise level, baseline curvature, peak density) training selects appropriate baseline correction method. selected method applied consistently baking. Method selection heuristics: High noise, smooth baseline: rolling ball Complex curvature: airPLS arPLS Sharp peaks: SNIP top-hat Simple baseline: polynomial minima","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_auto.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Automatic Baseline Correction Method Selection — step_measure_baseline_auto","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_auto() |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":null,"dir":"Reference","previous_headings":"","what":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"step_measure_baseline_custom() creates specification recipe step applies user-provided function baseline correction. allows flexible, custom baseline estimation algorithms.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"","code":"step_measure_baseline_custom(   recipe,   .fn,   ...,   subtract = TRUE,   measures = NULL,   tunable = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_custom\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"recipe recipe object. step added sequence operations recipe. .fn function formula baseline estimation. function accept measure_tbl (tibble location value columns) return numeric vector baseline values length input. Formulas converted functions via rlang::as_function(), .x represents measure_tbl. ... Additional arguments passed .fn. captured quosures evaluated bake time. subtract TRUE (default), baseline subtracted signal. FALSE, baseline values replace original values (useful extracting baselines). measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. tunable optional named list specifying arguments ... tunable. element list pkg, fun, optionally range. See Details. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"step allows use baseline estimation algorithm providing custom function. function receives measure_tbl object (tibble location value columns) return numeric vector estimated baseline values.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"function-contract","dir":"Reference","previous_headings":"","what":"Function Contract","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"function : Accept measure_tbl first argument Return numeric vector length nrow(measure_tbl) Handle NA values appropriately","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"formula-interface","dir":"Reference","previous_headings":"","what":"Formula Interface","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"can use formula instead function. formula converted function .x represents measure_tbl:","code":"# These are equivalent: step_measure_baseline_custom(.fn = function(x) mean(x$value)) step_measure_baseline_custom(.fn = ~ mean(.x$value))"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"tunability","dir":"Reference","previous_headings":"","what":"Tunability","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"make parameters tunable dials, provide tunable argument:   selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":"step_measure_baseline_custom(   .fn = ~ stats::loess(.x$value ~ .x$location, span = span)$fitted,   span = 0.5,   tunable = list(     span = list(pkg = \"dials\", fun = \"degree\", range = c(0.1, 0.9))   ) )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"tidy() step, tibble columns terms, subtract, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_custom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Custom Baseline Correction with User-Provided Function — step_measure_baseline_custom","text":"","code":"library(recipes)  # Simple polynomial baseline using a function poly_baseline <- function(x) {   fit <- lm(x$value ~ poly(x$location, 2))   predict(fit) }  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_custom(.fn = poly_baseline) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows  # Using formula interface with additional parameters rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_custom(     .fn = ~ stats::loess(.x$value ~ .x$location, span = span)$fitted,     span = 0.5   ) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":null,"dir":"Reference","previous_headings":"","what":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"step_measure_baseline_gpc() creates specification recipe step applies baseline correction optimized Gel Permeation Chromatography (GPC) Size Exclusion Chromatography (SEC) data. method estimates baseline interpolating baseline regions start end chromatogram.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"","code":"step_measure_baseline_gpc(   recipe,   measures = NULL,   left_frac = 0.05,   right_frac = 0.05,   method = \"linear\",   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_gpc\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. left_frac Fraction points beginning use left baseline region. Default 0.05 (first 5% data points). right_frac Fraction points end use right baseline region. Default 0.05 (last 5% data points). method Method baseline estimation. One : \"linear\" (default): Linear interpolation left right means \"median\": Uses median baseline regions (robust outliers) \"spline\": Smooth spline baseline regions role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"GPC/SEC chromatograms typically distinct baseline regions beginning end polymer elutes. step leverages characteristic : 1 2. Computing representative baseline value region (mean median) 3. Interpolating values estimate full baseline 4. Subtracting estimated baseline signal left_frac right_frac parameters control much chromatogram considered \"baseline\". Choose values : Include flat, signal-free regions Exclude polymer peaks system peaks large enough average noise Unlike general-purpose baseline methods like ALS polynomial fitting, approach specifically designed characteristic shape GPC/SEC chromatograms computationally fast. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"tidy() step, tibble columns terms, left_frac, right_frac, method, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_gpc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"GPC/SEC Baseline Correction — step_measure_baseline_gpc","text":"","code":"library(recipes)  # Using meats_long as example (works on any measurement data) rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_gpc(left_frac = 0.1, right_frac = 0.1) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_minima.html","id":null,"dir":"Reference","previous_headings":"","what":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","title":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","text":"step_measure_baseline_minima() creates specification recipe step estimates baseline interpolating local minima.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_minima.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","text":"","code":"step_measure_baseline_minima(   recipe,   measures = NULL,   window_size = 50L,   method = c(\"spline\", \"linear\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_minima\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_minima.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","text":"recipe recipe object. measures optional character vector measure column names. window_size Window size finding local minima. Default 50. method Interpolation method: \"linear\" \"spline\". Default \"spline\". role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_minima.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_minima.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","text":"method finds local minima within specified windows, interpolates create baseline estimate. intuitive works well baseline points clearly identifiable local minima.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_minima.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Local Minima Interpolation Baseline Correction — step_measure_baseline_minima","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_minima(window_size = 30, method = \"spline\") |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_morph.html","id":null,"dir":"Reference","previous_headings":"","what":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","title":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","text":"step_measure_baseline_morph() creates specification recipe step applies iterative morphological baseline correction using erosion dilation operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_morph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","text":"","code":"step_measure_baseline_morph(   recipe,   measures = NULL,   half_window = 50L,   iterations = 10L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_morph\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_morph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","text":"recipe recipe object. measures optional character vector measure column names. half_window Half-window size structuring element. Default 50. iterations Number erosion-dilation iterations. Default 10. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_morph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_morph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","text":"method applies iterative morphological operations (erosion followed dilation) estimate baseline. Multiple iterations can help refine baseline estimate complex signals.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_morph.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Iterative Morphological Baseline Correction — step_measure_baseline_morph","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_morph(half_window = 30, iterations = 5) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":null,"dir":"Reference","previous_headings":"","what":"Polynomial Baseline Correction — step_measure_baseline_poly","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"step_measure_baseline_poly() creates specification recipe step applies polynomial baseline correction measurement data. method fits polynomial spectrum, optionally iterative peak exclusion.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"","code":"step_measure_baseline_poly(   recipe,   measures = NULL,   degree = 2L,   max_iter = 0L,   threshold = 1.5,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_poly\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. degree Polynomial degree baseline fitting. Default 2 (quadratic). Higher degrees fit complex baselines risk overfitting. Tunable via baseline_degree(). max_iter Maximum number iterations peak exclusion. Default 0 (iteration, fit polynomial points). Set positive integer iteratively exclude points fitted baseline. threshold Number standard deviations baseline point excluded iterative fitting. Default 1.5. used max_iter > 0. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"Polynomial baseline correction fits polynomial function spectrum subtracts . effective removing smooth, curved baselines caused instrumental drift, scattering, slowly varying effects. max_iter > 0, algorithm uses iterative peak exclusion: Fit polynomial points Calculate residuals (spectrum - baseline) Exclude points residual > threshold * SD(residuals) Refit polynomial remaining points Repeat convergence max_iter reached iterative approach prevents peaks pulling baseline estimate. Degree selection: degree = 1: Linear baseline (simple drift) degree = 2: Quadratic (common, handles gentle curvature) degree = 3-5: Higher-order (complex baselines, use cautiously) selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"tidy() step, tibble columns terms, degree, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_poly.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Polynomial Baseline Correction — step_measure_baseline_poly","text":"","code":"library(recipes)  # Simple polynomial baseline (no iteration) rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_poly(degree = 2) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows  # With iterative peak exclusion rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_poly(degree = 3, max_iter = 5, threshold = 2) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":null,"dir":"Reference","previous_headings":"","what":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"step_measure_baseline_py() creates specification recipe step applies baseline correction using Python pybaselines library, provides 50+ baseline correction algorithms.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"","code":"step_measure_baseline_py(   recipe,   method = \"asls\",   ...,   subtract = TRUE,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_py\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"recipe recipe object. step added sequence operations recipe. method pybaselines method use. Common methods include: Whittaker methods: \"asls\", \"iasls\", \"airpls\", \"arpls\", \"drpls\", \"psalsa\" Polynomial methods: \"poly\", \"modpoly\", \"imodpoly\", \"loess\", \"quant_reg\" Morphological: \"mor\", \"imor\", \"rolling_ball\", \"tophat\" Spline: \"pspline_asls\", \"pspline_airpls\", \"mixture_model\" Smooth: \"snip\", \"swima\", \"noise_median\" Classification: \"dietrich\", \"golotvin\", \"fastchrom\" See pybaselines documentation full list. ... Additional arguments passed pybaselines method. Common parameters include: lam: Smoothness parameter Whittaker methods (default varies method) p: Asymmetry parameter ALS methods (default ~0.01) poly_order: Polynomial degree polynomial methods half_window: Window size morphological methods max_half_window: Maximum window SNIP method subtract TRUE (default), baseline subtracted signal. FALSE, baseline values replace original values (useful extracting baselines). measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"step provides access comprehensive pybaselines Python library, implements 50 baseline correction algorithms across several categories:","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"whittaker-methods","dir":"Reference","previous_headings":"","what":"Whittaker Methods","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"Based penalized least squares asymmetric weights: asls: Asymmetric Least Squares (good general-purpose method) iasls: Improved ALS automatic smoothness selection airpls: Adaptive iteratively reweighted penalized least squares arpls: Asymmetrically reweighted penalized least squares psalsa: Peaked Signal's Asymmetric Least Squares Algorithm","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"polynomial-methods","dir":"Reference","previous_headings":"","what":"Polynomial Methods","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"Fit polynomials baseline regions: poly: Simple polynomial fitting modpoly: Modified polynomial (iterative) imodpoly: Improved modified polynomial loess: Local regression (LOESS)","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"morphological-methods","dir":"Reference","previous_headings":"","what":"Morphological Methods","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"Based mathematical morphology: mor: Morphological opening imor: Improved morphological rolling_ball: Rolling ball algorithm tophat: Top-hat transform","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"requirements","dir":"Reference","previous_headings":"","what":"Requirements","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"step requires reticulate package Python pybaselines installed. Install pybaselines :   selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":"reticulate::py_require(\"pybaselines\")"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"tidy() step, tibble columns terms, method, subtract, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_py.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Python-Based Baseline Correction via pybaselines — step_measure_baseline_py","text":"","code":"if (FALSE) { # measure:::.pybaselines_available() library(recipes)  # Asymmetric Least Squares baseline correction rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_py(method = \"asls\", lam = 1e6, p = 0.01) |>   prep()  bake(rec, new_data = NULL)  # Using SNIP algorithm rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_py(method = \"snip\", max_half_window = 40) |>   prep() }"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":null,"dir":"Reference","previous_headings":"","what":"Robust Fitting Baseline Correction — step_measure_baseline_rf","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"step_measure_baseline_rf() creates specification recipe step applies robust fitting baseline correction measurement data. method uses local regression iterative reweighting fit baseline resistant peaks.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"","code":"step_measure_baseline_rf(   recipe,   measures = NULL,   span = 2/3,   maxit = c(5L, 5L),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_rf\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. span Controls amount smoothing. fraction data used computing fitted value. Default 2/3. Smaller values produce less smooth baselines follow local features closely. maxit length-2 integer vector specifying number iterations robust fit. first value asymmetric weighting function, second symmetric weighting. Default c(5, 5). role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"Robust fitting baseline correction uses local polynomial regression (LOESS/LOWESS) iterative reweighting estimate baseline. algorithm uses asymmetric weights initial iterations -weight peaks, symmetric weights final smoothing. method particularly effective : Spectra peaks varying widths Data baseline shape well-described polynomial Situations peaks influence baseline estimate span parameter controls trade-smoothness local adaptation: Larger span (e.g., 0.8): Smoother baseline, may miss local variations Smaller span (e.g., 0.3): local adaptation, may overfit selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"tidy() step, tibble columns terms, span, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Robust Fitting Baseline Correction — step_measure_baseline_rf","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_rf(span = 0.5) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rolling.html","id":null,"dir":"Reference","previous_headings":"","what":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","title":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","text":"step_measure_baseline_rolling() creates specification recipe step applies rolling ball baseline correction. morphological approach \"rolls\" ball specified radius along underside spectrum.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rolling.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","text":"","code":"step_measure_baseline_rolling(   recipe,   measures = NULL,   window_size = 100,   smoothing = 50,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_rolling\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rolling.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","text":"recipe recipe object. measures optional character vector measure column names. window_size diameter rolling ball number points. Default 100. smoothing Additional smoothing window applied baseline. Default 50. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rolling.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rolling.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","text":"rolling ball algorithm simulates rolling ball specified radius along underside spectrum. Points ball touches become baseline. effective : Chromatographic baselines Spectra gradual drift Data peaks narrower baseline features","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_rolling.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Rolling Ball Baseline Correction — step_measure_baseline_rolling","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_rolling(window_size = 50) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":null,"dir":"Reference","previous_headings":"","what":"SNIP Baseline Correction — step_measure_baseline_snip","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"step_measure_baseline_snip() creates specification recipe step applies SNIP (Statistics-sensitive Non-linear Iterative Peak-clipping) baseline correction.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"","code":"step_measure_baseline_snip(   recipe,   measures = NULL,   iterations = 40L,   decreasing = TRUE,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_snip\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"recipe recipe object. measures optional character vector measure column names. iterations Number clipping iterations. iterations produce lower baselines. Default 40. decreasing Logical. TRUE (default), iterations decrease iterations 1. FALSE, uses fixed window size. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"SNIP robust baseline estimation algorithm originally developed gamma-ray spectroscopy. works iteratively replacing point minimum average neighbors increasing distances. algorithm particularly effective : Spectra sharp peaks slowly varying baseline X-ray fluorescence diffraction Mass spectrometry","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"Ryan, C.G., et al. (1988). SNIP, statistics-sensitive background treatment quantitative analysis PIXE spectra geoscience applications. Nuclear Instruments Methods Physics Research B, 34, 396-402.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_snip.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SNIP Baseline Correction — step_measure_baseline_snip","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_snip(iterations = 30) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_tophat.html","id":null,"dir":"Reference","previous_headings":"","what":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","title":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","text":"step_measure_baseline_tophat() creates specification recipe step applies top-hat morphological baseline correction.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_tophat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","text":"","code":"step_measure_baseline_tophat(   recipe,   measures = NULL,   half_window = 50L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_baseline_tophat\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_tophat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","text":"recipe recipe object. measures optional character vector measure column names. half_window Half-window size structuring element. Default 50. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_tophat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_tophat.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","text":"top-hat transform morphological operation extracts bright features (peaks) dark background. computed difference original signal morphological opening. effective chromatography sharp, well-defined peaks smooth baseline.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_baseline_tophat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Top-Hat Morphological Baseline Correction — step_measure_baseline_tophat","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_baseline_tophat(half_window = 30) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_bin.html","id":null,"dir":"Reference","previous_headings":"","what":"Spectral Binning — step_measure_bin","title":"Spectral Binning — step_measure_bin","text":"step_measure_bin() creates specification recipe step reduces spectrum fewer points averaging within bins.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_bin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spectral Binning — step_measure_bin","text":"","code":"step_measure_bin(   recipe,   n_bins = NULL,   bin_width = NULL,   method = c(\"mean\", \"sum\", \"median\", \"max\"),   measures = NULL,   role = NA,   trained = FALSE,   bin_breaks = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_bin\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_bin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spectral Binning — step_measure_bin","text":"recipe recipe object. n_bins Number bins (mutually exclusive bin_width). bin_width Width bin location units (mutually exclusive n_bins). method Aggregation method: \"mean\" (default), \"sum\", \"median\", \"max\". measures optional character vector measure column names. role used (modifies existing data). trained Logical indicating step trained. bin_breaks computed bin breaks (training). skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_bin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spectral Binning — step_measure_bin","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_bin.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Spectral Binning — step_measure_bin","text":"step reduces number points spectrum dividing x-axis bins aggregating values within bin. result replaces .measures column binned data. useful : Reducing data dimensionality Decreasing noise averaging Speeding downstream processing Aligning data different resolutions bin boundaries determined prep() training data stored consistent application new data.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_bin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Spectral Binning — step_measure_bin","text":"","code":"library(recipes)  # Bin to 20 points rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_bin(n_bins = 20) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7  [20 × 2] #>  2     2  46    40.1    13.5  [20 × 2] #>  3     3  71     8.4    20.5  [20 × 2] #>  4     4  72.8   5.9    20.7  [20 × 2] #>  5     5  58.3  25.5    15.5  [20 × 2] #>  6     6  44    42.7    13.7  [20 × 2] #>  7     7  44    42.7    13.7  [20 × 2] #>  8     8  69.3  10.6    19.3  [20 × 2] #>  9     9  61.4  19.9    17.7  [20 × 2] #> 10    10  61.4  19.9    17.7  [20 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply X-Axis Calibration — step_measure_calibrate_x","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"step_measure_calibrate_x() creates specification recipe step transforms x-axis (location) values using calibration function calibration data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"","code":"step_measure_calibrate_x(   recipe,   calibration,   from = \"x\",   to = \"y\",   method = \"spline\",   extrapolate = FALSE,   measures = NULL,   role = NA,   trained = FALSE,   cal_fn = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_calibrate_x\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"recipe recipe object. step added sequence operations recipe. calibration calibration apply. Can : data.frame columns specified function takes location values returns calibrated values Column name calibration data.frame containing original x values. Default \"x\". Column name calibration data.frame containing calibrated values. Default \"y\". method Interpolation method using calibration data.frame: \"linear\": Linear interpolation \"spline\" (default): Cubic spline interpolation extrapolate Logical. TRUE, allow extrapolation outside calibration range. FALSE (default), values outside range return NA linear interpolation use spline extrapolation. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. cal_fn calibration function created training. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"X-axis calibration commonly used convert raw measurement units physically meaningful values. Common examples include: GPC/SEC: Convert retention time molecular weight (via log MW) Mass spectrometry: Apply m/z calibration corrections Spectroscopy: Convert pixel channel numbers wavelength/wavenumber calibration can provided either: Calibration data: data.frame known x→y mappings. step build interpolation function prep(). Calibration function: function directly transforms x values. Warning: step modifies location column. Subsequent steps see calibrated values. Make sure calibration appropriate data range. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"tidy() step, tibble columns terms, method, extrapolate, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_x.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply X-Axis Calibration — step_measure_calibrate_x","text":"","code":"library(recipes)  # Example: GPC molecular weight calibration # Calibration standards: retention_time -> log(MW) gpc_cal <- data.frame(   retention_time = c(10, 12, 14, 16, 18),   log_mw = c(6.5, 5.8, 5.0, 4.2, 3.5) )  # Note: meats_long doesn't have retention time, this is illustrative rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_calibrate_x(     calibration = function(x) log10(x + 1),  # Example transformation     method = \"spline\"   )  # With calibration data # rec <- recipe(...) |> #   step_measure_calibrate_x( #     calibration = gpc_cal, #     from = \"retention_time\", #     to = \"log_mw\", #     method = \"spline\" #   )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"step_measure_calibrate_y() creates specification recipe step applies response factor calibration function y-axis (value) values.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"","code":"step_measure_calibrate_y(   recipe,   response_factor = 1,   calibration = NULL,   measures = NULL,   role = NA,   trained = FALSE,   cal_fn = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_calibrate_y\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"recipe recipe object. step added sequence operations recipe. response_factor numeric value multiply values . Default 1.0 (change). simple scalar calibration. calibration optional calibration function takes value(s) returns calibrated value(s). provided, takes precedence response_factor. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. cal_fn calibration function apply (built prep). skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"Y-axis calibration used convert raw signal intensities quantitative values. Common examples include: Chromatography: Apply detector response factors Spectroscopy: Apply molar absorptivity corrections Mass spectrometry: Apply ionization efficiency corrections Simple mode: Use response_factor multiply values constant. Complex mode: Use calibration provide function non-linear calibration curves (e.g., fitting standards). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"tidy() step, tibble columns terms, response_factor, has_calibration, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_calibrate_y.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply Y-Axis Calibration (Response Factor) — step_measure_calibrate_y","text":"","code":"library(recipes)  # Simple response factor rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_calibrate_y(response_factor = 2.5)  # With calibration function (e.g., log transform) rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_calibrate_y(calibration = function(x) log10(x + 0.001))"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":null,"dir":"Reference","previous_headings":"","what":"Mean Centering — step_measure_center","title":"Mean Centering — step_measure_center","text":"step_measure_center() creates specification recipe step subtracts mean measurement location (column-wise centering). means computed training data applied new data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mean Centering — step_measure_center","text":"","code":"step_measure_center(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   learned_params = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_center\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mean Centering — step_measure_center","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_params named list containing learned means locations measure column. NULL step trained. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mean Centering — step_measure_center","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Mean Centering — step_measure_center","text":"Mean centering fundamental preprocessing step multivariate analysis methods like PCA PLS. removes average signal measurement location. data matrix \\(X\\) samples rows measurement locations columns, transformation : $$X_{centered} = X - \\bar{X}$$ \\(\\bar{X}\\) column-wise mean computed training data. means learned prep() training data stored use applying transformation new data bake(). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Mean Centering — step_measure_center","text":"tidy() step training, tibble learned means location returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_center.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mean Centering — step_measure_center","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_center() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative.html","id":null,"dir":"Reference","previous_headings":"","what":"Simple Finite Difference Derivatives — step_measure_derivative","title":"Simple Finite Difference Derivatives — step_measure_derivative","text":"step_measure_derivative() creates specification recipe step computes derivatives using simple finite differences.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simple Finite Difference Derivatives — step_measure_derivative","text":"","code":"step_measure_derivative(   recipe,   order = 1L,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_derivative\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simple Finite Difference Derivatives — step_measure_derivative","text":"recipe recipe object. step added sequence operations recipe. order order derivative (1 2). Default 1 (first derivative). measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simple Finite Difference Derivatives — step_measure_derivative","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simple Finite Difference Derivatives — step_measure_derivative","text":"step computes derivatives using forward finite differences: $$\\frac{dy}{dx} \\approx \\frac{y_{+1} - y_i}{x_{+1} - x_i}$$ derivative order, spectrum length reduced 1. First derivative: n-1 points Second derivative: n-2 points location values updated left point difference. Note: smoothed derivatives, consider using step_measure_savitzky_golay() differentiation_order > 0 instead.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simple Finite Difference Derivatives — step_measure_derivative","text":"","code":"library(recipes)  # First derivative rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_derivative(order = 1) |>   prep()  # Second derivative rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_derivative(order = 2) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative_gap.html","id":null,"dir":"Reference","previous_headings":"","what":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","title":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","text":"step_measure_derivative_gap() creates specification recipe step computes gap derivatives using Norris-Williams method.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative_gap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","text":"","code":"step_measure_derivative_gap(   recipe,   gap = 2L,   segment = 1L,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_derivative_gap\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative_gap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","text":"recipe recipe object. step added sequence operations recipe. gap gap size (number points skip side). Default 2. derivative point computed points -gap +gap. segment segment size averaging. Default 1 (averaging). greater 1, multiple points averaged side computing difference. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative_gap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative_gap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","text":"Gap derivatives compute difference points separated gap: $$\\frac{dy}{dx} \\approx \\frac{y_{+g} - y_{-g}}{x_{+g} - x_{-g}}$$ \\(g\\) gap size. segment > 1, Norris-Williams method used, averages segment points side computing difference. spectrum length reduced 2 * gap points. Gap derivatives often used NIR chemometrics alternative Savitzky-Golay derivatives less smoothing desired.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_derivative_gap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Gap (Norris-Williams) Derivatives — step_measure_derivative_gap","text":"","code":"library(recipes)  # Gap derivative with gap=2 rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_derivative_gap(gap = 2) |>   prep()  # Norris-Williams with gap=3, segment=2 rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_derivative_gap(gap = 3, segment = 2) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_despike.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Spikes and Outliers from Measurements — step_measure_despike","title":"Remove Spikes and Outliers from Measurements — step_measure_despike","text":"step_measure_despike() creates specification recipe step detects removes spikes (sudden, brief outliers) measurement data. Spikes common artifacts spectroscopy (cosmic rays Raman, detector glitches) chromatography (electrical noise).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_despike.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Spikes and Outliers from Measurements — step_measure_despike","text":"","code":"step_measure_despike(   recipe,   measures = NULL,   window = 5L,   threshold = 5,   method = c(\"interpolate\", \"median\", \"mean\"),   max_width = 3L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_despike\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_despike.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Spikes and Outliers from Measurements — step_measure_despike","text":"recipe recipe object. measures optional character vector measure column names. window window size local statistics. Must odd integer least 3. Default 5. Tunable via smooth_window(). threshold threshold multiplier spike detection. Points deviating threshold * MAD local median flagged. Default 5. Tunable via despike_threshold(). method replace detected spikes. One \"interpolate\" (default, linear interpolation neighbors), \"median\" (replace local median), \"mean\" (replace local mean). max_width Maximum width (points) spike. Consecutive outliers wider considered spikes. Default 3. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_despike.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Spikes and Outliers from Measurements — step_measure_despike","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_despike.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Spikes and Outliers from Measurements — step_measure_despike","text":"Spike detection uses robust local statistic approach: point, calculate local median MAD (Median Absolute Deviation) within sliding window Flag points |value - local_median| > threshold * MAD Group consecutive flagged points spike regions spike region narrower max_width, replace specified method MAD scaled 1.4826 consistent standard deviation normally distributed data. approach robust : Median MAD affected spikes threshold adapts local noise levels max_width parameter prevents removing genuine peaks","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_despike.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Spikes and Outliers from Measurements — step_measure_despike","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_despike(threshold = 5) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Trend from Measurements — step_measure_detrend","title":"Remove Trend from Measurements — step_measure_detrend","text":"step_measure_detrend() creates specification recipe step removes polynomial trend measurement data. useful removing drift, offset, slowly varying background effects.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Trend from Measurements — step_measure_detrend","text":"","code":"step_measure_detrend(   recipe,   measures = NULL,   degree = 1L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_detrend\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Trend from Measurements — step_measure_detrend","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. degree Polynomial degree trend fitting. Default 1 (linear detrending). Use 0 remove mean (centering). role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Trend from Measurements — step_measure_detrend","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Trend from Measurements — step_measure_detrend","text":"Detrending removes polynomial trend spectrum. simpler baseline correction methods like ALS robust fitting, effective : Linear drift (degree = 1): Instrumental drift, temperature effects Offset removal (degree = 0): Centers spectrum zero mean Curved trends (degree = 2+): Gradual curvature scattering Unlike step_measure_baseline_poly(), detrending fits polynomial points without iterative peak exclusion. makes faster appropriate : trend dominant feature (peaks) want preserve peak structure removing background Processing time-series process data drift selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Remove Trend from Measurements — step_measure_detrend","text":"tidy() step, tibble columns terms, degree, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_detrend.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Trend from Measurements — step_measure_detrend","text":"","code":"library(recipes)  # Linear detrending rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_detrend(degree = 1) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows  # Mean centering only (degree = 0) rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_detrend(degree = 0) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_emsc.html","id":null,"dir":"Reference","previous_headings":"","what":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","title":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","text":"step_measure_emsc() creates specification recipe step applies Extended Multiplicative Scatter Correction spectral data. EMSC accounts wavelength-dependent scatter effects using polynomial terms.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_emsc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","text":"","code":"step_measure_emsc(   recipe,   degree = 2L,   reference = \"mean\",   measures = NULL,   role = NA,   trained = FALSE,   ref_spectrum = NULL,   locations = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_emsc\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_emsc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","text":"recipe recipe object. degree Polynomial degree wavelength-dependent terms. Default 2. Higher values can model complex scatter effects risk overfitting. reference Reference spectrum method: \"mean\" (default) \"median\". Alternatively, numeric vector can supplied reference spectrum. measures optional character vector measure column names. role used. trained Logical indicating step trained. ref_spectrum learned reference spectrum (training). locations location values polynomial terms (training). skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_emsc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_emsc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","text":"Extended MSC (EMSC) extends standard MSC modeling wavelength-dependent scatter effects. spectrum \\(x_i\\) reference \\(x_r\\), model : $$x_i = a_i + b_i \\cdot x_r + c_i \\cdot \\lambda + d_i \\cdot \\lambda^2 + ... + \\epsilon$$ corrected spectrum : $$EMSC(x_i) = \\frac{x_i - a_i - c_i \\cdot \\lambda - d_i \\cdot \\lambda^2 - ...}{b_i}$$ polynomial terms (\\(\\lambda\\), \\(\\lambda^2\\), etc.) account wavelength-dependent baseline effects vary samples. use EMSC vs MSC: Use MSC simple additive/multiplicative scatter Use EMSC scatter effects vary wavelength Start degree=2, increase needed complex scatter","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_emsc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extended Multiplicative Scatter Correction (EMSC) — step_measure_emsc","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_emsc(degree = 2) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_exclude.html","id":null,"dir":"Reference","previous_headings":"","what":"Exclude Measurement Ranges — step_measure_exclude","title":"Exclude Measurement Ranges — step_measure_exclude","text":"step_measure_exclude() creates specification recipe step removes measurement points within specified x-axis range(s).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_exclude.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exclude Measurement Ranges — step_measure_exclude","text":"","code":"step_measure_exclude(   recipe,   ranges,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_exclude\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_exclude.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exclude Measurement Ranges — step_measure_exclude","text":"recipe recipe object. step added sequence operations recipe. ranges list numeric vectors, length 2 specifying ranges exclude c(min, max). Points location >= min <= max range removed. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_exclude.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exclude Measurement Ranges — step_measure_exclude","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_exclude.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Exclude Measurement Ranges — step_measure_exclude","text":"step removes measurements falling within specified ranges. useful : Removing solvent peaks chromatography Excluding system peaks artifacts Removing detector saturation regions Removing known interference regions spectroscopy Multiple ranges can excluded providing list ranges. Points falling within specified ranges removed.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_exclude.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exclude Measurement Ranges — step_measure_exclude","text":"","code":"library(recipes)  # Exclude specific regions (e.g., solvent peaks) rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_exclude(ranges = list(c(1, 5), c(95, 100))) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7  [89 × 2] #>  2     2  46    40.1    13.5  [89 × 2] #>  3     3  71     8.4    20.5  [89 × 2] #>  4     4  72.8   5.9    20.7  [89 × 2] #>  5     5  58.3  25.5    15.5  [89 × 2] #>  6     6  44    42.7    13.7  [89 × 2] #>  7     7  44    42.7    13.7  [89 × 2] #>  8     8  69.3  10.6    19.3  [89 × 2] #>  9     9  61.4  19.9    17.7  [89 × 2] #> 10    10  61.4  19.9    17.7  [89 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_filter_fourier.html","id":null,"dir":"Reference","previous_headings":"","what":"Fourier Low-Pass Filtering — step_measure_filter_fourier","title":"Fourier Low-Pass Filtering — step_measure_filter_fourier","text":"step_measure_filter_fourier() creates specification recipe step applies Fourier-domain low-pass filtering remove high-frequency noise.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_filter_fourier.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fourier Low-Pass Filtering — step_measure_filter_fourier","text":"","code":"step_measure_filter_fourier(   recipe,   measures = NULL,   cutoff = 0.1,   type = c(\"lowpass\", \"highpass\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_filter_fourier\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_filter_fourier.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fourier Low-Pass Filtering — step_measure_filter_fourier","text":"recipe recipe object. measures optional character vector measure column names. cutoff cutoff frequency fraction Nyquist frequency (0 0.5). Default 0.1. Frequencies attenuated. Tunable via fourier_cutoff(). type Type filter: \"lowpass\" (default) keeps low frequencies, \"highpass\" keeps high frequencies. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_filter_fourier.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fourier Low-Pass Filtering — step_measure_filter_fourier","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_filter_fourier.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fourier Low-Pass Filtering — step_measure_filter_fourier","text":"Fourier filtering transforms spectrum frequency domain using FFT, applies frequency mask, transforms back. effective : Removing periodic noise Smoothing precise frequency control Removing high-frequency detector noise cutoff specified fraction Nyquist frequency. cutoff 0.1 keeps lowest 10% frequencies.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_filter_fourier.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fourier Low-Pass Filtering — step_measure_filter_fourier","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_filter_fourier(cutoff = 0.1) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_impute.html","id":null,"dir":"Reference","previous_headings":"","what":"Impute Missing Values in Measurements — step_measure_impute","title":"Impute Missing Values in Measurements — step_measure_impute","text":"step_measure_impute() creates specification recipe step imputes (fills ) missing values (NA) measurement data using interpolation methods.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_impute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Impute Missing Values in Measurements — step_measure_impute","text":"","code":"step_measure_impute(   recipe,   measures = NULL,   method = c(\"linear\", \"spline\", \"constant\", \"mean\"),   max_gap = Inf,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_impute\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_impute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Impute Missing Values in Measurements — step_measure_impute","text":"recipe recipe object. measures optional character vector measure column names. method Imputation method: \"linear\" (default): Linear interpolation \"spline\": Cubic spline interpolation \"constant\": Nearest non-NA value \"mean\": Global mean non-NA values max_gap Maximum gap size impute. Gaps larger left NA. Default Inf (impute ). role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_impute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Impute Missing Values in Measurements — step_measure_impute","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_impute.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Impute Missing Values in Measurements — step_measure_impute","text":"Missing values can occur due : Removed spikes (despiking replacement set NA) Excluded regions Instrument gaps dropouts Linear spline interpolation use stats::approx() stats::spline() functions respectively. appropriate gaps small relative spectral features.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_impute.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Impute Missing Values in Measurements — step_measure_impute","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_impute(method = \"linear\") |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Ingest Measurements from a Single Column — step_measure_input_long","title":"Ingest Measurements from a Single Column — step_measure_input_long","text":"step_measure_input_long creates specification recipe step converts measures organized column analytical results (option column numeric indices) internal format used package.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ingest Measurements from a Single Column — step_measure_input_long","text":"","code":"step_measure_input_long(   recipe,   ...,   location,   col_name = \".measures\",   pad = FALSE,   role = \"measure\",   trained = FALSE,   columns = NULL,   skip = FALSE,   id = rand_id(\"measure_input_long\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ingest Measurements from a Single Column — step_measure_input_long","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose single column contains analytical measurements. selection order measurement's profile. location One selector functions choose single column locations analytical values. col_name single character string specifying name output column contain measure data. Defaults \".measures\". Use different names creating multiple measure columns (e.g., \".uv_spectrum\" \".ms_spectrum\"). pad Whether pad measurements ensure number values. useful missing values measurements. role used step since new variables created. trained logical indicate quantities preprocessing estimated. columns character vector column names determined recipe. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_long.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Ingest Measurements from a Single Column — step_measure_input_long","text":"step designed data format column analytical measurement (e.g., absorption, etc.) another location value (e.g., wave number, etc.). step_measure_input_long() collect data put format used internally package. data structure row independent experimental unit nested tibble sample's measure (measurement location). assumes unique combinations columns data define individual patterns associated pattern. case, special values might inappropriately restructured. best advice column type indicates unique sample number measure. example, 200 values measure 7 samples, input data (long format) 1,400 rows. advise column 7 unique values indicating rows correspond sample.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_long.html","id":"missing-data","dir":"Reference","previous_headings":"","what":"Missing Data","title":"Ingest Measurements from a Single Column — step_measure_input_long","text":"Currently, measure assumes equal numbers values within sample. missing values measurements, need pad missing values (opposed absent row long format). , error occur.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_long.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Ingest Measurements from a Single Column — step_measure_input_long","text":"tidy() step, tibble indicating original columns used reformat data.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_wide.html","id":null,"dir":"Reference","previous_headings":"","what":"Ingest Measurements in Separate Columns — step_measure_input_wide","title":"Ingest Measurements in Separate Columns — step_measure_input_wide","text":"step_measure_input_wide creates specification recipe step converts measures organized multiple columns internal format used package.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_wide.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ingest Measurements in Separate Columns — step_measure_input_wide","text":"","code":"step_measure_input_wide(   recipe,   ...,   role = \"measure\",   trained = FALSE,   columns = NULL,   location_values = NULL,   col_name = \".measures\",   skip = FALSE,   id = rand_id(\"measure_input_wide\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_wide.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ingest Measurements in Separate Columns — step_measure_input_wide","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variables step. See selections() details. role used step since new variables created. trained logical indicate quantities preprocessing estimated. columns character string selected variable names. field placeholder populated recipes::prep() used. location_values numeric vector values specify location measurements (e.g., wavelength etc.) order variables selected .... specified, sequence integers (starting 1L) used. col_name single character string specifying name output column contain measure data. Defaults \".measures\". Use different names creating multiple measure columns (e.g., \".uv_spectrum\" \".ms_spectrum\"). skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_wide.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Ingest Measurements in Separate Columns — step_measure_input_wide","text":"step designed data format analytical measurements separate columns. step_measure_input_wide() collect data put format used internally package. data structure row independent experimental unit nested tibble sample's measure (measurement location). assumes unique combinations columns data define individual patterns associated pattern. case, special values might inappropriately restructured. best advice column type indicates unique sample number measure. example, 20 rows input data set, columns analytically measurements show duplicate combinations 20 rows.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_wide.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Ingest Measurements in Separate Columns — step_measure_input_wide","text":"tidy() step, tibble indicating original columns used reformat data.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_input_wide.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ingest Measurements in Separate Columns — step_measure_input_wide","text":"","code":"data(meats, package = \"modeldata\")  # Outcome data is to the right names(meats) %>% tail(10) #>  [1] \"x_094\"   \"x_095\"   \"x_096\"   \"x_097\"   \"x_098\"   \"x_099\"   \"x_100\"   #>  [8] \"water\"   \"fat\"     \"protein\"  # ------------------------------------------------------------------------------ # Ingest data without adding the location (i.e. wave number) for the spectra  rec <-   recipe(water + fat + protein ~ ., data = meats) %>%   step_measure_input_wide(starts_with(\"x_\")) %>%   prep()  summary(rec) #> # A tibble: 4 × 4 #>   variable  type      role    source   #>   <chr>     <list>    <chr>   <chr>    #> 1 water     <chr [2]> outcome original #> 2 fat       <chr [2]> outcome original #> 3 protein   <chr [2]> outcome original #> 4 .measures <chr [1]> measure derived   # ------------------------------------------------------------------------------ # Ingest data without adding the location (i.e. wave number) for the spectra  # Make up some locations for the spectra's x-axis index <- seq(1, 2, length.out = 100)  rec <-   recipe(water + fat + protein ~ ., data = meats) %>%   step_measure_input_wide(starts_with(\"x_\"), location_values = index) %>%   prep()  summary(rec) #> # A tibble: 4 × 4 #>   variable  type      role    source   #>   <chr>     <list>    <chr>   <chr>    #> 1 water     <chr [2]> outcome original #> 2 fat       <chr [2]> outcome original #> 3 protein   <chr [2]> outcome original #> 4 .measures <chr [1]> measure derived"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_integrals.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Region Integrals — step_measure_integrals","title":"Calculate Region Integrals — step_measure_integrals","text":"step_measure_integrals() creates specification recipe step calculates integrated areas specified x-axis regions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_integrals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Region Integrals — step_measure_integrals","text":"","code":"step_measure_integrals(   recipe,   regions,   method = c(\"trapezoid\", \"simpson\"),   measures = NULL,   prefix = \"integral_\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_integrals\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_integrals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Region Integrals — step_measure_integrals","text":"recipe recipe object. regions named unnamed list numeric vectors, length 2 specifying regions c(min, max). example: list(peak1 = c(1000, 1100), peak2 = c(1500, 1600)). method Integration method: \"trapezoid\" (default) \"simpson\". measures optional character vector measure column names. prefix Prefix output column names. Default \"integral_\". role Role generated columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_integrals.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Region Integrals — step_measure_integrals","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_integrals.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Region Integrals — step_measure_integrals","text":"step calculates integrated area curve specified region. result added new predictor columns, one per region. Column naming: regions named: prefix + name (e.g., \"integral_peak1\") regions unnamed: prefix + index (e.g., \"integral_1\") Integration methods: \"trapezoid\": Trapezoidal rule, fast accurate smooth data \"simpson\": Simpson's rule, accurate smooth curves","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_integrals.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Region Integrals — step_measure_integrals","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_integrals(     regions = list(low = c(1, 30), mid = c(40, 60), high = c(70, 100))   ) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 8 #>       id water   fat protein .measures integral_low integral_mid integral_high #>    <int> <dbl> <dbl>   <dbl>    <meas>        <dbl>        <dbl>         <dbl> #>  1     1  60.5  22.5    16.7 [100 × 2]         77.1         61.8          93.6 #>  2     2  46    40.1    13.5 [100 × 2]         85.0         67.4         101.  #>  3     3  71     8.4    20.5 [100 × 2]         76.1         59.4          85.0 #>  4     4  72.8   5.9    20.7 [100 × 2]         83.1         64.6          94.2 #>  5     5  58.3  25.5    15.5 [100 × 2]         82.8         67.6         103.  #>  6     6  44    42.7    13.7 [100 × 2]         90.6         72.3         109.  #>  7     7  44    42.7    13.7 [100 × 2]         90.2         72.0         107.  #>  8     8  69.3  10.6    19.3 [100 × 2]         74.3         59.7          90.5 #>  9     9  61.4  19.9    17.7 [100 × 2]         98.3         78.8         119.  #> 10    10  61.4  19.9    17.7 [100 × 2]        102.          82.6         124.  #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_interpolate.html","id":null,"dir":"Reference","previous_headings":"","what":"Interpolate Gaps in Measurement Data — step_measure_interpolate","title":"Interpolate Gaps in Measurement Data — step_measure_interpolate","text":"step_measure_interpolate() creates specification recipe step fills gaps missing values measurement data using interpolation.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_interpolate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interpolate Gaps in Measurement Data — step_measure_interpolate","text":"","code":"step_measure_interpolate(   recipe,   ranges,   method = c(\"linear\", \"spline\"),   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_interpolate\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_interpolate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interpolate Gaps in Measurement Data — step_measure_interpolate","text":"recipe recipe object. ranges list numeric vectors specifying ranges interpolate. element vector length 2: c(min, max). method Interpolation method: \"linear\" \"spline\". Default \"linear\". measures optional character vector measure column names. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_interpolate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Interpolate Gaps in Measurement Data — step_measure_interpolate","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_interpolate.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Interpolate Gaps in Measurement Data — step_measure_interpolate","text":"step useful : Filling gaps left excluded regions need restoration Handling missing invalid data points Smoothing detector saturation regions interpolation uses data points immediately outside specified ranges estimate values within ranges.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_interpolate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Interpolate Gaps in Measurement Data — step_measure_interpolate","text":"","code":"library(recipes)  # Interpolate over a problematic region rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_interpolate(ranges = list(c(40, 50)), method = \"spline\") |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_kubelka_munk.html","id":null,"dir":"Reference","previous_headings":"","what":"Kubelka-Munk Transformation — step_measure_kubelka_munk","title":"Kubelka-Munk Transformation — step_measure_kubelka_munk","text":"step_measure_kubelka_munk() creates specification recipe step applies Kubelka-Munk transformation diffuse reflectance data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_kubelka_munk.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Kubelka-Munk Transformation — step_measure_kubelka_munk","text":"","code":"step_measure_kubelka_munk(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_kubelka_munk\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_kubelka_munk.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Kubelka-Munk Transformation — step_measure_kubelka_munk","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_kubelka_munk.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Kubelka-Munk Transformation — step_measure_kubelka_munk","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_kubelka_munk.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Kubelka-Munk Transformation — step_measure_kubelka_munk","text":"Kubelka-Munk transformation used diffuse reflectance spectroscopy convert reflectance quantity proportional concentration: $$f(R) = \\frac{(1-R)^2}{2R}$$ \\(R\\) reflectance (0 1). Important: Reflectance values range (0, 1). Values boundaries produce extreme values Inf. transformation commonly used : NIR diffuse reflectance spectroscopy Analysis powders solid samples Beer-Lambert law apply directly measurement locations preserved unchanged.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_kubelka_munk.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Kubelka-Munk Transformation — step_measure_kubelka_munk","text":"","code":"library(recipes)  # Assuming reflectance data in (0, 1) range # Note: meats_long has transmittance, this is illustrative rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_kubelka_munk()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_log.html","id":null,"dir":"Reference","previous_headings":"","what":"Log Transformation — step_measure_log","title":"Log Transformation — step_measure_log","text":"step_measure_log() creates specification recipe step applies logarithmic transformation measurement values.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_log.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Log Transformation — step_measure_log","text":"","code":"step_measure_log(   recipe,   base = exp(1),   offset = 0,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_log\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_log.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Log Transformation — step_measure_log","text":"recipe recipe object. step added sequence operations recipe. base base logarithm. Default exp(1) (natural log). Use 10 log10 transformation. offset numeric offset added values taking log. Default 0. Use small positive value (e.g., 1 log1p) handle zero near-zero values. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_log.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Log Transformation — step_measure_log","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_log.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Log Transformation — step_measure_log","text":"step applies transformation: $$y' = \\log_b(y + \\text{offset})$$ \\(b\\) base. Log transformation commonly used : Variance stabilization Normalizing skewed distributions Converting multiplicative relationships additive Warning: Non-positive values (offset) produce -Inf NaN. measurement locations preserved unchanged.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_log.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Log Transformation — step_measure_log","text":"","code":"library(recipes)  # Natural log transformation rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_log(offset = 1) |>   prep()  # Log10 transformation rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_log(base = 10) |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a Custom Function to Measurements — step_measure_map","title":"Apply a Custom Function to Measurements — step_measure_map","text":"step_measure_map() creates specification recipe step applies custom function sample's measurements. Use built-preprocessing steps (SNV, MSC, Savitzky-Golay) cover needs.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a Custom Function to Measurements — step_measure_map","text":"","code":"step_measure_map(   recipe,   fn,   ...,   measures = NULL,   verbosity = 1L,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_map\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a Custom Function to Measurements — step_measure_map","text":"recipe recipe object. step added sequence operations recipe. fn function apply sample's measurement tibble. function accept tibble location value columns return tibble structure. Can also formula (e.g., ~ { .x$value <- log1p(.x$value); .x }) converted via rlang::as_function(). ... Additional arguments passed fn baking. measures optional character vector measure column names process. NULL (default), measure columns processed. verbosity integer controlling output verbosity: 0: Silent - suppress messages output fn 1: Normal (default) - show output fn role used step since new variables created. trained logical indicate step trained. skip logical. step skipped recipe baked? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a Custom Function to Measurements — step_measure_map","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply a Custom Function to Measurements — step_measure_map","text":"step \"escape hatch\" custom sample-wise transformations covered built-steps. integrates fully recipes framework, meaning custom transformation : Applied consistently prep() bake() Included bundling recipes workflows Reproducible across sessions","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"function-requirements","dir":"Reference","previous_headings":"","what":"Function Requirements","title":"Apply a Custom Function to Measurements — step_measure_map","text":"function fn must: Accept tibble location value columns Return tibble location value columns change number rows (measurements must remain aligned)","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"when-to-use-this-step","dir":"Reference","previous_headings":"","what":"When to Use This Step","title":"Apply a Custom Function to Measurements — step_measure_map","text":"Use step_measure_map() domain-specific transformations covered built-steps: Custom baseline correction algorithms Specialized normalization methods Instrument-specific corrections Experimental preprocessing techniques common operations, prefer built-steps: Scatter correction → step_measure_snv() step_measure_msc() Smoothing/derivatives → step_measure_savitzky_golay()","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"prototyping-with-measure-map-","dir":"Reference","previous_headings":"","what":"Prototyping with measure_map()","title":"Apply a Custom Function to Measurements — step_measure_map","text":"developing custom transformation, may find helpful prototype using measure_map() baked data wrapping step. function works correctly, use `step_measure_ production pipelines.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a Custom Function to Measurements — step_measure_map","text":"","code":"library(recipes)  # Example 1: Custom log transformation log_transform <- function(x) {   x$value <- log1p(x$value)   x }  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_map(log_transform) |>   step_measure_snv() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows  # Example 2: Using formula syntax for inline transformations rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_map(~ {     # Subtract minimum to remove offset     .x$value <- .x$value - min(.x$value)     .x   }) |>   prep()  # Example 3: Using external package functions # (e.g., custom baseline from a spectroscopy package) if (FALSE) { # \\dontrun{ rec3 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_map(my_baseline_correction, method = \"als\") |>   step_measure_output_wide() } # }"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_moments.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Statistical Moments — step_measure_moments","title":"Calculate Statistical Moments — step_measure_moments","text":"step_measure_moments() creates specification recipe step calculates statistical moments spectra.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_moments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Statistical Moments — step_measure_moments","text":"","code":"step_measure_moments(   recipe,   moments = c(\"mean\", \"sd\", \"skewness\", \"kurtosis\"),   weighted = FALSE,   measures = NULL,   prefix = \"moment_\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_moments\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_moments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Statistical Moments — step_measure_moments","text":"recipe recipe object. moments Character vector specifying moments calculate. Options: \"mean\", \"sd\", \"skewness\", \"kurtosis\", \"entropy\". Default c(\"mean\", \"sd\", \"skewness\", \"kurtosis\"). weighted Logical. TRUE, moments weighted location values. Default FALSE. measures optional character vector measure column names. prefix Prefix output column names. Default \"moment_\". role Role generated columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_moments.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Statistical Moments — step_measure_moments","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_moments.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Statistical Moments — step_measure_moments","text":"step calculates statistical moments summarize distribution values spectrum: weighted = TRUE, location (x-axis) values used weights, can useful calculating center mass weighted statistics.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_moments.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Statistical Moments — step_measure_moments","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_moments(moments = c(\"mean\", \"sd\", \"skewness\")) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 8 #>       id water   fat protein .measures moment_mean moment_sd moment_skewness #>    <int> <dbl> <dbl>   <dbl>    <meas>       <dbl>     <dbl>           <dbl> #>  1     1  60.5  22.5    16.7 [100 × 2]        2.97     0.270          0.222  #>  2     2  46    40.1    13.5 [100 × 2]        3.24     0.234         -0.311  #>  3     3  71     8.4    20.5 [100 × 2]        2.82     0.206          0.536  #>  4     4  72.8   5.9    20.7 [100 × 2]        3.09     0.238          0.540  #>  5     5  58.3  25.5    15.5 [100 × 2]        3.25     0.326          0.102  #>  6     6  44    42.7    13.7 [100 × 2]        3.48     0.262         -0.387  #>  7     7  44    42.7    13.7 [100 × 2]        3.44     0.249         -0.405  #>  8     8  69.3  10.6    19.3 [100 × 2]        2.87     0.280          0.338  #>  9     9  61.4  19.9    17.7 [100 × 2]        3.79     0.329          0.0588 #> 10    10  61.4  19.9    17.7 [100 × 2]        3.94     0.345          0.0582 #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":null,"dir":"Reference","previous_headings":"","what":"Multiplicative Scatter Correction (MSC) — step_measure_msc","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"step_measure_msc() creates specification recipe step applies Multiplicative Scatter Correction spectral data. MSC removes physical light scatter accounting additive multiplicative effects.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"","code":"step_measure_msc(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   ref_spectra = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_msc\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. ref_spectra named list numeric vectors containing reference spectra computed training measure column. NULL step trained. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"Multiplicative Scatter Correction (MSC) normalization method attempts account additive multiplicative effects aligning spectrum reference spectrum. spectrum \\(x_i\\) reference \\(x_r\\), transformation : $$x_i = m_i \\cdot x_r + a_i$$ $$MSC(x_i) = \\frac{x_i - a_i}{m_i}$$ \\(a_i\\) \\(m_i\\) additive (intercept) multiplicative (slope) terms regressing \\(x_i\\) \\(x_r\\). reference spectrum computed mean training spectra prep() stored use applying transformation new data. MSC commonly used remove physical light scatter effects NIR spectroscopy caused differences particle size path length. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long(). measurement locations preserved unchanged.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"tidy() step, tibble columns terms (set \".measures\") id returned.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"Geladi, P., MacDougall, D., Martens, H. 1985. Linearization Scatter-Correction Near-Infrared Reflectance Spectra Meat. Applied Spectroscopy, 39(3):491-500.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_msc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Multiplicative Scatter Correction (MSC) — step_measure_msc","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_msc() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_averages.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","title":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","text":"step_measure_mw_averages() creates specification recipe step calculates molecular weight averages size exclusion chromatography data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_averages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","text":"","code":"step_measure_mw_averages(   recipe,   measures = NULL,   calibration = NULL,   integration_range = NULL,   output_cols = c(\"mn\", \"mw\", \"mz\", \"mp\", \"dispersity\"),   prefix = \"mw_\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_mw_averages\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_averages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","text":"recipe recipe object. measures optional character vector measure column names. calibration Calibration method converting x-axis log(MW). Can : NULL (default): Assumes x-axis already log10(MW) numeric vector length 2: Linear calibration c(slope, intercept) log10(MW) = slope * x + intercept \"auto\": Estimate data range (assumes typical polymer range) integration_range Optional numeric vector c(min, max) specifying x-axis range integration. NULL, uses full range. output_cols Character vector metrics calculate. Default includes : c(\"mn\", \"mw\", \"mz\", \"mp\", \"dispersity\"). prefix Prefix output column names. Default \"mw_\". role Role generated columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_averages.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_averages.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","text":"step calculates standard molecular weight averages SEC/GPC data: detector signal assumed proportional weight concentration. RI detection, typically valid. UV detection, response factors may need applied first using step_measure_calibrate_y(). Prerequisites: Data baseline corrected X-axis represent retention time/volume log(MW) Integration limits exclude solvent peaks","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_averages.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Molecular Weight Averages for SEC/GPC — step_measure_mw_averages","text":"","code":"library(recipes)  # Assuming x-axis is already calibrated to log10(MW) # rec <- recipe(~., data = gpc_data) |> #   step_measure_input_wide(starts_with(\"signal_\")) |> #   step_measure_baseline_als() |> #   step_measure_mw_averages() |> #   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_distribution.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","title":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","text":"step_measure_mw_distribution() creates specification recipe step generates molecular weight distribution curves SEC/GPC data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_distribution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","text":"","code":"step_measure_mw_distribution(   recipe,   measures = NULL,   type = c(\"differential\", \"cumulative\", \"both\"),   calibration = NULL,   n_points = 100L,   mw_range = NULL,   normalize = TRUE,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_mw_distribution\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_distribution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","text":"recipe recipe object. measures optional character vector measure column names. type Type distribution generate: \"differential\" (default): dW/d(log M) differential distribution \"cumulative\": Cumulative weight fraction distribution \"\": Generate distributions calibration Calibration method converting x-axis log(MW). See step_measure_mw_averages() details. n_points Number points output distribution. Default 100. NULL, uses original data resolution. mw_range Optional numeric vector c(min, max) specifying MW range output distribution. NULL, uses range data. normalize Logical. differential distribution normalized integrate 1? Default TRUE. role Role generated columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_distribution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_distribution.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","text":"step transforms raw chromatogram standard MW distribution representations: Differential Distribution (dW/d(log M)): weight fraction per unit log(MW). representation preferred area curve represents weight fraction MW range. Cumulative Distribution: cumulative weight fraction low high MW. Values range 0 1. output replaces .measures column distribution data, location contains log10(MW) values value contains distribution values.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_distribution.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Molecular Weight Distribution Curve — step_measure_mw_distribution","text":"","code":"library(recipes)  # Generate differential MW distribution # rec <- recipe(~., data = gpc_data) |> #   step_measure_input_wide(starts_with(\"signal_\")) |> #   step_measure_baseline_als() |> #   step_measure_mw_distribution(type = \"differential\") |> #   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_fractions.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","title":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","text":"step_measure_mw_fractions() creates specification recipe step calculates weight fractions specified molecular weight cutoffs.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_fractions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","text":"","code":"step_measure_mw_fractions(   recipe,   measures = NULL,   cutoffs = c(1000, 10000, 1e+05),   calibration = NULL,   integration_range = NULL,   prefix = \"frac_\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_mw_fractions\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_fractions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","text":"recipe recipe object. measures optional character vector measure column names. cutoffs Numeric vector MW cutoff values. cutoff, step calculates weight fraction value. calibration Calibration method converting x-axis log(MW). See step_measure_mw_averages() details. integration_range Optional numeric vector c(min, max) specifying x-axis range integration. NULL, uses full range. prefix Prefix output column names. Default \"frac_\". role Role generated columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_fractions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_fractions.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","text":"cutoff value C, step calculates: frac_below_C: Weight fraction MW < C frac_above_C: Weight fraction MW >= C fractions sum 1.0 useful characterizing polymer distributions. Common cutoffs include: 1000 Da oligomer content 10000 Da low MW fraction 100000 Da high MW fraction","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_mw_fractions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Molecular Weight Fractions for SEC/GPC — step_measure_mw_fractions","text":"","code":"library(recipes)  # Calculate fractions at multiple cutoffs # rec <- recipe(~., data = gpc_data) |> #   step_measure_input_wide(starts_with(\"signal_\")) |> #   step_measure_baseline_als() |> #   step_measure_mw_fractions(cutoffs = c(1000, 10000, 100000)) |> #   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_auc.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize by Area Under Curve — step_measure_normalize_auc","title":"Normalize by Area Under Curve — step_measure_normalize_auc","text":"step_measure_normalize_auc() creates specification recipe step divides spectrum area curve (computed using trapezoidal integration). useful chromatography peak areas meaningful.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_auc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize by Area Under Curve — step_measure_normalize_auc","text":"","code":"step_measure_normalize_auc(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_auc\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_auc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize by Area Under Curve — step_measure_normalize_auc","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_auc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize by Area Under Curve — step_measure_normalize_auc","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_auc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize by Area Under Curve — step_measure_normalize_auc","text":"area curve computed using trapezoidal integration: $$AUC = \\sum_{=1}^{n-1} \\frac{(y_i + y_{+1})}{2} \\cdot (x_{+1} - x_i)$$ \\(y\\) values \\(x\\) locations. transformation, AUC spectrum equal 1. AUC zero NA, warning issued original values returned unchanged. least 2 points required integration. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_auc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normalize by Area Under Curve — step_measure_normalize_auc","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_auc() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_istd.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal Standard Normalization — step_measure_normalize_istd","title":"Internal Standard Normalization — step_measure_normalize_istd","text":"step_measure_normalize_istd() alias step_measure_normalize_peak() domain-specific naming chromatography mass spectrometry users. normalizes spectra dividing value computed specific region (internal standard peak).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_istd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal Standard Normalization — step_measure_normalize_istd","text":"","code":"step_measure_normalize_istd(   recipe,   location_min,   location_max,   method = \"mean\",   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_istd\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_istd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal Standard Normalization — step_measure_normalize_istd","text":"recipe recipe object. step added sequence operations recipe. location_min Numeric. lower bound region use normalization. parameter tunable peak_location_min(). location_max Numeric. upper bound region use normalization. parameter tunable peak_location_max(). method Character. summary statistic compute region. One \"mean\" (default), \"max\", \"integral\". measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_istd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal Standard Normalization — step_measure_normalize_istd","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_istd.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Internal Standard Normalization — step_measure_normalize_istd","text":"function identical step_measure_normalize_peak() uses terminology familiar chromatography mass spectrometry practitioners. Internal standard (ISTD) normalization commonly used correct : Injection volume variations Ionization efficiency differences Matrix effects Instrument drift internal standard compound : chemically stable naturally occur samples Elutes distinct region consistent response","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_istd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Internal Standard Normalization — step_measure_normalize_istd","text":"","code":"library(recipes)  # Normalize to internal standard peak region (channels 50-60) rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_istd(     location_min = 50,     location_max = 60,     method = \"integral\"   )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_max.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize by Maximum Value — step_measure_normalize_max","title":"Normalize by Maximum Value — step_measure_normalize_max","text":"step_measure_normalize_max() creates specification recipe step divides spectrum maximum value. useful peak-focused analysis want highest peak equal 1.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_max.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize by Maximum Value — step_measure_normalize_max","text":"","code":"step_measure_normalize_max(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_max\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_max.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize by Maximum Value — step_measure_normalize_max","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_max.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize by Maximum Value — step_measure_normalize_max","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_max.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize by Maximum Value — step_measure_normalize_max","text":"spectrum \\(x\\), transformation : $$x_{norm} = \\frac{x}{\\max(x)}$$ transformation, maximum value spectrum equal 1. maximum zero NA, warning issued original values returned unchanged. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_max.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normalize by Maximum Value — step_measure_normalize_max","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_max() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_peak.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize to a Specific Peak Region — step_measure_normalize_peak","title":"Normalize to a Specific Peak Region — step_measure_normalize_peak","text":"step_measure_normalize_peak() creates specification recipe step divides spectrum summary statistic computed specified region. commonly used internal standard normalization.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_peak.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize to a Specific Peak Region — step_measure_normalize_peak","text":"","code":"step_measure_normalize_peak(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   location_min = NULL,   location_max = NULL,   method = \"mean\",   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_peak\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_peak.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize to a Specific Peak Region — step_measure_normalize_peak","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. location_min Numeric. lower bound region use normalization. parameter tunable peak_location_min(). location_max Numeric. upper bound region use normalization. parameter tunable peak_location_max(). method Character. summary statistic compute region. One \"mean\" (default), \"max\", \"integral\". skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_peak.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize to a Specific Peak Region — step_measure_normalize_peak","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_peak.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize to a Specific Peak Region — step_measure_normalize_peak","text":"spectrum, step: Selects values region [location_min, location_max] Computes summary statistic (mean, max, integral) region Divides entire spectrum value useful internal standard peak known location want normalize spectra peak. location_min location_max parameters tunable peak_location_min() peak_location_max() hyperparameter optimization. values fall within specified region, error raised. computed normalizer zero NA, warning issued original values returned unchanged. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_peak.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normalize to a Specific Peak Region — step_measure_normalize_peak","text":"","code":"library(recipes)  # Normalize to mean of region 40-60 rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_peak(location_min = 40, location_max = 60) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize to Range 0-1 — step_measure_normalize_range","title":"Normalize to Range 0-1 — step_measure_normalize_range","text":"step_measure_normalize_range() creates specification recipe step applies min-max normalization scale spectrum range 0 1.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize to Range 0-1 — step_measure_normalize_range","text":"","code":"step_measure_normalize_range(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_range\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize to Range 0-1 — step_measure_normalize_range","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize to Range 0-1 — step_measure_normalize_range","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_range.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize to Range 0-1 — step_measure_normalize_range","text":"spectrum \\(x\\), transformation : $$x_{norm} = \\frac{x - \\min(x)}{\\max(x) - \\min(x)}$$ transformation, minimum value spectrum 0 maximum 1. range zero (constant spectrum), warning issued centered values returned (minimum subtracted scaling). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_range.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normalize to Range 0-1 — step_measure_normalize_range","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_range() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_sum.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","title":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","text":"step_measure_normalize_sum() creates specification recipe step divides spectrum sum (total intensity). useful comparing relative abundances across samples different total signals.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_sum.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","text":"","code":"step_measure_normalize_sum(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_sum\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_sum.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_sum.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_sum.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","text":"spectrum \\(x\\), transformation : $$x_{norm} = \\frac{x}{\\sum x}$$ transformation, sum spectrum equal 1. sum zero NA, warning issued original values returned unchanged. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_sum.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normalize by Sum (Total Intensity) — step_measure_normalize_sum","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_sum() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_vector.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","title":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","text":"step_measure_normalize_vector() creates specification recipe step divides spectrum L2 (Euclidean) norm. transformation, spectrum unit length Euclidean space.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_vector.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","text":"","code":"step_measure_normalize_vector(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_normalize_vector\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_vector.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_vector.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_vector.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","text":"spectrum \\(x\\), transformation : $$x_{norm} = \\frac{x}{\\|x\\|_2} = \\frac{x}{\\sqrt{\\sum x^2}}$$ transformation, L2 norm spectrum equal 1. L2 norm zero NA, warning issued original values returned unchanged. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_normalize_vector.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Normalize by L2 (Euclidean) Norm — step_measure_normalize_vector","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_normalize_vector() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":null,"dir":"Reference","previous_headings":"","what":"Orthogonal Signal Correction (OSC) — step_measure_osc","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"step_measure_osc() creates specification recipe step applies Orthogonal Signal Correction remove variation orthogonal outcome.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"","code":"step_measure_osc(   recipe,   n_components = 1L,   tolerance = 1e-06,   max_iter = 100L,   measures = NULL,   role = NA,   trained = FALSE,   weights = NULL,   loadings = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_osc\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"recipe recipe object. n_components Number orthogonal components remove. Default 1. tolerance Convergence tolerance NIPALS algorithm. Default 1e-6. max_iter Maximum iterations NIPALS. Default 100. measures optional character vector measure column names. role used. trained Logical indicating step trained. weights learned orthogonal weights (training). loadings learned orthogonal loadings (training). skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"Orthogonal Signal Correction (OSC) removes variation X orthogonal Y (outcome). useful removing systematic variation related response. Algorithm: Compute initial score t Y using SVD Orthogonalize t respect Y Iterate NIPALS find orthogonal components Remove orthogonal components X Important: recipe must least one outcome variable role \"outcome\" Outcomes automatically detected recipe's role definitions Multiple outcomes supported (multivariate Y) OSC originally described Wold et al. (1998) NIR spectroscopy.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"Wold, S., Antti, H., Lindgren, F., Ohman, J. (1998). Orthogonal signal correction near-infrared spectra. Chemometrics Intelligent Laboratory Systems, 44(1-2), 175-185.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_osc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Orthogonal Signal Correction (OSC) — step_measure_osc","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_osc(n_components = 2) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Reorganize Measurements to Two Columns — step_measure_output_long","title":"Reorganize Measurements to Two Columns — step_measure_output_long","text":"step_measure_output_long creates specification recipe","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reorganize Measurements to Two Columns — step_measure_output_long","text":"","code":"step_measure_output_long(   recipe,   values_to = \".measure\",   location_to = \".location\",   measures = NULL,   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = rand_id(\"measure_output_long\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reorganize Measurements to Two Columns — step_measure_output_long","text":"recipe recipe object. step added sequence operations recipe. values_to single character string column containing analytical measurement. location_to single character string column containing location measurement (e.g. wavenumber index). measures optional single character string specifying measure column output. NULL (default) one measure column exists, column used. multiple measure columns exist measures NULL, error thrown prompting specify column output. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_long.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Reorganize Measurements to Two Columns — step_measure_output_long","text":"step converts measures format columns measurement corresponding location (.e., \"long\" format). step designed convert analytical measurements internal data structure two column format.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_long.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reorganize Measurements to Two Columns — step_measure_output_long","text":"","code":"library(dplyr)  data(glucose_bioreactors) bioreactors_small$batch_sample <- NULL  small_tr <- bioreactors_small[1:200, ] small_te <- bioreactors_small[201:210, ]  small_rec <-   recipe(glucose ~ ., data = small_tr) %>%   update_role(batch_id, day, new_role = \"id columns\") %>%   step_measure_input_wide(`400`:`3050`) %>%   prep()  # Before reformatting:  small_rec %>% bake(new_data = small_te) #> # A tibble: 10 × 4 #>    batch_id   day glucose   .measures #>    <chr>    <int>   <dbl>      <meas> #>  1 S_15         5    2.04 [2,651 × 2] #>  2 S_15         6    5.56 [2,651 × 2] #>  3 S_15         7    4.65 [2,651 × 2] #>  4 S_15         8    9.91 [2,651 × 2] #>  5 S_15         9    4.96 [2,651 × 2] #>  6 S_15        10    6.78 [2,651 × 2] #>  7 S_15        11    6.72 [2,651 × 2] #>  8 S_15        12    4.69 [2,651 × 2] #>  9 S_15        13    6.30 [2,651 × 2] #> 10 S_15        14    3.10 [2,651 × 2]  # After reformatting:  output_rec <-   small_rec %>%   step_measure_output_long() %>%   prep()  output_rec %>% bake(new_data = small_te) #> # A tibble: 26,510 × 5 #>    batch_id   day glucose .location .measure #>    <chr>    <int>   <dbl>     <dbl>    <dbl> #>  1 S_15         5    2.04         1  760094. #>  2 S_15         5    2.04         2  779053. #>  3 S_15         5    2.04         3  797154. #>  4 S_15         5    2.04         4  817226. #>  5 S_15         5    2.04         5  832725. #>  6 S_15         5    2.04         6  840075. #>  7 S_15         5    2.04         7  841721. #>  8 S_15         5    2.04         8  832112. #>  9 S_15         5    2.04         9  819494. #> 10 S_15         5    2.04        10  799601. #> # ℹ 26,500 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_wide.html","id":null,"dir":"Reference","previous_headings":"","what":"Reorganize Measurements to Separate Columns — step_measure_output_wide","title":"Reorganize Measurements to Separate Columns — step_measure_output_wide","text":"step_measure_output_wide creates specification recipe step converts measures multiple columns (.e., \"wide\" format).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_wide.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reorganize Measurements to Separate Columns — step_measure_output_wide","text":"","code":"step_measure_output_wide(   recipe,   prefix = \"measure_\",   measures = NULL,   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = rand_id(\"measure_output_wide\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_wide.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reorganize Measurements to Separate Columns — step_measure_output_wide","text":"recipe recipe object. step added sequence operations recipe. prefix character string used name new columns. measures optional single character string specifying measure column output. NULL (default) one measure column exists, column used. multiple measure columns exist measures NULL, error thrown prompting specify column output. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_wide.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Reorganize Measurements to Separate Columns — step_measure_output_wide","text":"step designed convert analytical measurements internal data structure separate columns. Wide outputs can helpful want use standard recipes steps measuresments, recipes::step_pca(), recipes::step_pls(), .","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_output_wide.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reorganize Measurements to Separate Columns — step_measure_output_wide","text":"","code":"library(dplyr)  data(glucose_bioreactors) bioreactors_small$batch_sample <- NULL  small_tr <- bioreactors_small[1:200, ] small_te <- bioreactors_small[201:210, ]  small_rec <-   recipe(glucose ~ ., data = small_tr) %>%   update_role(batch_id, day, new_role = \"id columns\") %>%   step_measure_input_wide(`400`:`3050`) %>%   prep()  # Before reformatting:  small_rec %>% bake(new_data = small_te) #> # A tibble: 10 × 4 #>    batch_id   day glucose   .measures #>    <chr>    <int>   <dbl>      <meas> #>  1 S_15         5    2.04 [2,651 × 2] #>  2 S_15         6    5.56 [2,651 × 2] #>  3 S_15         7    4.65 [2,651 × 2] #>  4 S_15         8    9.91 [2,651 × 2] #>  5 S_15         9    4.96 [2,651 × 2] #>  6 S_15        10    6.78 [2,651 × 2] #>  7 S_15        11    6.72 [2,651 × 2] #>  8 S_15        12    4.69 [2,651 × 2] #>  9 S_15        13    6.30 [2,651 × 2] #> 10 S_15        14    3.10 [2,651 × 2]  # After reformatting:  output_rec <-   small_rec %>%   step_measure_output_wide() %>%   prep()  output_rec %>% bake(new_data = small_te) #> # A tibble: 10 × 2,654 #>    batch_id   day glucose measure_0001 measure_0002 measure_0003 measure_0004 #>    <chr>    <int>   <dbl>        <dbl>        <dbl>        <dbl>        <dbl> #>  1 S_15         5    2.04      760094.      779053.      797154.      817226. #>  2 S_15         6    5.56      854812.      874105.      893653.      912190. #>  3 S_15         7    4.65      961786.      979449.     1000054.     1019400. #>  4 S_15         8    9.91     1092681.     1110867.     1132371.     1151944. #>  5 S_15         9    4.96     1243318.     1259961.     1281630.     1301011. #>  6 S_15        10    6.78     1500414.     1517867.     1536436.     1557016. #>  7 S_15        11    6.72     1818328.     1836446.     1856983.     1876906. #>  8 S_15        12    4.69     2035750.     2053903.     2073901.     2093514. #>  9 S_15        13    6.30     2192191.     2211502.     2230969.     2251089. #> 10 S_15        14    3.10     2353638.     2371877.     2392865.     2412822. #> # ℹ 2,647 more variables: measure_0005 <dbl>, measure_0006 <dbl>, #> #   measure_0007 <dbl>, measure_0008 <dbl>, measure_0009 <dbl>, #> #   measure_0010 <dbl>, measure_0011 <dbl>, measure_0012 <dbl>, #> #   measure_0013 <dbl>, measure_0014 <dbl>, measure_0015 <dbl>, #> #   measure_0016 <dbl>, measure_0017 <dbl>, measure_0018 <dbl>, #> #   measure_0019 <dbl>, measure_0020 <dbl>, measure_0021 <dbl>, #> #   measure_0022 <dbl>, measure_0023 <dbl>, measure_0024 <dbl>, …"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_deconvolve.html","id":null,"dir":"Reference","previous_headings":"","what":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","title":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","text":"step_measure_peaks_deconvolve() creates specification recipe step resolves overlapping peaks using curve fitting. step requires peaks detected first using step_measure_peaks_detect().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_deconvolve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","text":"","code":"step_measure_peaks_deconvolve(   recipe,   model = c(\"gaussian\", \"emg\", \"bigaussian\"),   max_iter = 100L,   tol = 1e-06,   peaks_col = \".peaks\",   measures_col = \".measures\",   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_peaks_deconvolve\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_deconvolve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","text":"recipe recipe object. model Peak model use: \"gaussian\" (symmetric), \"emg\" (exponentially modified Gaussian tailing peaks), \"bigaussian\" (asymmetric). Default \"gaussian\". max_iter Maximum iterations optimization. Default 100. tol Convergence tolerance. Default 1e-6. peaks_col Name peaks column. Default \".peaks\". measures_col Name measures column. Default \".measures\". role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_deconvolve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","text":"updated recipe new step added. .peaks column updated deconvolved peak parameters fitted areas.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_deconvolve.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","text":"Peak deconvolution fits mathematical models overlapping peaks determine individual contributions. essential quantitative analysis peaks baseline-resolved. Peak Models: gaussian: Symmetric Gaussian peak (3 params: height, center, width) emg: Exponentially Modified Gaussian (4 params, handles tailing) bigaussian: Bi-Gaussian (5 params, flexible asymmetry) optimization uses initial estimates detected peak positions refines minimize residual sum squares.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_deconvolve.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Deconvolve Overlapping Peaks — step_measure_peaks_deconvolve","text":"","code":"library(recipes)  # Deconvolve overlapping peaks # rec <- recipe(~., data = chromatogram_data) |> #   step_measure_input_long(signal, location = vars(time)) |> #   step_measure_peaks_detect(method = \"derivative\") |> #   step_measure_peaks_deconvolve(model = \"gaussian\") |> #   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_detect.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect Peaks in Measurements — step_measure_peaks_detect","title":"Detect Peaks in Measurements — step_measure_peaks_detect","text":"step_measure_peaks_detect() creates specification recipe step detects peaks measurement data stores new .peaks column.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_detect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect Peaks in Measurements — step_measure_peaks_detect","text":"","code":"step_measure_peaks_detect(   recipe,   method = c(\"prominence\", \"derivative\"),   min_height = 0,   min_distance = 0,   min_prominence = 0,   snr_threshold = FALSE,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_peaks_detect\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_detect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect Peaks in Measurements — step_measure_peaks_detect","text":"recipe recipe object. method Peak detection method. One \"prominence\" (default) \"derivative\". min_height Minimum peak height. snr_threshold = TRUE, interpreted signal--noise ratio threshold. min_distance Minimum distance peaks x-axis units. min_prominence Minimum peak prominence (method = \"prominence\"). snr_threshold Logical. TRUE, min_height interpreted signal--noise ratio. Noise estimated MAD signal. measures Optional character vector measure column names. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_detect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect Peaks in Measurements — step_measure_peaks_detect","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_detect.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect Peaks in Measurements — step_measure_peaks_detect","text":"step detects peaks measurement data creates new .peaks column containing detected peaks sample. original .measures column preserved. Detection methods: \"prominence\": Finds local maxima calculates prominence (much peak stands surrounding signal). robust noise. \"derivative\": Finds peaks detecting zero-crossings first derivative. Faster sensitive noise. Peak properties stored: peak_id: Integer identifier location: X-axis position peak apex height: Y-value peak apex left_base, right_base: X-axis positions peak boundaries area: Initially NA; use step_measure_peaks_integrate() calculate","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_detect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detect Peaks in Measurements — step_measure_peaks_detect","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_peaks_detect(min_height = 0.5, min_distance = 5) |>   prep()  result <- bake(rec, new_data = NULL) # Result now has .peaks column alongside .measures"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_filter.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter Peaks by Criteria — step_measure_peaks_filter","title":"Filter Peaks by Criteria — step_measure_peaks_filter","text":"step_measure_peaks_filter() creates specification recipe step filters detected peaks based various criteria.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_filter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter Peaks by Criteria — step_measure_peaks_filter","text":"","code":"step_measure_peaks_filter(   recipe,   min_height = NULL,   min_area = NULL,   min_area_pct = NULL,   min_prominence = NULL,   max_peaks = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_peaks_filter\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_filter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter Peaks by Criteria — step_measure_peaks_filter","text":"recipe recipe object. min_height Minimum peak height. Peaks removed. min_area Minimum peak area. Requires prior integration. min_area_pct Minimum area percentage total. Peaks area less percentage total peak area removed. min_prominence Minimum peak prominence. max_peaks Maximum number peaks keep (keeps largest area height). role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_filter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter Peaks by Criteria — step_measure_peaks_filter","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_filter.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Filter Peaks by Criteria — step_measure_peaks_filter","text":"step removes peaks meet specified criteria. Multiple criteria can combined - peaks must pass specified filters.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_filter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter Peaks by Criteria — step_measure_peaks_filter","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_peaks_detect(min_height = 0.3) |>   step_measure_peaks_integrate() |>   step_measure_peaks_filter(min_area_pct = 1) |>   prep()  result <- bake(rec, new_data = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_integrate.html","id":null,"dir":"Reference","previous_headings":"","what":"Integrate Peak Areas — step_measure_peaks_integrate","title":"Integrate Peak Areas — step_measure_peaks_integrate","text":"step_measure_peaks_integrate() creates specification recipe step calculates area detected peak.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_integrate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Integrate Peak Areas — step_measure_peaks_integrate","text":"","code":"step_measure_peaks_integrate(   recipe,   method = c(\"trapezoid\", \"simpson\"),   baseline = c(\"local\", \"none\", \"global\"),   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_peaks_integrate\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_integrate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Integrate Peak Areas — step_measure_peaks_integrate","text":"recipe recipe object. method Integration method. One \"trapezoid\" (default) \"simpson\". baseline Baseline handling. One \"local\" (linear interpolation peak bases), \"none\" (integrate zero), \"global\" (use minimum value baseline). measures Optional character vector measure column names. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_integrate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Integrate Peak Areas — step_measure_peaks_integrate","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_integrate.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Integrate Peak Areas — step_measure_peaks_integrate","text":"step calculates area peak detected step_measure_peaks_detect(). areas stored area column .peaks tibble. Integration methods: \"trapezoid\": Trapezoidal rule integration. Fast accurate well-resolved peaks. \"simpson\": Simpson's rule integration. accurate smooth curves requires odd number points. Baseline handling: \"local\": Subtracts linear baseline connecting left right peak bases integration. \"none\": Integrates directly y=0. \"global\": Subtracts minimum value peak region.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_integrate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Integrate Peak Areas — step_measure_peaks_integrate","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_peaks_detect(min_height = 0.5) |>   step_measure_peaks_integrate() |>   prep()  result <- bake(rec, new_data = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_to_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","title":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","text":"step_measure_peaks_to_table() creates specification recipe step converts peaks list-column wide format one column per peak property.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_to_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","text":"","code":"step_measure_peaks_to_table(   recipe,   prefix = \"peak_\",   properties = c(\"location\", \"height\", \"area\"),   max_peaks = 10,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_peaks_to_table\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_to_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","text":"recipe recipe object. prefix Prefix generated column names. Default \"peak_\". properties peak properties include. Default includes location, height, area peak. max_peaks Maximum number peaks include output. sample peaks, first max_peaks included. role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_to_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_to_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","text":"step converts peak data wide format suitable modeling. peak, creates columns like peak_1_location, peak_1_height, peak_1_area, etc. .peaks .measures columns removed conversion.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_peaks_to_table.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Peaks to Tidy Table — step_measure_peaks_to_table","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_peaks_detect(min_height = 0.5) |>   step_measure_peaks_integrate() |>   step_measure_peaks_to_table(max_peaks = 5) |>   prep()  result <- bake(rec, new_data = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_outlier.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect Outlier Samples — step_measure_qc_outlier","title":"Detect Outlier Samples — step_measure_qc_outlier","text":"step_measure_qc_outlier() creates specification recipe step detects outlier samples using Mahalanobis distance PCA-based methods. new column added indicating outlier status.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_outlier.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect Outlier Samples — step_measure_qc_outlier","text":"","code":"step_measure_qc_outlier(   recipe,   measures = NULL,   method = c(\"mahalanobis\", \"pca\"),   threshold = 3,   n_components = NULL,   new_col = \".outlier\",   new_col_score = \".outlier_score\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_qc_outlier\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_outlier.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect Outlier Samples — step_measure_qc_outlier","text":"recipe recipe object. measures optional character vector measure column names. method Detection method: \"mahalanobis\" (default): Mahalanobis distance robust covariance \"pca\": PCA score-based outliers (Hotelling's T^2) threshold Threshold outlier detection standard deviation units. Default 3. Tunable via outlier_threshold(). n_components PCA method, number components use. Default NULL (auto-select based variance explained). new_col Name new outlier flag column. Default \".outlier\". new_col_score Name outlier score column. Default \".outlier_score\". role Role new columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_outlier.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect Outlier Samples — step_measure_qc_outlier","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_outlier.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect Outlier Samples — step_measure_qc_outlier","text":"Outlier samples can arise measurement errors, sample preparation issues, genuine unusual samples. step helps identify . Mahalanobis method: Computes multivariate distance sample center distribution, accounting correlations. Uses robust estimation center covariance via median MAD. PCA method: Projects data onto principal components computes Hotelling's T^2 statistic. Samples extreme scores flagged. Two columns added: .outlier: Logical flag .outlier_score: Numeric score (higher = extreme)","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_outlier.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detect Outlier Samples — step_measure_qc_outlier","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_qc_outlier(threshold = 3) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 7 #>       id water   fat protein .measures .outlier .outlier_score #>    <int> <dbl> <dbl>   <dbl>    <meas> <lgl>             <dbl> #>  1     1  60.5  22.5    16.7 [100 × 2] FALSE             0.305 #>  2     2  46    40.1    13.5 [100 × 2] FALSE             0.323 #>  3     3  71     8.4    20.5 [100 × 2] FALSE             0.626 #>  4     4  72.8   5.9    20.7 [100 × 2] FALSE             0.133 #>  5     5  58.3  25.5    15.5 [100 × 2] FALSE             0.310 #>  6     6  44    42.7    13.7 [100 × 2] FALSE             0.793 #>  7     7  44    42.7    13.7 [100 × 2] FALSE             0.731 #>  8     8  69.3  10.6    19.3 [100 × 2] FALSE             0.522 #>  9     9  61.4  19.9    17.7 [100 × 2] FALSE             1.44  #> 10    10  61.4  19.9    17.7 [100 × 2] FALSE             1.78  #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_saturated.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect Saturated Measurements — step_measure_qc_saturated","title":"Detect Saturated Measurements — step_measure_qc_saturated","text":"step_measure_qc_saturated() creates specification recipe step detects saturated (clipped) regions measurements adds metadata columns indicating saturation status.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_saturated.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect Saturated Measurements — step_measure_qc_saturated","text":"","code":"step_measure_qc_saturated(   recipe,   measures = NULL,   upper_limit = NULL,   lower_limit = NULL,   tolerance = 0.01,   new_col_flag = \".saturated\",   new_col_pct = \".sat_pct\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_qc_saturated\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_saturated.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect Saturated Measurements — step_measure_qc_saturated","text":"recipe recipe object. measures optional character vector measure column names. upper_limit Upper saturation threshold. Default NULL (auto-detect). lower_limit Lower saturation threshold. Default NULL (auto-detect). tolerance close limit counts saturated. Default 0.01. new_col_flag Name column saturation flag. Default \".saturated\". new_col_pct Name column saturation percentage. Default \".sat_pct\". role Role new columns. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_saturated.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect Saturated Measurements — step_measure_qc_saturated","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_saturated.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect Saturated Measurements — step_measure_qc_saturated","text":"Saturation occurs detector response reaches maximum (minimum) capacity. Saturated data points lose quantitative information may need special handling. limits specified, auto-detected values appearing flat regions extreme values (using min() max()). Two new columns added: .saturated: Logical, TRUE saturation detected .sat_pct: Percentage points saturated","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_saturated.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detect Saturated Measurements — step_measure_qc_saturated","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_qc_saturated() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 7 #>       id water   fat protein .measures .saturated .sat_pct #>    <int> <dbl> <dbl>   <dbl>    <meas> <lgl>         <dbl> #>  1     1  60.5  22.5    16.7 [100 × 2] FALSE             0 #>  2     2  46    40.1    13.5 [100 × 2] FALSE             0 #>  3     3  71     8.4    20.5 [100 × 2] FALSE             0 #>  4     4  72.8   5.9    20.7 [100 × 2] FALSE             0 #>  5     5  58.3  25.5    15.5 [100 × 2] FALSE             0 #>  6     6  44    42.7    13.7 [100 × 2] FALSE             0 #>  7     7  44    42.7    13.7 [100 × 2] FALSE             0 #>  8     8  69.3  10.6    19.3 [100 × 2] FALSE             0 #>  9     9  61.4  19.9    17.7 [100 × 2] FALSE             0 #> 10    10  61.4  19.9    17.7 [100 × 2] FALSE             0 #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_snr.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","title":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","text":"step_measure_qc_snr() creates specification recipe step calculates signal--noise ratio (SNR) measurement adds new column. useful quality control filtering.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_snr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","text":"","code":"step_measure_qc_snr(   recipe,   measures = NULL,   new_col = \".snr\",   signal_method = c(\"max\", \"range\", \"rms\"),   noise_method = c(\"diff\", \"mad\", \"residual\"),   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_qc_snr\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_snr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","text":"recipe recipe object. measures optional character vector measure column names. new_col Name new column store SNR values. Default \".snr\". signal_method estimate signal: \"max\" (default): Maximum absolute value \"range\": Peak--peak range \"rms\": Root mean square noise_method estimate noise: \"diff\" (default): RMS first differences (estimates high-freq noise) \"mad\": Median absolute deviation values \"residual\": Residuals smoothed fit role Role new column. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_snr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_snr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","text":"SNR calculated signal / noise, signal noise estimated using specified methods. Higher values indicate cleaner data. \"diff\" noise method particularly useful estimates high-frequency noise without affected broad spectral features: $$noise = \\sqrt{\\frac{1}{2(n-1)} \\sum_{=2}^{n} (x_i - x_{-1})^2}$$","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_qc_snr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Signal-to-Noise Ratio — step_measure_qc_snr","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_qc_snr() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 6 #>       id water   fat protein .measures  .snr #>    <int> <dbl> <dbl>   <dbl>    <meas> <dbl> #>  1     1  60.5  22.5    16.7 [100 × 2]  277. #>  2     2  46    40.1    13.5 [100 × 2]  370. #>  3     3  71     8.4    20.5 [100 × 2]  291. #>  4     4  72.8   5.9    20.7 [100 × 2]  278. #>  5     5  58.3  25.5    15.5 [100 × 2]  271. #>  6     6  44    42.7    13.7 [100 × 2]  374. #>  7     7  44    42.7    13.7 [100 × 2]  374. #>  8     8  69.3  10.6    19.3 [100 × 2]  255. #>  9     9  61.4  19.9    17.7 [100 × 2]  310. #> 10    10  61.4  19.9    17.7 [100 × 2]  303. #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratio_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","title":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","text":"step_measure_ratio_reference() creates specification recipe step computes ratio spectrum reference, optionally blank subtraction.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratio_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","text":"","code":"step_measure_ratio_reference(   recipe,   reference,   blank = NULL,   measures = NULL,   role = NA,   trained = FALSE,   learned_ref = NULL,   learned_blank = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_ratio_reference\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratio_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","text":"recipe recipe object. step added sequence operations recipe. reference required external reference spectrum. Can : measure_tbl object location value columns numeric vector (must match number locations data) data.frame location value columns (interpolated) blank optional blank spectrum subtract sample reference computing ratio. format options reference. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_ref named list containing validated reference values measure column. NULL step trained. learned_blank named list containing learned blank values measure column. NULL step trained. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratio_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratio_reference.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","text":"step computes ratio relative reference spectrum: Without blank: result = sample / reference blank: result = (sample - blank) / (reference - blank) useful computing relative measurements, absorbance transmittance sample reference scans.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratio_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Ratio to Reference Spectrum — step_measure_ratio_reference","text":"","code":"library(recipes)  # Create reference and blank spectra ref_spectrum <- rep(1.0, 100) blank_spectrum <- rep(0.05, 100)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_ratio_reference(     reference = ref_spectrum,     blank = blank_spectrum   )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratios.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Region Ratios — step_measure_ratios","title":"Calculate Region Ratios — step_measure_ratios","text":"step_measure_ratios() creates specification recipe step calculates ratios integrated regions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratios.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Region Ratios — step_measure_ratios","text":"","code":"step_measure_ratios(   recipe,   numerator,   denominator,   name = NULL,   method = c(\"trapezoid\", \"simpson\"),   measures = NULL,   prefix = \"ratio_\",   role = \"predictor\",   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_ratios\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratios.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Region Ratios — step_measure_ratios","text":"recipe recipe object. numerator numeric vector length 2 specifying numerator region. denominator numeric vector length 2 specifying denominator region. name Output column name. NULL, auto-generated prefix. method Integration method: \"trapezoid\" (default) \"simpson\". measures optional character vector measure column names. prefix Prefix output column name name NULL. Default \"ratio_\". role Role generated column. Default \"predictor\". trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratios.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Region Ratios — step_measure_ratios","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratios.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Region Ratios — step_measure_ratios","text":"step calculates ratio integrated areas two regions: ratio = integral(numerator) / integral(denominator) useful calculating peak ratios spectroscopy, relative concentrations chromatography. denominator integral zero NA, ratio NA.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_ratios.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Region Ratios — step_measure_ratios","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_ratios(     numerator = c(1, 30),     denominator = c(70, 100),     name = \"low_high_ratio\"   ) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 6 #>       id water   fat protein .measures low_high_ratio #>    <int> <dbl> <dbl>   <dbl>    <meas>          <dbl> #>  1     1  60.5  22.5    16.7 [100 × 2]          0.824 #>  2     2  46    40.1    13.5 [100 × 2]          0.839 #>  3     3  71     8.4    20.5 [100 × 2]          0.896 #>  4     4  72.8   5.9    20.7 [100 × 2]          0.882 #>  5     5  58.3  25.5    15.5 [100 × 2]          0.800 #>  6     6  44    42.7    13.7 [100 × 2]          0.829 #>  7     7  44    42.7    13.7 [100 × 2]          0.841 #>  8     8  69.3  10.6    19.3 [100 × 2]          0.821 #>  9     9  61.4  19.9    17.7 [100 × 2]          0.824 #> 10    10  61.4  19.9    17.7 [100 × 2]          0.828 #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_resample.html","id":null,"dir":"Reference","previous_headings":"","what":"Resample Measurements to New Grid — step_measure_resample","title":"Resample Measurements to New Grid — step_measure_resample","text":"step_measure_resample() creates specification recipe step interpolates measurements new regular x-axis grid.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_resample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resample Measurements to New Grid — step_measure_resample","text":"","code":"step_measure_resample(   recipe,   n = NULL,   spacing = NULL,   range = NULL,   method = c(\"linear\", \"spline\"),   measures = NULL,   role = NA,   trained = FALSE,   new_locations = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_resample\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_resample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resample Measurements to New Grid — step_measure_resample","text":"recipe recipe object. step added sequence operations recipe. n positive integer specifying number points new grid. Mutually exclusive spacing. spacing positive numeric value specifying spacing points new grid. Mutually exclusive n. range Optional numeric vector length 2 specifying range new grid c(min, max). NULL (default), uses range existing measurements. method interpolation method. One : \"linear\": Linear interpolation (default) \"spline\": Cubic spline interpolation (smoother) measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. new_locations computed new grid locations (training). skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_resample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resample Measurements to New Grid — step_measure_resample","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_resample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Resample Measurements to New Grid — step_measure_resample","text":"step interpolates measurements new regular grid x-axis values. useful : Aligning data different instruments different sampling rates Reducing data density faster processing Ensuring uniform spacing methods require Matching measurements reference grid new grid determined prep() based training data. range specified, grid spans minimum maximum location values training data. Interpolation methods: \"linear\": Fast simple, may introduce slight distortion peaks \"spline\": Smoother interpolation preserves peak shape better","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_resample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Resample Measurements to New Grid — step_measure_resample","text":"","code":"library(recipes)  # Resample to 50 evenly spaced points rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_resample(n = 50) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7  [50 × 2] #>  2     2  46    40.1    13.5  [50 × 2] #>  3     3  71     8.4    20.5  [50 × 2] #>  4     4  72.8   5.9    20.7  [50 × 2] #>  5     5  58.3  25.5    15.5  [50 × 2] #>  6     6  44    42.7    13.7  [50 × 2] #>  7     7  44    42.7    13.7  [50 × 2] #>  8     8  69.3  10.6    19.3  [50 × 2] #>  9     9  61.4  19.9    17.7  [50 × 2] #> 10    10  61.4  19.9    17.7  [50 × 2] #> # ℹ 205 more rows  # Resample with specific spacing rec2 <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_resample(spacing = 2, method = \"spline\") |>   prep()  bake(rec2, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7  [51 × 2] #>  2     2  46    40.1    13.5  [51 × 2] #>  3     3  71     8.4    20.5  [51 × 2] #>  4     4  72.8   5.9    20.7  [51 × 2] #>  5     5  58.3  25.5    15.5  [51 × 2] #>  6     6  44    42.7    13.7  [51 × 2] #>  7     7  44    42.7    13.7  [51 × 2] #>  8     8  69.3  10.6    19.3  [51 × 2] #>  9     9  61.4  19.9    17.7  [51 × 2] #> 10    10  61.4  19.9    17.7  [51 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":null,"dir":"Reference","previous_headings":"","what":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"step_measure_savitzky_golay creates specification recipe step smooths filters measurement sequence.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"","code":"step_measure_savitzky_golay(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   degree = 3,   window_side = 11,   differentiation_order = 0,   skip = FALSE,   id = rand_id(\"measure_savitzky_golay\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. degree integer polynomial degree use smoothing. window_side integer many units side window. means window_side = 1 total window width 3 (e.g., width 2 * window_side + 1). differentiation_order integer degree filtering (zero indicates differentiation). skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"method can smooth random noise reduce -predictor correlation. fits polynomial window measurements results fewer measurements input. Measurements assumed equally spaced. polynomial degree less window size. Also, window size must greater polynomial degree. either case true, original argument values increased satisfy conditions (warning). selectors supplied step function. data special internal format produced step_measure_input_wide() step_measure_input_long(). measurement locations reset integer indices starting one.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"tidy() step, tibble columns  returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_savitzky_golay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Savitzky-Golay Pre-Processing — step_measure_savitzky_golay","text":"","code":"if (rlang::is_installed(\"prospectr\")) {   rec <-     recipe(water + fat + protein ~ ., data = meats_long) %>%     update_role(id, new_role = \"id\") %>%     step_measure_input_long(transmittance, location = vars(channel)) %>%     step_measure_savitzky_golay(       differentiation_order = 1,       degree = 3,       window_side = 5     ) %>%     prep() }"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_auto.html","id":null,"dir":"Reference","previous_headings":"","what":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","title":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","text":"step_measure_scale_auto() creates specification recipe step applies auto-scaling (also known z-score normalization standardization) measurement location. centers scales unit variance.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_auto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","text":"","code":"step_measure_scale_auto(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   learned_params = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_scale_auto\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_auto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_params named list containing learned means locations measure column. NULL step trained. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_auto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_auto.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","text":"Auto-scaling (standardization) transforms variable zero mean unit variance. gives equal importance measurement locations regardless original scale. data matrix \\(X\\), transformation : $$X_{scaled} = \\frac{X - \\bar{X}}{s_X}$$ \\(\\bar{X}\\) \\(s_X\\) column-wise mean standard deviation computed training data. column zero standard deviation (constant values), column centered, scaled (divisor set 1). means standard deviations learned prep() training data stored use applying transformation new data bake(). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_auto.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Auto-Scaling (Z-Score Normalization) — step_measure_scale_auto","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_scale_auto() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":null,"dir":"Reference","previous_headings":"","what":"Pareto Scaling — step_measure_scale_pareto","title":"Pareto Scaling — step_measure_scale_pareto","text":"step_measure_scale_pareto() creates specification recipe step applies Pareto scaling measurement location. compromise scaling auto-scaling, commonly used metabolomics.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pareto Scaling — step_measure_scale_pareto","text":"","code":"step_measure_scale_pareto(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   learned_params = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_scale_pareto\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pareto Scaling — step_measure_scale_pareto","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_params named list containing learned means locations measure column. NULL step trained. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pareto Scaling — step_measure_scale_pareto","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Pareto Scaling — step_measure_scale_pareto","text":"Pareto scaling divides square root standard deviation rather standard deviation . reduces relative importance large values still giving weight larger fold changes. data matrix \\(X\\), transformation : $$X_{scaled} = \\frac{X - \\bar{X}}{\\sqrt{s_X}}$$ \\(\\bar{X}\\) \\(s_X\\) column-wise mean standard deviation computed training data. column zero standard deviation (constant values), column centered, scaled. means standard deviations learned prep() training data stored use applying transformation new data bake(). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Pareto Scaling — step_measure_scale_pareto","text":"van den Berg, R.., Hoefsloot, H.C., Westerhuis, J.., Smilde, .K., van der Werf, M.J. 2006. Centering, scaling, transformations: improving biological information content metabolomics data. BMC Genomics, 7:142.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_pareto.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Pareto Scaling — step_measure_scale_pareto","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_scale_pareto() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Range Scaling — step_measure_scale_range","title":"Range Scaling — step_measure_scale_range","text":"step_measure_scale_range() creates specification recipe step applies range scaling measurement location. centers divides range (max - min) variable.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Range Scaling — step_measure_scale_range","text":"","code":"step_measure_scale_range(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   learned_params = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_scale_range\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Range Scaling — step_measure_scale_range","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_params named list containing learned means locations measure column. NULL step trained. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Range Scaling — step_measure_scale_range","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_range.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Range Scaling — step_measure_scale_range","text":"Range scaling centers data divides range, giving bounded values suitable methods sensitive variable scale. data matrix \\(X\\), transformation : $$X_{scaled} = \\frac{X - \\bar{X}}{\\max(X) - \\min(X)}$$ \\(\\bar{X}\\) column-wise mean range computed training data. column zero range (constant values), column centered, scaled. means ranges learned prep() training data stored use applying transformation new data bake(). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_range.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Range Scaling — step_measure_scale_range","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_scale_range() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":null,"dir":"Reference","previous_headings":"","what":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"step_measure_scale_vast() creates specification recipe step applies VAST (Variable Stability) scaling measurement location. focuses variables high stability (low coefficient variation).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"","code":"step_measure_scale_vast(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   learned_params = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_scale_vast\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_params named list containing learned means locations measure column. NULL step trained. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"VAST scaling divides product standard deviation coefficient variation (CV = SD/mean). gives weight variables stable across samples (low CV). data matrix \\(X\\), transformation : $$X_{scaled} = \\frac{X - \\bar{X}}{s_X \\cdot CV_X}$$ \\(\\bar{X}\\), \\(s_X\\), \\(CV_X = s_X / |\\bar{X}|\\) computed training data. column zero divisor (constant values zero mean), column centered, scaled. means, standard deviations, CVs learned prep() training data stored use applying transformation new data bake(). selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"van den Berg, R.., Hoefsloot, H.C., Westerhuis, J.., Smilde, .K., van der Werf, M.J. 2006. Centering, scaling, transformations: improving biological information content metabolomics data. BMC Genomics, 7:142.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_scale_vast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"VAST Scaling (Variable Stability Scaling) — step_measure_scale_vast","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_scale_vast() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_gaussian.html","id":null,"dir":"Reference","previous_headings":"","what":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","title":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","text":"step_measure_smooth_gaussian() creates specification recipe step applies Gaussian kernel smoothing. produces smooth results preserving general shape peaks.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_gaussian.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","text":"","code":"step_measure_smooth_gaussian(   recipe,   measures = NULL,   sigma = 1,   window = NULL,   edge_method = c(\"reflect\", \"constant\", \"NA\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_smooth_gaussian\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_gaussian.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","text":"recipe recipe object. measures optional character vector measure column names. sigma standard deviation Gaussian kernel. Default 1. Larger values produce smoothing. Tunable via smooth_sigma(). window window size. NULL (default), automatically set ceiling(6 * sigma) | 1 (6 sigma rule, ensuring odd). edge_method handle edges. One \"reflect\" (default), \"constant\", \"NA\". role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_gaussian.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_gaussian.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","text":"Gaussian smoothing convolves spectrum Gaussian kernel: $$G(x) = \\exp(-x^2 / 2\\sigma^2)$$ kernel normalized sum 1. provides smooth, natural-looking results preserve peak shapes better moving average.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_gaussian.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Gaussian Kernel Smoothing — step_measure_smooth_gaussian","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_smooth_gaussian(sigma = 2) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_ma.html","id":null,"dir":"Reference","previous_headings":"","what":"Moving Average Smoothing — step_measure_smooth_ma","title":"Moving Average Smoothing — step_measure_smooth_ma","text":"step_measure_smooth_ma() creates specification recipe step applies moving average smoothing measurement data. simple fast method reducing high-frequency noise.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_ma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Moving Average Smoothing — step_measure_smooth_ma","text":"","code":"step_measure_smooth_ma(   recipe,   measures = NULL,   window = 5L,   edge_method = c(\"reflect\", \"constant\", \"NA\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_smooth_ma\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_ma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Moving Average Smoothing — step_measure_smooth_ma","text":"recipe recipe object. measures optional character vector measure column names. window window size moving average. Must odd integer least 3. Default 5. Larger values produce smoothing. Tunable via smooth_window(). edge_method handle edges full window fit. One \"reflect\" (default, reflects values boundaries), \"constant\" (pads edge values), \"NA\" (returns NA edge values). role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_ma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Moving Average Smoothing — step_measure_smooth_ma","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_ma.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Moving Average Smoothing — step_measure_smooth_ma","text":"Moving average smoothing replaces point mean neighbors within sliding window. equivalent convolution uniform kernel. window size w, smoothed value position : $$y_i = \\frac{1}{w} \\sum_{j=-k}^{k} x_{+j}$$ k = (w-1)/2 half-window size.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_ma.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Moving Average Smoothing — step_measure_smooth_ma","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_smooth_ma(window = 5) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_median.html","id":null,"dir":"Reference","previous_headings":"","what":"Median Filter Smoothing — step_measure_smooth_median","title":"Median Filter Smoothing — step_measure_smooth_median","text":"step_measure_smooth_median() creates specification recipe step applies median filter smoothing. robust method particularly effective removing spike noise preserving edges.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_median.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Median Filter Smoothing — step_measure_smooth_median","text":"","code":"step_measure_smooth_median(   recipe,   measures = NULL,   window = 5L,   edge_method = c(\"reflect\", \"constant\", \"NA\"),   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_smooth_median\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_median.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Median Filter Smoothing — step_measure_smooth_median","text":"recipe recipe object. measures optional character vector measure column names. window window size moving average. Must odd integer least 3. Default 5. Larger values produce smoothing. Tunable via smooth_window(). edge_method handle edges full window fit. One \"reflect\" (default, reflects values boundaries), \"constant\" (pads edge values), \"NA\" (returns NA edge values). role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_median.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Median Filter Smoothing — step_measure_smooth_median","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_median.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Median Filter Smoothing — step_measure_smooth_median","text":"Median filtering replaces point median neighbors within sliding window. Unlike moving average, median filtering robust outliers spikes, making ideal : Removing cosmic ray spikes Raman spectroscopy Cleaning detector artifacts Preserving sharp edges removing noise","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_median.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Median Filter Smoothing — step_measure_smooth_median","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_smooth_median(window = 5) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":null,"dir":"Reference","previous_headings":"","what":"Wavelet Denoising — step_measure_smooth_wavelet","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"step_measure_smooth_wavelet() creates specification recipe step applies wavelet-based denoising measurement data. method particularly effective signals localized features like peaks.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"","code":"step_measure_smooth_wavelet(   recipe,   measures = NULL,   wavelet = \"DaubExPhase\",   filter_number = 4L,   threshold_type = c(\"soft\", \"hard\"),   threshold_policy = c(\"universal\", \"sure\", \"cv\"),   levels = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_smooth_wavelet\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"recipe recipe object. measures optional character vector measure column names. wavelet wavelet family use. Default \"DaubExPhase\". Options include \"DaubExPhase\", \"DaubLeAsworthy\", \"Lawton\". filter_number filter number within wavelet family. Default 4. Higher numbers give smoother wavelets. threshold_type Type thresholding: \"soft\" (default) \"hard\". Soft thresholding shrinks coefficients toward zero; hard thresholding sets small coefficients exactly zero. threshold_policy determine threshold: \"universal\" (default): Uses universal threshold sqrt(2*log(n)) \"sure\": Stein's Unbiased Risk Estimate \"cv\": Cross-validation levels Number decomposition levels. Default NULL (auto). role used. trained Logical indicating step trained. skip Logical. step skipped baking? id Unique step identifier.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"updated recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"Wavelet denoising works : Decomposing signal wavelet coefficients Thresholding small coefficients (presumed noise) Reconstructing signal remaining coefficients approach powerful : adapts local signal characteristics preserves sharp features like peaks can separate noise signal multiple scales Requires wavethresh package installed.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"Wavelet transforms require signal lengths powers 2. Signals automatically padded next power 2 trimmed processing.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_smooth_wavelet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wavelet Denoising — step_measure_smooth_wavelet","text":"","code":"library(recipes)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_smooth_wavelet() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":null,"dir":"Reference","previous_headings":"","what":"Standard Normal Variate (SNV) Transformation — step_measure_snv","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"step_measure_snv() creates specification recipe step applies Standard Normal Variate transformation spectral data. SNV normalizes spectrum zero mean unit standard deviation.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"","code":"step_measure_snv(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_snv\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. Use limit processing specific measure columns working multiple measurement types. role used step since new variables created. trained logical indicate quantities preprocessing estimated. skip logical. step skipped recipe baked recipes::bake()? operations baked recipes::prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"Standard Normal Variate (SNV) row-wise transformation normalizes spectrum independently. spectrum \\(x\\), transformation : $$SNV(x) = \\frac{x - \\bar{x}}{s_x}$$ \\(\\bar{x}\\) mean \\(s_x\\) standard deviation spectrum values. SNV commonly used remove multiplicative effects scatter particle size NIR spectroscopy. SNV transformation, spectrum mean zero standard deviation one. selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long(). measurement locations preserved unchanged.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"tidy() step, tibble column terms (set \".measures\") id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_snv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Standard Normal Variate (SNV) Transformation — step_measure_snv","text":"","code":"library(recipes)  rec <-   recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_snv() |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7 [100 × 2] #>  2     2  46    40.1    13.5 [100 × 2] #>  3     3  71     8.4    20.5 [100 × 2] #>  4     4  72.8   5.9    20.7 [100 × 2] #>  5     5  58.3  25.5    15.5 [100 × 2] #>  6     6  44    42.7    13.7 [100 × 2] #>  7     7  44    42.7    13.7 [100 × 2] #>  8     8  69.3  10.6    19.3 [100 × 2] #>  9     9  61.4  19.9    17.7 [100 × 2] #> 10    10  61.4  19.9    17.7 [100 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":null,"dir":"Reference","previous_headings":"","what":"Subtract Blank Measurement — step_measure_subtract_blank","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"step_measure_subtract_blank() creates specification recipe step subtracts divides blank measurement. blank can provided externally learned training data.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"","code":"step_measure_subtract_blank(   recipe,   blank = NULL,   blank_col = NULL,   blank_value = NULL,   method = \"subtract\",   measures = NULL,   role = NA,   trained = FALSE,   learned_blank = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_subtract_blank\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"recipe recipe object. step added sequence operations recipe. blank optional external blank use. Can : measure_tbl object location value columns numeric vector (must match number locations data) data.frame location value columns (interpolated) NULL, blank learned training data using blank_col blank_value. blank_col optional column name (unquoted) identifies sample types. Used blank_value identify blank samples training data. blank_value value blank_col identifies blank samples. step prepped, mean blank samples computed stored use baking. method correction method apply: \"subtract\" (default): Subtract blank spectrum \"divide\": Divide spectrum blank measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_blank named list containing learned blank values measure column. NULL step trained. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"updated version recipe new step added sequence existing operations.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"Blank subtraction fundamental preprocessing step analytical chemistry. removes background signal present measurements related analyte interest. Two modes operation: External blank: provide blank spectrum directly via blank argument. useful known reference blank. Learned blank: specify samples blanks training data using blank_col blank_value. prep(), mean blank samples computed stored. approach useful batch-specific blank correction. Common use cases: UV-Vis: Remove solvent absorbance IR: Remove atmospheric CO2/H2O interference Fluorescence: Remove buffer background Raman scatter Chromatography: Remove ghost peaks solvent artifacts selectors supplied step function. data internal format produced step_measure_input_wide() step_measure_input_long().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"tidy() step, tibble columns terms, method, blank_source, id returned.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_blank.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subtract Blank Measurement — step_measure_subtract_blank","text":"","code":"library(recipes)  # Example with external blank (numeric vector) blank_spectrum <- rep(0.1, 100)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_subtract_blank(blank = blank_spectrum)  # Example learning blank from training data # (assuming sample_type column with \"blank\" values) # rec <- recipe(outcome ~ ., data = my_data) |> #   step_measure_input_long(...) |> #   step_measure_subtract_blank(blank_col = sample_type, blank_value = \"blank\")"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","title":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","text":"step_measure_subtract_reference() creates specification recipe step subtracts divides spectrum external reference. simpler version step_measure_subtract_blank() always uses externally provided reference.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","text":"","code":"step_measure_subtract_reference(   recipe,   reference,   method = \"subtract\",   measures = NULL,   role = NA,   trained = FALSE,   learned_ref = NULL,   skip = FALSE,   id = recipes::rand_id(\"measure_subtract_reference\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","text":"recipe recipe object. step added sequence operations recipe. reference required external reference spectrum. Can : measure_tbl object location value columns numeric vector (must match number locations data) data.frame location value columns (interpolated) method correction method apply: \"subtract\" (default): Subtract blank spectrum \"divide\": Divide spectrum blank measures optional character vector measure column names process. NULL (default), measure columns (columns class measure_list) processed. role used step since new variables created. trained logical indicate quantities preprocessing estimated. learned_ref named list containing validated reference values measure column. NULL step trained. skip logical. step skipped recipe baked? id character string unique step identify .","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_reference.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","text":"step applies simple reference correction spectrum: method = \"subtract\": result = sample - reference method = \"divide\": result = sample / reference Unlike step_measure_subtract_blank(), step always requires externally provided reference support learning training data.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_subtract_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subtract or Divide by Reference Spectrum — step_measure_subtract_reference","text":"","code":"library(recipes)  # Create a reference spectrum ref_spectrum <- rep(1.0, 100)  rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_subtract_reference(reference = ref_spectrum, method = \"divide\")"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_transmittance.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Absorbance to Transmittance — step_measure_transmittance","title":"Convert Absorbance to Transmittance — step_measure_transmittance","text":"step_measure_transmittance() creates specification recipe step converts absorbance values transmittance.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_transmittance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Absorbance to Transmittance — step_measure_transmittance","text":"","code":"step_measure_transmittance(   recipe,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_transmittance\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_transmittance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Absorbance to Transmittance — step_measure_transmittance","text":"recipe recipe object. step added sequence operations recipe. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_transmittance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Absorbance to Transmittance — step_measure_transmittance","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_transmittance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert Absorbance to Transmittance — step_measure_transmittance","text":"step applies inverse Beer-Lambert law transformation: $$T = 10^{-}$$ \\(\\) absorbance \\(T\\) transmittance. measurement locations preserved unchanged.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_transmittance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Absorbance to Transmittance — step_measure_transmittance","text":"","code":"library(recipes)  # Convert to absorbance then back to transmittance (round-trip) rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_absorbance() |>   step_measure_transmittance() |>   prep()"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_trim.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim Measurements to Specified Range — step_measure_trim","title":"Trim Measurements to Specified Range — step_measure_trim","text":"step_measure_trim() creates specification recipe step keeps measurement points within specified x-axis range(s).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_trim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim Measurements to Specified Range — step_measure_trim","text":"","code":"step_measure_trim(   recipe,   range,   measures = NULL,   role = NA,   trained = FALSE,   skip = FALSE,   id = recipes::rand_id(\"measure_trim\") )"},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_trim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim Measurements to Specified Range — step_measure_trim","text":"recipe recipe object. step added sequence operations recipe. range numeric vector length 2 specifying range keep c(min, max). Points location >= min <= max retained. measures optional character vector measure column names process. NULL (default), measure columns processed. role used step since new variables created. trained logical indicate step trained. skip logical. step skipped baking? id character string unique step.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_trim.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim Measurements to Specified Range — step_measure_trim","text":"updated version recipe new step added.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_trim.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Trim Measurements to Specified Range — step_measure_trim","text":"step filters measurements keep points within specified range. useful : Defining integration windows (e.g., keep 8-18 mL elution range) Removing noisy regions start/end measurement Focusing analysis region interest Points location values outside range removed. order remaining points preserved.","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/step_measure_trim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim Measurements to Specified Range — step_measure_trim","text":"","code":"library(recipes)  # Keep only a specific wavelength range rec <- recipe(water + fat + protein ~ ., data = meats_long) |>   update_role(id, new_role = \"id\") |>   step_measure_input_long(transmittance, location = vars(channel)) |>   step_measure_trim(range = c(10, 90)) |>   prep()  bake(rec, new_data = NULL) #> # A tibble: 215 × 5 #>       id water   fat protein .measures #>    <int> <dbl> <dbl>   <dbl>    <meas> #>  1     1  60.5  22.5    16.7  [81 × 2] #>  2     2  46    40.1    13.5  [81 × 2] #>  3     3  71     8.4    20.5  [81 × 2] #>  4     4  72.8   5.9    20.7  [81 × 2] #>  5     5  58.3  25.5    15.5  [81 × 2] #>  6     6  44    42.7    13.7  [81 × 2] #>  7     7  44    42.7    13.7  [81 × 2] #>  8     8  69.3  10.6    19.3  [81 × 2] #>  9     9  61.4  19.9    17.7  [81 × 2] #> 10    10  61.4  19.9    17.7  [81 × 2] #> # ℹ 205 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/subtract_rf_baseline.html","id":null,"dir":"Reference","previous_headings":"","what":"Subtract baseline using robust fitting method — subtract_rf_baseline","title":"Subtract baseline using robust fitting method — subtract_rf_baseline","text":"standalone function robust fitting baseline subtraction using local regression iterative reweighting. use within recipe workflow, see step_measure_baseline_rf().","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/subtract_rf_baseline.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subtract baseline using robust fitting method — subtract_rf_baseline","text":"","code":"subtract_rf_baseline(data, yvar, span = 2/3, maxit = c(5, 5))"},{"path":"https://jameshwade.github.io/measure/dev/reference/subtract_rf_baseline.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subtract baseline using robust fitting method — subtract_rf_baseline","text":"data dataframe containing variable baseline subtraction yvar name column baseline subtraction span Controls amount smoothing based fraction data use computing fitted value, defaults 2/3. maxit number iterations use robust fit, defaults c(5, 5) first value specifies iterations asymmetric weighting function second value symmetric weighting function.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/subtract_rf_baseline.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subtract baseline using robust fitting method — subtract_rf_baseline","text":"dataframe matching column data plus raw baseline columns","code":""},{"path":[]},{"path":"https://jameshwade.github.io/measure/dev/reference/subtract_rf_baseline.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subtract baseline using robust fitting method — subtract_rf_baseline","text":"","code":"library(dplyr) meats_long |>   group_by(id) |>   subtract_rf_baseline(yvar = transmittance) #> # A tibble: 21,500 × 8 #> # Groups:   id [215] #>       id water   fat protein channel transmittance   raw baseline #>    <int> <dbl> <dbl>   <dbl>   <int>         <dbl> <dbl>    <dbl> #>  1     1  60.5  22.5    16.7       1       0.0668   2.62     2.55 #>  2     1  60.5  22.5    16.7       2       0.0598   2.62     2.56 #>  3     1  60.5  22.5    16.7       3       0.0527   2.62     2.57 #>  4     1  60.5  22.5    16.7       4       0.0458   2.62     2.57 #>  5     1  60.5  22.5    16.7       5       0.0389   2.62     2.58 #>  6     1  60.5  22.5    16.7       6       0.0321   2.62     2.59 #>  7     1  60.5  22.5    16.7       7       0.0256   2.62     2.60 #>  8     1  60.5  22.5    16.7       8       0.0193   2.62     2.60 #>  9     1  60.5  22.5    16.7       9       0.0133   2.63     2.61 #> 10     1  60.5  22.5    16.7      10       0.00753  2.63     2.62 #> # ℹ 21,490 more rows"},{"path":"https://jameshwade.github.io/measure/dev/reference/tidy.recipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidiers for measure steps — tidy.step_measure_align_shift","title":"Tidiers for measure steps — tidy.step_measure_align_shift","text":"Tidiers measure steps","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/tidy.recipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tidiers for measure steps — tidy.step_measure_align_shift","text":"","code":"# S3 method for class 'step_measure_align_shift' tidy(x, ...)  # S3 method for class 'step_measure_align_reference' tidy(x, ...)  # S3 method for class 'step_measure_align_dtw' tidy(x, ...)  # S3 method for class 'step_measure_align_ptw' tidy(x, ...)  # S3 method for class 'step_measure_align_cow' tidy(x, ...)  # S3 method for class 'step_measure_augment_noise' tidy(x, ...)  # S3 method for class 'step_measure_augment_shift' tidy(x, ...)  # S3 method for class 'step_measure_augment_scale' tidy(x, ...)  # S3 method for class 'step_measure_baseline_als' tidy(x, ...)  # S3 method for class 'step_measure_baseline_custom' tidy(x, ...)  # S3 method for class 'step_measure_baseline_rolling' tidy(x, ...)  # S3 method for class 'step_measure_baseline_airpls' tidy(x, ...)  # S3 method for class 'step_measure_baseline_snip' tidy(x, ...)  # S3 method for class 'step_measure_baseline_arpls' tidy(x, ...)  # S3 method for class 'step_measure_baseline_tophat' tidy(x, ...)  # S3 method for class 'step_measure_baseline_morph' tidy(x, ...)  # S3 method for class 'step_measure_baseline_minima' tidy(x, ...)  # S3 method for class 'step_measure_baseline_auto' tidy(x, ...)  # S3 method for class 'step_measure_baseline_gpc' tidy(x, ...)  # S3 method for class 'step_measure_baseline_poly' tidy(x, ...)  # S3 method for class 'step_measure_baseline_py' tidy(x, ...)  # S3 method for class 'step_measure_baseline_rf' tidy(x, ...)  # S3 method for class 'step_measure_calibrate_x' tidy(x, ...)  # S3 method for class 'step_measure_calibrate_y' tidy(x, ...)  # S3 method for class 'step_measure_despike' tidy(x, ...)  # S3 method for class 'step_measure_detrend' tidy(x, ...)  # S3 method for class 'step_measure_integrals' tidy(x, ...)  # S3 method for class 'step_measure_ratios' tidy(x, ...)  # S3 method for class 'step_measure_moments' tidy(x, ...)  # S3 method for class 'step_measure_bin' tidy(x, ...)  # S3 method for class 'step_measure_input_long' tidy(x, ...)  # S3 method for class 'step_measure_input_wide' tidy(x, ...)  # S3 method for class 'step_measure_map' tidy(x, ...)  # S3 method for class 'step_measure_msc' tidy(x, ...)  # S3 method for class 'step_measure_mw_averages' tidy(x, ...)  # S3 method for class 'step_measure_mw_fractions' tidy(x, ...)  # S3 method for class 'step_measure_mw_distribution' tidy(x, ...)  # S3 method for class 'step_measure_normalize_sum' tidy(x, ...)  # S3 method for class 'step_measure_normalize_max' tidy(x, ...)  # S3 method for class 'step_measure_normalize_range' tidy(x, ...)  # S3 method for class 'step_measure_normalize_vector' tidy(x, ...)  # S3 method for class 'step_measure_normalize_auc' tidy(x, ...)  # S3 method for class 'step_measure_normalize_peak' tidy(x, ...)  # S3 method for class 'step_measure_output_long' tidy(x, ...)  # S3 method for class 'step_measure_output_wide' tidy(x, ...)  # S3 method for class 'step_measure_peaks_detect' tidy(x, ...)  # S3 method for class 'step_measure_peaks_integrate' tidy(x, ...)  # S3 method for class 'step_measure_peaks_filter' tidy(x, ...)  # S3 method for class 'step_measure_peaks_to_table' tidy(x, ...)  # S3 method for class 'step_measure_peaks_deconvolve' tidy(x, ...)  # S3 method for class 'step_measure_qc_snr' tidy(x, ...)  # S3 method for class 'step_measure_qc_saturated' tidy(x, ...)  # S3 method for class 'step_measure_impute' tidy(x, ...)  # S3 method for class 'step_measure_qc_outlier' tidy(x, ...)  # S3 method for class 'step_measure_subtract_blank' tidy(x, ...)  # S3 method for class 'step_measure_subtract_reference' tidy(x, ...)  # S3 method for class 'step_measure_ratio_reference' tidy(x, ...)  # S3 method for class 'step_measure_trim' tidy(x, ...)  # S3 method for class 'step_measure_exclude' tidy(x, ...)  # S3 method for class 'step_measure_resample' tidy(x, ...)  # S3 method for class 'step_measure_interpolate' tidy(x, ...)  # S3 method for class 'step_measure_savitzky_golay' tidy(x, ...)  # S3 method for class 'step_measure_center' tidy(x, ...)  # S3 method for class 'step_measure_scale_auto' tidy(x, ...)  # S3 method for class 'step_measure_scale_pareto' tidy(x, ...)  # S3 method for class 'step_measure_scale_range' tidy(x, ...)  # S3 method for class 'step_measure_scale_vast' tidy(x, ...)  # S3 method for class 'step_measure_emsc' tidy(x, ...)  # S3 method for class 'step_measure_osc' tidy(x, ...)  # S3 method for class 'step_measure_smooth_wavelet' tidy(x, ...)  # S3 method for class 'step_measure_smooth_ma' tidy(x, ...)  # S3 method for class 'step_measure_smooth_median' tidy(x, ...)  # S3 method for class 'step_measure_smooth_gaussian' tidy(x, ...)  # S3 method for class 'step_measure_filter_fourier' tidy(x, ...)  # S3 method for class 'step_measure_snv' tidy(x, ...)  # S3 method for class 'step_measure_absorbance' tidy(x, ...)  # S3 method for class 'step_measure_transmittance' tidy(x, ...)  # S3 method for class 'step_measure_log' tidy(x, ...)  # S3 method for class 'step_measure_kubelka_munk' tidy(x, ...)  # S3 method for class 'step_measure_derivative' tidy(x, ...)  # S3 method for class 'step_measure_derivative_gap' tidy(x, ...)"},{"path":"https://jameshwade.github.io/measure/dev/reference/tidy.recipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tidiers for measure steps — tidy.step_measure_align_shift","text":"x step object. ... used.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/tunable_measure.html","id":null,"dir":"Reference","previous_headings":"","what":"tunable methods for measure — tunable.step_measure_align_cow","title":"tunable methods for measure — tunable.step_measure_align_cow","text":"functions define parameters can tuned specific steps. also define recommended objects dials package can used generate new parameter values characteristics.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/tunable_measure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tunable methods for measure — tunable.step_measure_align_cow","text":"","code":"# S3 method for class 'step_measure_align_cow' tunable(x, ...)  # S3 method for class 'step_measure_baseline_custom' tunable(x, ...)  # S3 method for class 'step_measure_baseline_airpls' tunable(x, ...)  # S3 method for class 'step_measure_baseline_arpls' tunable(x, ...)  # S3 method for class 'step_measure_baseline_py' tunable(x, ...)  # S3 method for class 'step_measure_bin' tunable(x, ...)  # S3 method for class 'step_measure_savitzky_golay' tunable(x, ...)  # S3 method for class 'step_measure_baseline_als' tunable(x, ...)  # S3 method for class 'step_measure_baseline_poly' tunable(x, ...)  # S3 method for class 'step_measure_baseline_rf' tunable(x, ...)  # S3 method for class 'step_measure_detrend' tunable(x, ...)  # S3 method for class 'step_measure_normalize_peak' tunable(x, ...)  # S3 method for class 'step_measure_derivative' tunable(x, ...)  # S3 method for class 'step_measure_derivative_gap' tunable(x, ...)  # S3 method for class 'step_measure_baseline_airpls' tunable(x, ...)  # S3 method for class 'step_measure_baseline_arpls' tunable(x, ...)  # S3 method for class 'step_measure_smooth_ma' tunable(x, ...)  # S3 method for class 'step_measure_smooth_median' tunable(x, ...)  # S3 method for class 'step_measure_smooth_gaussian' tunable(x, ...)  # S3 method for class 'step_measure_filter_fourier' tunable(x, ...)  # S3 method for class 'step_measure_despike' tunable(x, ...)  # S3 method for class 'step_measure_align_shift' tunable(x, ...)  # S3 method for class 'step_measure_qc_outlier' tunable(x, ...)  # S3 method for class 'step_measure_emsc' tunable(x, ...)  # S3 method for class 'step_measure_osc' tunable(x, ...)"},{"path":"https://jameshwade.github.io/measure/dev/reference/tunable_measure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tunable methods for measure — tunable.step_measure_align_cow","text":"x recipe step object ... used.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/tunable_measure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"tunable methods for measure — tunable.step_measure_align_cow","text":"tibble object.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/vctrs-methods.html","id":null,"dir":"Reference","previous_headings":"","what":"vctrs methods for measure classes — print.measure_tbl","title":"vctrs methods for measure classes — print.measure_tbl","text":"methods enable nice printing measure objects tibbles.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/vctrs-methods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"vctrs methods for measure classes — print.measure_tbl","text":"","code":"# S3 method for class 'measure_tbl' print(x, ..., n = NULL, width = NULL)  # S3 method for class 'measure_tbl' vec_ptype_abbr(x, ...)  # S3 method for class 'measure_list' print(x, ...)  # S3 method for class 'measure_list' vec_ptype_abbr(x, ...)  # S3 method for class 'measure_list' vec_ptype_full(x, ...)  # S3 method for class 'measure_list' format(x, ...)  # S3 method for class 'measure_list' obj_print_data(x, ...)  # S3 method for class 'measure_list' x[i, ...]  # S3 method for class 'measure_list' x[[i, ...]]  # S3 method for class 'measure_list' c(...)"},{"path":"https://jameshwade.github.io/measure/dev/reference/vctrs-methods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"vctrs methods for measure classes — print.measure_tbl","text":"x measure_list measure_tbl object. ... Additional arguments (unused).","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/window_side.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameter for measure steps — window_side","title":"Parameter for measure steps — window_side","text":"window_side() differentiation_order() used Savitzky-Golay processing.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/window_side.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameter for measure steps — window_side","text":"","code":"window_side(range = c(1L, 5L), trans = NULL)  differentiation_order(range = c(0L, 4L), trans = NULL)"},{"path":"https://jameshwade.github.io/measure/dev/reference/window_side.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameter for measure steps — window_side","text":"range two-element vector holding defaults smallest largest possible values, respectively. transformation specified, values transformed units. trans trans object scales package, scales::transform_log10() scales::transform_reciprocal(). provided, default used matches units used range. transformation, NULL.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/window_side.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameter for measure steps — window_side","text":"function classes \"quant_param\" \"param\".","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/window_side.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parameter for measure steps — window_side","text":"parameter often used correct zero-count data tables proportions.","code":""},{"path":"https://jameshwade.github.io/measure/dev/reference/window_side.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parameter for measure steps — window_side","text":"","code":"window_side() #> Window Size (one side) (quantitative) #> Range: [1, 5] differentiation_order() #> Differentiation Order (quantitative) #> Range: [0, 4]"}]
